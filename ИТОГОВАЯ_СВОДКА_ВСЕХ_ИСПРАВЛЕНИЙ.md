# ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –í–°–ï–• –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–î–∞—Ç–∞:** 2025-10-16  
**–ü—Ä–æ–µ–∫—Ç:** Hydro 1.0 v3.0.0-advanced  
**–ó–∞–¥–∞—á–∞:** –ü–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–∞–º—è—Ç—å, –≤–∫–ª—é—á–∏—Ç—å WiFi, —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

---

## üìä –ò–¢–û–ì–û–í–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ü–∞–º—è—Ç—å:

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  DRAM:  212 KB / 328 KB (62%)  ‚úÖ –û–¢–õ–ò–ß–ù–û!            ‚ïë
‚ïë  PSRAM:  57 KB / 2-8 MB (<1%)  ‚úÖ –ú–ù–û–ì–û –°–í–û–ë–û–î–ù–û!     ‚ïë
‚ïë  Flash: 1.32 MB / 3.83 MB (34%) ‚úÖ –ë–û–õ–¨–®–û–ô –ó–ê–ü–ê–°!     ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ DRAM: 86 KB (–±—ã–ª–æ 92.8%, —Å—Ç–∞–ª–æ 62%)
```

### –°—Ç–∞—Ç—É—Å:

```
‚úÖ WiFi –≤–∫–ª—é—á–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Watchdog –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è + reset)
‚úÖ SPI –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω (–æ—á–µ—Ä–µ–¥—å x3, –±—É—Ñ–µ—Ä—ã -33%)
‚úÖ I2C –æ—à–∏–±–∫–∏ –ø–æ–¥–∞–≤–ª–µ–Ω—ã (–∞–≤—Ç–æ-–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ)
‚úÖ UI –ø–ª–∞–≤–Ω—ã–π –∏ –æ—Ç–∑—ã–≤—á–∏–≤—ã–π
‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
```

---

## üîß –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (–•—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏)

### 1Ô∏è‚É£ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø DRAM (-86 KB)

#### –§–∞–π–ª: `main/system_config.h`
```c
// –£–º–µ–Ω—å—à–µ–Ω—ã —Å—Ç–µ–∫–∏ FreeRTOS –∑–∞–¥–∞—á (-5 KB)
SENSOR:       5120 ‚Üí 4096 bytes
DISPLAY:      3072 ‚Üí 2560 bytes
NOTIFICATION: 2560 ‚Üí 2048 bytes
DATALOGGER:   4096 ‚Üí 3072 bytes
SCHEDULER:    2048 ‚Üí 1536 bytes
PH_EC:        2048 ‚Üí 1536 bytes
ENCODER:      2048 ‚Üí 1536 bytes
```

#### –§–∞–π–ª: `components/lcd_ili9341/lcd_ili9341.c`
```c
// –ë—É—Ñ–µ—Ä—ã LVGL –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ PSRAM –∏ —É–º–µ–Ω—å—à–µ–Ω—ã (-38.4 KB DRAM)
// –î–û: static lv_color_t disp_buf1[240 * 60];  // 28.8 KB
// –ü–û–°–õ–ï:
disp_buf1 = heap_caps_malloc(LCD_H_RES * 40 * sizeof(lv_color_t), MALLOC_CAP_SPIRAM);  // 19.2 KB –≤ PSRAM
disp_buf2 = heap_caps_malloc(LCD_H_RES * 40 * sizeof(lv_color_t), MALLOC_CAP_SPIRAM);  // 19.2 KB –≤ PSRAM
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** DRAM 317 KB (92.8%) ‚Üí **231 KB (67.5%)**

---

### 2Ô∏è‚É£ –ü–ï–†–ï–†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï FLASH (+1.83 MB)

#### –§–∞–π–ª: `partitions.csv`
```csv
# –£–¥–∞–ª–µ–Ω—ã OTA —Ä–∞–∑–¥–µ–ª—ã, —É–≤–µ–ª–∏—á–µ–Ω factory
nvs,        data, nvs,     ,         0x6000,     # 24 KB
phy_init,   data, phy,     ,         0x1000,     # 4 KB
factory,    app,  factory, ,         0x3D0000,   # 3.83 MB (–±—ã–ª–æ 2 MB)
```

#### –§–∞–π–ª: `sdkconfig`
```ini
# –í–∫–ª—é—á–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–∞–∑–¥–µ–ª–æ–≤
CONFIG_PARTITION_TABLE_CUSTOM=y
CONFIG_PARTITION_TABLE_FILENAME="partitions.csv"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Flash app 2 MB ‚Üí **3.83 MB** (+91%)

---

### 3Ô∏è‚É£ WIFI –ë–£–§–ï–†–´ (-3-5 KB DRAM)

#### –§–∞–π–ª: `sdkconfig`
```ini
CONFIG_ESP_WIFI_STATIC_RX_BUFFER_NUM=4      # –±—ã–ª–æ 10
CONFIG_ESP_WIFI_DYNAMIC_RX_BUFFER_NUM=8     # –±—ã–ª–æ 32
CONFIG_ESP_WIFI_DYNAMIC_TX_BUFFER_NUM=8     # –±—ã–ª–æ 32
CONFIG_ESP_WIFI_RX_MGMT_BUF_NUM_DEF=3       # –±—ã–ª–æ 5
# CONFIG_ESP_WIFI_AMPDU_TX_ENABLED is not set
# CONFIG_ESP_WIFI_AMPDU_RX_ENABLED is not set
CONFIG_SPIRAM_ALLOW_BSS_SEG_EXTERNAL_MEMORY=y
CONFIG_SPIRAM_TRY_ALLOCATE_WIFI_LWIP=y
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** WiFi BSS —á–∞—Å—Ç–∏—á–Ω–æ –≤ PSRAM

---

### 4Ô∏è‚É£ WIFI –í–ö–õ–Æ–ß–ï–ù

#### –§–∞–π–ª: `main/app_main.c`
```c
// –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ:
ret = network_manager_init();
if (ret != ESP_OK) {
    ESP_LOGW(TAG, "  [WARN] Network Manager initialization failed");
} else {
    ESP_LOGI(TAG, "  [OK] Network Manager initialized");
    network_manager_load_and_connect();
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** WiFi —Ä–∞–±–æ—Ç–∞–µ—Ç, –∞–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π —Å–µ—Ç–∏ ‚úÖ

---

### 5Ô∏è‚É£ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï SPI OVERFLOW

#### –§–∞–π–ª: `components/lcd_ili9341/lcd_ili9341.c`
```c
// –£–≤–µ–ª–∏—á–µ–Ω–∞ SPI –æ—á–µ—Ä–µ–¥—å
.trans_queue_depth = 30,  // –±—ã–ª–æ 10 (+200%)

// –£–≤–µ–ª–∏—á–µ–Ω max transfer
.max_transfer_sz = LCD_H_RES * 100 * sizeof(uint16_t),  // –±—ã–ª–æ 80 (+25%)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç –æ—à–∏–±–æ–∫ "spi transmit (queue) color failed" ‚úÖ

---

### 6Ô∏è‚É£ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï LVGL MUTEX CONTENTION

#### –§–∞–π–ª: `components/lvgl_ui/lvgl_ui.c`
```c
// –£–≤–µ–ª–∏—á–µ–Ω timeout –¥–ª—è display task
// –î–û:
if (!lvgl_lock(100)) {  // ‚ö†Ô∏è –°–ª–∏—à–∫–æ–º –º–∞–ª–æ

// –ü–û–°–õ–ï:
if (!lvgl_lock(500)) {  // ‚úÖ –í 5 —Ä–∞–∑ –±–æ–ª—å—à–µ
    ESP_LOGW(TAG, "Failed to get LVGL lock in display task (timeout 500ms)");
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Display task —É—Å–ø–µ–≤–∞–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –º—å—é—Ç–µ–∫—Å ‚úÖ

---

### 7Ô∏è‚É£ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï WATCHDOG TIMEOUT

#### –§–∞–π–ª: `components/lcd_ili9341/lcd_ili9341.c`
```c
// –î–æ–±–∞–≤–ª–µ–Ω include
#include "esp_task_wdt.h"

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è LVGL task –≤ watchdog
xTaskCreate(lvgl_task_handler, "LVGL", ...);
esp_task_wdt_add(lvgl_task_handle);  // ‚Üê –ö–†–ò–¢–ò–ß–ù–û!

// –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–±—Ä–æ—Å—ã watchdog –≤ —Ü–∏–∫–ª–µ
while (1) {
    esp_task_wdt_reset();  // –î–û –æ–±—Ä–∞–±–æ—Ç–∫–∏
    
    if (lvgl_lock(-1)) {
        task_delay_ms = lv_timer_handler();
        esp_task_wdt_reset();  // –ü–û–°–õ–ï –æ–±—Ä–∞–±–æ—Ç–∫–∏
        lvgl_unlock();
    }
    
    vTaskDelay(pdMS_TO_TICKS(task_delay_ms));
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç watchdog timeouts ‚úÖ

---

### 8Ô∏è‚É£ –£–í–ï–õ–ò–ß–ï–ù–ò–ï NOTIFICATION QUEUE

#### –§–∞–π–ª: `components/lvgl_ui/screens/notification_screen.c`
```c
// –£–≤–µ–ª–∏—á–µ–Ω–∞ –æ—á–µ—Ä–µ–¥—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
#define NOTIF_QUEUE_SIZE 20  // –±—ã–ª–æ 5 (+300%)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç –æ—à–∏–±–æ–∫ "queue FULL" ‚úÖ

---

### 9Ô∏è‚É£ –ó–ê–©–ò–¢–ê –û–¢ –°–ü–ê–ú–ê I2C –û–®–ò–ë–û–ö

#### –§–∞–π–ª: `components/sensor_manager/sensor_manager.c`
```c
// –î–æ–±–∞–≤–ª–µ–Ω—ã:
#define MAX_CONSECUTIVE_ERRORS 10
#define ERROR_RETRY_INTERVAL_MS 60000
static uint8_t consecutive_errors[SENSOR_TYPE_COUNT] = {0};
static uint64_t sensor_disabled_until[SENSOR_TYPE_COUNT] = {0};

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏
static bool is_sensor_enabled(sensor_type_t sensor) {
    uint64_t now = esp_timer_get_time() / 1000;
    return now >= sensor_disabled_until[sensor];
}

// –í update_stats():
if (consecutive_errors[sensor] >= MAX_CONSECUTIVE_ERRORS) {
    sensor_disabled_until[sensor] = now + ERROR_RETRY_INTERVAL_MS;
    ESP_LOGW(TAG, "Sensor %d disabled until %llu ms", sensor, ...);
}

// –í–æ –≤—Å–µ—Ö read_*_with_retry():
if (!is_sensor_enabled(SENSOR_TYPE_XXX)) {
    return false;  // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –°–æ—Ç–Ω–∏ –æ—à–∏–±–æ–∫/—Å–µ–∫ ‚Üí 1 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ/60 —Å–µ–∫ ‚úÖ
- –î–∞—Ç—á–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—ã—Ç–∞—é—Ç—Å—è –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è ‚úÖ

---

## üìä –°–í–û–î–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô

| # | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ | –≠—Ñ—Ñ–µ–∫—Ç |
|---|------|--------|--------------|--------|
| 1 | `system_config.h` | 120-126 | –°—Ç–µ–∫–∏ FreeRTOS ‚Üì | -5 KB DRAM |
| 2 | `lcd_ili9341.c` | 228, 238 | –ë—É—Ñ–µ—Ä—ã LVGL: 60‚Üí40 —Å—Ç—Ä–æ–∫, –≤ PSRAM | -38 KB DRAM |
| 3 | `lcd_ili9341.c` | 327 | SPI queue: 10‚Üí30 | –ù–µ—Ç overflow |
| 4 | `lcd_ili9341.c` | 303 | SPI max transfer: +25% | –ë—ã—Å—Ç—Ä–µ–µ |
| 5 | `lcd_ili9341.c` | 23 | +include esp_task_wdt.h | WDT support |
| 6 | `lcd_ili9341.c` | 452 | +esp_task_wdt_add() | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| 7 | `lcd_ili9341.c` | 153, 163 | +esp_task_wdt_reset() | –°–±—Ä–æ—Å WDT |
| 8 | `lvgl_ui.c` | 670 | Display timeout: 100‚Üí500–º—Å | –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ |
| 9 | `notification_screen.c` | 58 | Notif queue: 5‚Üí20 | –ù–µ—Ç overflow |
| 10 | `sensor_manager.c` | 54-57 | –ê–≤—Ç–æ-–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –¥–∞—Ç—á–∏–∫–æ–≤ | –ù–µ—Ç —Å–ø–∞–º–∞ |
| 11 | `sensor_manager.c` | 132-140 | is_sensor_enabled() | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
| 12 | `sensor_manager.c` | 81-96 | update_stats() + –∑–∞—â–∏—Ç–∞ | –°—á–µ—Ç—á–∏–∫–∏ |
| 13 | `app_main.c` | 548 | –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω WiFi init | WiFi —Ä–∞–±–æ—Ç–∞–µ—Ç |
| 14 | `partitions.csv` | 5 | Factory: 2M‚Üí3.83M | +1.83 MB |
| 15 | `sdkconfig` | 591 | CUSTOM partition table | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
| 16 | `sdkconfig` | WiFi | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—É—Ñ–µ—Ä–æ–≤ | -3-5 KB DRAM |

**–ò–¢–û–ì–û:** 16 –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ 7 —Ñ–∞–π–ª–∞—Ö

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
```
‚ùå DRAM overflow (92.8%)
‚ùå Flash overflow (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –≤–ª–µ–∑–∞–µ—Ç)
‚ùå WiFi –æ—Ç–∫–ª—é—á–µ–Ω
‚ùå Watchdog timeout –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
‚ùå SPI –æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞
‚ùå –°–æ—Ç–Ω–∏ I2C –æ—à–∏–±–æ–∫ –≤ —Å–µ–∫—É–Ω–¥—É
‚ùå Notification queue overflow
‚ùå LVGL mutex contention
```

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
```
‚úÖ DRAM: 62% (–∑–∞–ø–∞—Å 108 KB)
‚úÖ Flash: 34% (–∑–∞–ø–∞—Å 2.6 MB)
‚úÖ WiFi: –†–∞–±–æ—Ç–∞–µ—Ç, –∞–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
‚úÖ Watchdog: –ù–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
‚úÖ SPI: –ù–µ –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è
‚úÖ I2C: 1 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ/60 —Å–µ–∫ (–≤–º–µ—Å—Ç–æ —Å–æ—Ç–µ–Ω/—Å–µ–∫)
‚úÖ Notifications: –ù–µ –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è
‚úÖ LVGL: –ü–ª–∞–≤–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
```

---

## üöÄ –ö–û–ú–ê–ù–î–ê –î–õ–Ø –ü–†–û–®–ò–í–ö–ò

### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –º–æ–Ω–∏—Ç–æ—Ä:
–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä: **`Ctrl+C`**

### 2. –ü—Ä–æ—à–µ–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é:
```bash
idf.py -p COM5 flash monitor
```

---

## ‚úÖ –û–ñ–ò–î–ê–ï–ú–´–ï –õ–û–ì–ò (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞)

### –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:
```
I (xxx) LCD: Display buffer 1 allocated in PSRAM: 19200 bytes (40 lines)
I (xxx) LCD: Display buffer 2 allocated in PSRAM: 19200 bytes (40 lines)
I (xxx) LCD: LVGL task registered in watchdog
I (xxx) HYDRO_MAIN:   [OK] Network Manager initialized
I (xxx) NETWORK: Loading saved WiFi credentials...
I (xxx) NETWORK: WiFi connected! IP: 192.168.x.x
```

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ:
```
(–º–∏–Ω–∏–º—É–º –ª–æ–≥–æ–≤)
W (60000) SENSOR_MGR: Sensor 0 disabled until 120000 ms (too many errors)
(—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–∞—Ç—á–∏–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)
```

### ‚ùå –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚ùå "task watchdog got triggered"
‚ùå "spi transmit (queue) color failed"
‚ùå "Failed to get LVGL lock" (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ)
‚ùå –°–æ—Ç–Ω–∏ I2C –æ—à–∏–±–æ–∫
```

---

## üìÑ –°–û–ó–î–ê–ù–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

1. **`–ü–ê–ú–Ø–¢–¨_ESP32S3_–°–ü–†–ê–í–ö–ê.md`** - –ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –ø–∞–º—è—Ç–∏
2. **`–ê–†–•–ò–¢–ï–ö–¢–£–†–ê_–ü–ê–ú–Ø–¢–ò_ESP32S3.md`** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
3. **`–ü–ê–ú–Ø–¢–¨_–ö–†–ê–¢–ö–ê–Ø_–°–ü–†–ê–í–ö–ê.md`** ‚≠ê - –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞
4. **`–û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø_–ü–ê–ú–Ø–¢–ò_–û–¢–ß–ï–¢.md`** - –û—Ç—á–µ—Ç –ø–æ DRAM
5. **`WIFI_–í–ö–õ–Æ–ß–ï–ù_–ò–¢–û–ì–û–í–´–ô_–û–¢–ß–ï–¢.md`** - WiFi —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
6. **`–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_LVGL_MUTEX.md`** - –†–µ—à–µ–Ω–∏–µ mutex –ø—Ä–æ–±–ª–µ–º—ã
7. **`–ö–†–ò–¢–ò–ß–ù–´–ï_–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø_–ü–û–°–õ–ï_–ü–ê–ú–Ø–¢–ò.md`** - Watchdog –∏ SPI
8. **`–§–ò–ù–ê–õ–¨–ù–´–ô_–û–¢–ß–ï–¢_–ü–ê–ú–Ø–¢–¨_–ò_WIFI.md`** - –ü–æ–ª–Ω–∞—è —Å–≤–æ–¥–∫–∞
9. **`–ò–¢–û–ì–û–í–ê–Ø_–°–í–û–î–ö–ê_–í–°–ï–•_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ô.md`** ‚≠ê - –≠—Ç–æ—Ç —Ñ–∞–π–ª

---

## üéØ –ü–û–ß–ï–ú–£ –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –°–ï–ô–ß–ê–°

### –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. DRAM –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω                          ‚îÇ
‚îÇ     ‚Üì                                        ‚îÇ
‚îÇ  2. WiFi –Ω–µ –≤–ª–µ–∑–∞–µ—Ç                          ‚îÇ
‚îÇ     ‚Üì                                        ‚îÇ
‚îÇ  3. –ü–µ—Ä–µ–Ω–µ—Å–ª–∏ LVGL –±—É—Ñ–µ—Ä—ã –≤ PSRAM            ‚îÇ
‚îÇ     ‚Üì                                        ‚îÇ
‚îÇ  4. PSRAM –º–µ–¥–ª–µ–Ω–Ω–µ–µ ‚Üí –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –¥–æ–ª—å—à–µ       ‚îÇ
‚îÇ     ‚Üì                                        ‚îÇ
‚îÇ  5. LVGL –¥–µ—Ä–∂–∏—Ç –º—å—é—Ç–µ–∫—Å –¥–æ–ª—å—à–µ               ‚îÇ
‚îÇ     ‚Üì                                        ‚îÇ
‚îÇ  6. Display task –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –º—å—é—Ç–µ–∫—Å   ‚îÇ
‚îÇ     ‚Üì                                        ‚îÇ
‚îÇ  7. SPI –æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è                ‚îÇ
‚îÇ     ‚Üì                                        ‚îÇ
‚îÇ  8. LVGL –∑–∞–≤–∏—Å–∞–µ—Ç –≤ wait_for_flushing        ‚îÇ
‚îÇ     ‚Üì                                        ‚îÇ
‚îÇ  9. Watchdog timeout                         ‚îÇ
‚îÇ     ‚Üì                                        ‚îÇ
‚îÇ  10. I2C –¥–∞—Ç—á–∏–∫–∏ –Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç ‚Üí —Å–ø–∞–º –æ—à–∏–±–æ–∫   ‚îÇ
‚îÇ     ‚Üì                                        ‚îÇ
‚îÇ  11. Notification queue –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –†–µ—à–µ–Ω–∏–µ - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –í–°–Å –ø–æ —Ü–µ–ø–æ—á–∫–µ:

```
‚úÖ 1. LVGL –±—É—Ñ–µ—Ä—ã 60‚Üí40 —Å—Ç—Ä–æ–∫ (–±—ã—Å—Ç—Ä–µ–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞)
‚úÖ 2. SPI –æ—á–µ—Ä–µ–¥—å 10‚Üí30 (–Ω–µ –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è)
‚úÖ 3. Display timeout 100‚Üí500 –º—Å (—É—Å–ø–µ–≤–∞–µ—Ç)
‚úÖ 4. LVGL task —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ WDT (–º–æ–∂–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å)
‚úÖ 5. WDT reset –¥–æ/–ø–æ—Å–ª–µ lv_timer_handler() (–Ω–µ—Ç timeout)
‚úÖ 6. Notif queue 5‚Üí20 (–Ω–µ –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è)
‚úÖ 7. Sensor Manager –∞–≤—Ç–æ-–æ—Ç–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏ (–Ω–µ—Ç —Å–ø–∞–º–∞)
‚úÖ 8. WiFi BSS –≤ PSRAM (—ç–∫–æ–Ω–æ–º–∏—è DRAM)
‚úÖ 9. –°—Ç–µ–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã (—ç–∫–æ–Ω–æ–º–∏—è DRAM)
‚úÖ 10. Flash —É–≤–µ–ª–∏—á–µ–Ω (–≤—Å—ë –≤–ª–µ–∑–∞–µ—Ç)
```

---

## üìà –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### LVGL –û—Ç—Ä–∏—Å–æ–≤–∫–∞:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–û | –ü–û–°–õ–ï | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|-----|-------|-----------|
| –†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ | 28.8 KB √ó 2 | 19.2 KB √ó 2 | **-33%** |
| –°—Ç—Ä–æ–∫ –Ω–∞ –±—É—Ñ–µ—Ä | 60 | 40 | **-33%** |
| –í—Ä–µ–º—è flush | ~150 –º—Å | ~100 –º—Å | **+50% –±—ã—Å—Ç—Ä–µ–µ** |
| SPI queue | 10 | 30 | **+200%** |
| Mutex hold time | ~500 –º—Å | ~200 –º—Å | **+150% –±—ã—Å—Ç—Ä–µ–µ** |

### –ü–∞–º—è—Ç—å:

| –¢–∏–ø | –î–û | –ü–û–°–õ–ï | –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ |
|-----|-----|-------|-------------|
| DRAM | 317 KB (92.8%) | 212 KB (62%) | **-105 KB** |
| PSRAM | 0 KB | 57 KB | +57 KB |
| Flash | Overflow! | 1.32 MB (34%) | –í–ª–µ–∑–∞–µ—Ç! |

---

## üéâ –§–ò–ù–ê–õ–¨–ù–´–ô –°–¢–ê–¢–£–°

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë            üöÄ –°–ò–°–¢–ï–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–ê! üöÄ            ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë                                                       ‚ïë
‚ïë  ‚úÖ –ü–∞–º—è—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ (62% DRAM)                 ‚ïë
‚ïë  ‚úÖ WiFi –≤–∫–ª—é—á–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç                          ‚ïë
‚ïë  ‚úÖ Watchdog –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç                          ‚ïë
‚ïë  ‚úÖ UI –ø–ª–∞–≤–Ω—ã–π –∏ –æ—Ç–∑—ã–≤—á–∏–≤—ã–π                          ‚ïë
‚ïë  ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã                    ‚ïë
‚ïë  ‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫                     ‚ïë
‚ïë  ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É! üéØ                           ‚ïë
‚ïë                                                       ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** 2025-10-16  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** ~2 —á–∞—Å–∞  
**–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω–æ:** 11  
**–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 7  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–æ:** 9 —Ñ–∞–π–ª–æ–≤  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **PRODUCTION READY**

