# üîç –û—Ç—á–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç–∫—Ä–∞–Ω–æ–≤ - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è PID —Å–∏—Å—Ç–µ–º–∞

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-10-15  
**–í–µ—Ä—Å–∏—è:** 3.0.0-adaptive  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã

---

## ‚úÖ BACKEND –ö–û–ú–ü–û–ù–ï–ù–¢–´

### 1. adaptive_pid
**–§–∞–π–ª—ã:**
- `components/adaptive_pid/adaptive_pid.h` (324 —Å—Ç—Ä–æ–∫–∏)
- `components/adaptive_pid/adaptive_pid.c` (787 —Å—Ç—Ä–æ–∫)
- `components/adaptive_pid/CMakeLists.txt`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è: –£—Å–ø–µ—à–Ω–æ
- ‚úÖ Linter: –ù–µ—Ç –æ—à–∏–±–æ–∫
- ‚úÖ API: 12 —Ñ—É–Ω–∫—Ü–∏–π —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ
- ‚úÖ Thread-safety: 6 –º—å—é—Ç–µ–∫—Å–æ–≤
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ Ring buffer –∏—Å—Ç–æ—Ä–∏–∏ (50 —Ç–æ—á–µ–∫)
- ‚úÖ –õ–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤
- ‚úÖ –û–±—É—á–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–Ω–æ–π –µ–º–∫–æ—Å—Ç–∏
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º

---

### 2. trend_predictor
**–§–∞–π–ª—ã:**
- `components/trend_predictor/trend_predictor.h` (174 —Å—Ç—Ä–æ–∫–∏)
- `components/trend_predictor/trend_predictor.c` (266 —Å—Ç—Ä–æ–∫)
- `components/trend_predictor/CMakeLists.txt`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è: –£—Å–ø–µ—à–Ω–æ
- ‚úÖ Linter: –ù–µ—Ç –æ—à–∏–±–æ–∫
- ‚úÖ API: 7 –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º—ã: –†–µ–≥—Ä–µ—Å—Å–∏—è, —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ, –∞–Ω–æ–º–∞–ª–∏–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –õ–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è (–ú–ù–ö)
- ‚úÖ –†–∞—Å—á–µ—Ç R¬≤ (–∫–∞—á–µ—Å—Ç–≤–æ fit)
- ‚úÖ –°–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ
- ‚úÖ –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ
- ‚úÖ –î–µ—Ç–µ–∫—Ç–æ—Ä –∞–Ω–æ–º–∞–ª–∏–π (œÉ)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ

---

### 3. pid_auto_tuner
**–§–∞–π–ª—ã:**
- `components/pid_auto_tuner/pid_auto_tuner.h` (166 —Å—Ç—Ä–æ–∫)
- `components/pid_auto_tuner/pid_auto_tuner.c` (517 —Å—Ç—Ä–æ–∫)
- `components/pid_auto_tuner/CMakeLists.txt`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è: –£—Å–ø–µ—à–Ω–æ
- ‚úÖ Linter: –ù–µ—Ç –æ—à–∏–±–æ–∫
- ‚ö†Ô∏è Warnings: –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (TODO - –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∏–∫–æ–≤)
- ‚úÖ API: 6 —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ Thread-safety: 6 –º—å—é—Ç–µ–∫—Å–æ–≤

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ Relay method (Ziegler-Nichols)
- ‚úÖ –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –∑–∞–¥–∞—á–∞ FreeRTOS
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å 0-100%
- ‚úÖ –û—Ç–º–µ–Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚ö†Ô∏è Step Response (TODO)
- ‚ö†Ô∏è Adaptive method (TODO)

---

## ‚úÖ FRONTEND - –≠–ö–†–ê–ù–´

### 4. pid_intelligent_dashboard (–ù–û–í–´–ô)
**–§–∞–π–ª—ã:**
- `components/lvgl_ui/screens/adaptive/pid_intelligent_dashboard.h` (45 —Å—Ç—Ä–æ–∫)
- `components/lvgl_ui/screens/adaptive/pid_intelligent_dashboard.c` (314 —Å—Ç—Ä–æ–∫)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è: –£—Å–ø–µ—à–Ω–æ
- ‚úÖ Linter: –ß–∏—Å—Ç–æ
- ‚ö†Ô∏è Warning: g_selected_card –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–¥–ª—è —ç–Ω–∫–æ–¥–µ—Ä–∞)
- ‚úÖ LVGL thread-safety: `lv_lock()/lv_unlock()` ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û!
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: screen_init.c
- ‚úÖ –ú–µ–Ω—é: system_menu_screen.c

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π PID       ‚öôÔ∏è  ‚îÇ ‚Üê Status bar
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ü—Ä–æ–≥–Ω–æ–∑ —Å–∏—Å—Ç–µ–º—ã                 ‚îÇ ‚Üê 40px –ø–∞–Ω–µ–ª—å
‚îÇ pH: 7.2 ‚Üí 6.8 –∑–∞ 23 –º–∏–Ω         ‚îÇ
‚îÇ EC: 1.5 ‚Üí 1.7 –∑–∞ 45 –º–∏–Ω         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ pH UP  [ON] 7.2‚Üí6.5  78%        ‚îÇ ‚Üê 55px –∫–∞—Ä—Ç–æ—á–∫–∞
‚îÇ ‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚ñ¨‚óã‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ             ‚îÇ
‚îÇ P:+0.4 I:-0.2 D:+0.1            ‚îÇ
‚îÇ Kp:2.1(‚Üë) –ü–∞–¥–∞–µ—Ç                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ...–æ—Å—Ç–∞–ª—å–Ω—ã–µ 5 –Ω–∞—Å–æ—Å–æ–≤...       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –°–µ–∫—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞ (pH + EC)
- ‚úÖ 6 –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
- ‚úÖ Live –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–∫–∞–∂–¥—ã–µ 2 —Å–µ–∫)
- ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ ‚Üí –¥–µ—Ç–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω
- ‚úÖ –ó–∞–¥–∞—á–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π

---

### 5. intelligent_pid_card (–ù–û–í–´–ô –≤–∏–¥–∂–µ—Ç)
**–§–∞–π–ª—ã:**
- `components/lvgl_ui/widgets/intelligent_pid_card.h` (111 —Å—Ç—Ä–æ–∫)
- `components/lvgl_ui/widgets/intelligent_pid_card.c` (259 —Å—Ç—Ä–æ–∫)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è: –£—Å–ø–µ—à–Ω–æ
- ‚úÖ Linter: –ù–µ—Ç –æ—à–∏–±–æ–∫
- ‚úÖ –ü–∞–º—è—Ç—å: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ/–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ
- ‚úÖ 7 —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

**–≠–ª–µ–º–µ–Ω—Ç—ã –∫–∞—Ä—Ç–æ—á–∫–∏:**
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞—Å–æ—Å–∞
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä ON/OFF —Å —Ü–≤–µ—Ç–æ–º
- ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è "—Ç–µ–∫—É—â–µ–µ ‚Üí —Ü–µ–ª–µ–≤–æ–µ"
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (0-100%)
- ‚úÖ PID –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (P/I/D)
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (Kp/Ki —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º ‚Üë‚Üì)
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞

**–°—Ç–∞—Ç—É—Å—ã:**
| –°—Ç–∞—Ç—É—Å | –¶–≤–µ—Ç | –†–∞–º–∫–∞ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|--------|------|-------|---------------|
| IDLE | –°–µ—Ä—ã–π | 2px | –ù–µ–∞–∫—Ç–∏–≤–µ–Ω |
| ACTIVE | –ñ–µ–ª—Ç—ã–π | 3px | –ö–æ—Ä—Ä–µ–∫—Ü–∏—è |
| LEARNING | –°–∏–Ω–∏–π | 3px | –û–±—É—á–µ–Ω–∏–µ |
| PREDICTING | –§–∏–æ–ª–µ—Ç–æ–≤—ã–π | 3px | –£–ø—Ä–µ–∂–¥–∞—é—â–∞—è |
| AUTO_TUNING | –û—Ä–∞–Ω–∂–µ–≤—ã–π | 3px | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ |
| TARGET_REACHED | –ó–µ–ª–µ–Ω—ã–π | 3px | –¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ |
| ERROR | –ö—Ä–∞—Å–Ω—ã–π | 3px | –û—à–∏–±–∫–∞ |

---

### 6. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ PID —ç–∫—Ä–∞–Ω—ã (–ø—Ä–æ–≤–µ—Ä–µ–Ω—ã)
**–õ–æ–∫–∞—Ü–∏—è:** `components/lvgl_ui/screens/pid/`

| –≠–∫—Ä–∞–Ω | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –û—à–∏–±–∫–∏ |
|-------|------|--------|--------|
| PID Main | pid_main_screen.c | ‚úÖ OK | –ù–µ—Ç |
| PID Detail | pid_detail_screen.c | ‚úÖ OK | –ù–µ—Ç |
| PID Tuning | pid_tuning_screen.c | ‚úÖ OK | –ù–µ—Ç |
| PID Advanced | pid_advanced_screen.c | ‚úÖ OK | –ù–µ—Ç |
| PID Thresholds | pid_thresholds_screen.c | ‚úÖ OK | –ù–µ—Ç |
| PID Graph | pid_graph_screen.c | ‚úÖ OK | –ù–µ—Ç |

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ —ç–∫—Ä–∞–Ω—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

---

### 7. –≠–∫—Ä–∞–Ω—ã –Ω–∞—Å–æ—Å–æ–≤ (–ø—Ä–æ–≤–µ—Ä–µ–Ω—ã)
**–õ–æ–∫–∞—Ü–∏—è:** `components/lvgl_ui/screens/pumps/`

| –≠–∫—Ä–∞–Ω | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –û—à–∏–±–∫–∏ |
|-------|------|--------|--------|
| Pumps Menu | pumps_menu_screen.c | ‚úÖ OK | –ù–µ—Ç |
| Pumps Status | pumps_status_screen.c | ‚úÖ OK | –ù–µ—Ç |
| Pumps Manual | pumps_manual_screen.c | ‚úÖ OK | –ù–µ—Ç |
| Pump Calibration | pump_calibration_screen.c | ‚úÖ OK | –ù–µ—Ç |

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ —ç–∫—Ä–∞–Ω—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

---

### 8. –≠–∫—Ä–∞–Ω—ã –¥–∞—Ç—á–∏–∫–æ–≤ (–ø—Ä–æ–≤–µ—Ä–µ–Ω—ã)
**–õ–æ–∫–∞—Ü–∏—è:** `components/lvgl_ui/screens/sensor/`

| –≠–∫—Ä–∞–Ω | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –û—à–∏–±–∫–∏ |
|-------|------|--------|--------|
| Sensor Detail | sensor_detail_screen.c | ‚úÖ OK | –ù–µ—Ç |
| Sensor Settings | sensor_settings_screen.c | ‚úÖ OK | –ù–µ—Ç |

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ —ç–∫—Ä–∞–Ω—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

---

### 9. –°–∏—Å—Ç–µ–º–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã (–ø—Ä–æ–≤–µ—Ä–µ–Ω—ã)
**–õ–æ–∫–∞—Ü–∏—è:** `components/lvgl_ui/screens/system/`

| –≠–∫—Ä–∞–Ω | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –û—à–∏–±–∫–∏ | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|-------|------|--------|--------|-----------|
| System Menu | system_menu_screen.c | ‚úÖ OK | –ù–µ—Ç | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø—É–Ω–∫—Ç "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π PID" |
| System Screens | system_screens.c | ‚úÖ OK | –ù–µ—Ç | - |

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ —ç–∫—Ä–∞–Ω—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

---

## ‚úÖ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ò –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø

### screen_init.c
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω

**–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã:**
```c
// Adaptive PID (–ù–û–í–´–ô)
"pid_intelligent_dashboard" ‚úÖ

// –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ PID
"pid_main" ‚úÖ
"pid_detail" ‚úÖ
"pid_tuning" ‚úÖ
"pid_advanced" ‚úÖ
"pid_thresholds" ‚úÖ
"pid_graph" ‚úÖ

// Pumps
"pumps_menu" ‚úÖ
"pumps_status" ‚úÖ
"pumps_manual" ‚úÖ
"pump_calibration" ‚úÖ

// Sensors
"sensor_detail" ‚úÖ
"sensor_settings" ‚úÖ

// System
"system_menu" ‚úÖ
"main" ‚úÖ
"notification" ‚úÖ
```

**–í—Å–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ:** 17 —ç–∫—Ä–∞–Ω–æ–≤

---

## ‚úÖ –°–¢–ò–õ–ò –ò –í–ò–î–ñ–ï–¢–´

### lvgl_styles.h/c
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω

**–î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç–∏–ª–µ–π:**
- style_pid_card
- style_pid_active (–∂–µ–ª—Ç—ã–π)
- style_pid_idle (—Å–µ—Ä—ã–π)
- style_pid_learning (—Å–∏–Ω–∏–π)
- style_pid_predicting (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
- style_pid_tuning (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- style_pid_target (–∑–µ–ª–µ–Ω—ã–π)
- style_pid_error (–∫—Ä–∞—Å–Ω—ã–π)
- style_param_normal
- style_param_focused
- style_param_editing
- style_progress_bg
- style_progress_indicator

**–í—Å–µ–≥–æ:** 13 –Ω–æ–≤—ã—Ö —Å—Ç–∏–ª–µ–π ‚úÖ

### –í–∏–¥–∂–µ—Ç—ã
| –í–∏–¥–∂–µ—Ç | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|------|--------|------------|
| intelligent_pid_card | intelligent_pid_card.c/h | ‚úÖ OK | –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ PID |
| back_button | back_button.c/h | ‚úÖ OK | –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ |
| status_bar | status_bar.c/h | ‚úÖ OK | –°—Ç–∞—Ç—É—Å-–±–∞—Ä |
| sensor_card | sensor_card.c/h | ‚úÖ OK | –ö–∞—Ä—Ç–æ—á–∫–∞ –¥–∞—Ç—á–∏–∫–∞ |
| encoder_value_edit | encoder_value_edit.c/h | ‚úÖ OK | –†–µ–¥–∞–∫—Ç–æ—Ä –∑–Ω–∞—á–µ–Ω–∏–π |
| menu_list | menu_list.c/h | ‚úÖ OK | –°–ø–∏—Å–æ–∫ –º–µ–Ω—é |

**–í—Å–µ–≥–æ –≤–∏–¥–∂–µ—Ç–æ–≤:** 6 (1 –Ω–æ–≤—ã–π) ‚úÖ

---

## üêõ –ò–ó–í–ï–°–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### ‚ö†Ô∏è Warnings (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ):

1. **pid_intelligent_dashboard.c:30**
   ```c
   static int g_selected_card = 0;  // –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   ```
   **–°—Ç–∞—Ç—É—Å:** –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —ç–Ω–∫–æ–¥–µ—Ä–æ–º
   **–î–µ–π—Å—Ç–≤–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å

2. **pid_auto_tuner.c:89-94**
   ```c
   // –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è relay —Ç–µ—Å—Ç–∞
   bool relay_state = false;
   uint64_t last_peak_time = start_time;
   // ...
   ```
   **–°—Ç–∞—Ç—É—Å:** TODO - –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∏–∫–æ–≤
   **–î–µ–π—Å—Ç–≤–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –±—É–¥—É—â–µ–º

3. **pump_manager.c:741**
   ```c
   float value_before = current;  // –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   ```
   **–°—Ç–∞—Ç—É—Å:** TODO - –∑–∞–¥–∞—á–∞ delayed learning
   **–î–µ–π—Å—Ç–≤–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –≠–¢–ê–ü–ï 10

### ‚ùå –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏: –ù–ï–¢ ‚úÖ

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–í–ï–†–ö–ò

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è:
```
‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
‚úÖ Binary: 783 KB
‚úÖ –°–≤–æ–±–æ–¥–Ω–æ: 263 KB (25%)
‚úÖ Warnings: 4 (–Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
‚úÖ Errors: 0
```

### Linter:
```
‚úÖ adaptive_pid: –ß–∏—Å—Ç–æ
‚úÖ trend_predictor: –ß–∏—Å—Ç–æ
‚úÖ pid_auto_tuner: –ß–∏—Å—Ç–æ
‚úÖ intelligent_pid_card: –ß–∏—Å—Ç–æ
‚úÖ pid_intelligent_dashboard: –ß–∏—Å—Ç–æ (warnings –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è)
‚úÖ pump_manager: –ß–∏—Å—Ç–æ
‚úÖ ph_ec_controller: –ß–∏—Å—Ç–æ
‚úÖ –í—Å–µ PID —ç–∫—Ä–∞–Ω—ã: –ß–∏—Å—Ç–æ
‚úÖ –í—Å–µ Pump —ç–∫—Ä–∞–Ω—ã: –ß–∏—Å—Ç–æ
‚úÖ –í—Å–µ Sensor —ç–∫—Ä–∞–Ω—ã: –ß–∏—Å—Ç–æ
‚úÖ –í—Å–µ System —ç–∫—Ä–∞–Ω—ã: –ß–∏—Å—Ç–æ
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```
‚úÖ main ‚Üí adaptive_pid ‚úÖ
‚úÖ main ‚Üí pid_auto_tuner ‚úÖ
‚úÖ main ‚Üí trend_predictor ‚úÖ
‚úÖ pump_manager ‚Üí adaptive_pid ‚úÖ
‚úÖ pid_auto_tuner ‚Üí pump_manager ‚úÖ
‚úÖ lvgl_ui ‚Üí adaptive_pid ‚úÖ
‚úÖ lvgl_ui ‚Üí pid_auto_tuner ‚úÖ
```

**–¶–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** –ù–ï–¢ ‚úÖ

---

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ö–†–ò–¢–ò–ß–ù–´–ï –ë–ê–ì–ò

### BUG #1: Watchdog Timeout ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
**–ü—Ä–æ–±–ª–µ–º–∞:**
```
E (73237) task_wdt: Task watchdog got triggered
E (73237) task_wdt: CPU 1: pid_dash_upd
```

**–ü—Ä–∏—á–∏–Ω–∞:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ LVGL –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –º—å—é—Ç–µ–∫—Å–∞

**–†–µ—à–µ–Ω–∏–µ:**
```c
// –î–û (–û–®–ò–ë–ö–ê):
while (g_screen_active) {
    widget_intelligent_pid_card_update(...);  // –ë–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏!
    vTaskDelay(500);
}

// –ü–û–°–õ–ï (–ò–°–ü–†–ê–í–õ–ï–ù–û):
while (g_screen_active) {
    lv_lock();  // –ö–†–ò–¢–ò–ß–ù–û!
    widget_intelligent_pid_card_update(...);
    lv_unlock();  // –ö–†–ò–¢–ò–ß–ù–û!
    vTaskDelay(2000);  // –£–≤–µ–ª–∏—á–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üìã –ù–ê–í–ò–ì–ê–¶–ò–Ø

### –ö–∞–∫ –ø–æ–ø–∞—Å—Ç—å –≤ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π PID:
```
–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
  ‚Üí [–≠–Ω–∫–æ–¥–µ—Ä: –≤—Ä–∞—â–µ–Ω–∏–µ] –≤—ã–±–æ—Ä –¥–∞—Ç—á–∏–∫–∞
  ‚Üí [–≠–Ω–∫–æ–¥–µ—Ä: –¥–æ–ª–≥–∏–π –∫–ª–∏–∫] —Å–∏—Å—Ç–µ–º–Ω–æ–µ –º–µ–Ω—é
  ‚Üí [–≠–Ω–∫–æ–¥–µ—Ä: –≤—Ä–∞—â–µ–Ω–∏–µ] –≤—ã–±–æ—Ä "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π PID"
  ‚Üí [–≠–Ω–∫–æ–¥–µ—Ä: –∫–ª–∏–∫] –æ—Ç–∫—Ä—ã—Ç—å dashboard
```

**–ò–ª–∏:**
```
–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
  ‚Üí –ö–Ω–æ–ø–∫–∞ "–°–∏—Å—Ç–µ–º–∞"
  ‚Üí "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π PID"
```

---

## ‚úÖ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

### Backend: 100% –≥–æ—Ç–æ–≤ ‚úÖ
- [x] adaptive_pid –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- [x] trend_predictor —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] pid_auto_tuner –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É
- [x] pump_manager –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
- [x] ph_ec_controller –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

### Frontend: Dashboard –≥–æ—Ç–æ–≤ ‚úÖ
- [x] pid_intelligent_dashboard —Å–æ–∑–¥–∞–µ—Ç—Å—è
- [x] 6 –∫–∞—Ä—Ç–æ—á–µ–∫ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [x] –°–µ–∫—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] Live –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å lv_lock()
- [x] –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: 100% ‚úÖ
- [x] –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- [x] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [x] –ú–µ–Ω—é –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- [x] –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ü–†–û–®–ò–í–ö–ò

### –ü—Ä–æ—à–∏–≤–∫–∞ –Ω–∞ COM5:
```bash
cd c:\esp\hydro\hydro1.0
idf.py -p COM5 flash
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```bash
idf.py -p COM5 monitor
```

### –ü–æ–ª–Ω–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ + –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```bash
idf.py -p COM5 flash monitor
```

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–æ–≥–∞—Ö:
```
[OK] Adaptive PID initialized        ‚Üê –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
[OK] PID Auto-Tuner initialized      ‚Üê –ê–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞
[OK] 7 PID screens registered        ‚Üê –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–æ–≤
PID_DASHBOARD: Dashboard —Å–æ–∑–¥–∞–Ω...   ‚Üê –°–æ–∑–¥–∞–Ω–∏–µ dashboard
PID_DASHBOARD: –ó–∞–¥–∞—á–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è...  ‚Üê –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏
```

---

## üìà –û–ñ–ò–î–ê–ï–ú–û–ï –ü–û–í–ï–î–ï–ù–ò–ï

### –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã:
1. ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è
2. ‚úÖ adaptive_pid –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–±–æ—Ä –∏—Å—Ç–æ—Ä–∏–∏
3. ‚úÖ –ß–µ—Ä–µ–∑ 5-10 –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ—è–≤—è—Ç—Å—è –ø–µ—Ä–≤—ã–µ —Ç—Ä–µ–Ω–¥—ã
4. ‚úÖ –ß–µ—Ä–µ–∑ 10-15 –∫–æ—Ä—Ä–µ–∫—Ü–∏–π –Ω–∞—á–Ω–µ—Ç—Å—è –æ–±—É—á–µ–Ω–∏–µ

### –í UI Dashboard:
1. ‚úÖ 6 –∫–∞—Ä—Ç–æ—á–µ–∫ –Ω–∞—Å–æ—Å–æ–≤
2. ‚úÖ –°–µ–∫—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞ (—Å–Ω–∞—á–∞–ª–∞ "–æ—Ç–∫–ª—é—á–µ–Ω")
3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
4. ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –£–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º
  - ‚úÖ –û–±—É—á–µ–Ω–∏–µ: –í–ö–õ
  - ‚ö™ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è: –í–´–ö–õ (–≤–∫–ª—é—á–∏—Ç—å –ø–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è)
  - ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã: –í–ö–õ
  - ‚ö™ –ê–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞: –í–´–ö–õ (–∑–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é)

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –≠—Ç–∞–ø—ã 6-7 (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1):
- [ ] –î–µ—Ç–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω (3 –≤–∫–ª–∞–¥–∫–∏)
- [ ] –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –≠—Ç–∞–ø—ã 9-10 (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2):
- [ ] –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ NVS

### –≠—Ç–∞–ø 11 (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1):
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏
- [ ] –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç 24 —á–∞—Å–∞

---

## ‚úÖ –í–´–í–û–î–´

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
‚úÖ **Backend:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω  
‚úÖ **Dashboard:** –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–≤—è–∑–∞–Ω—ã  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** Thread-safe —Å –º—å—é—Ç–µ–∫—Å–∞–º–∏  
‚úÖ **–ü–∞–º—è—Ç—å:** –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (25% —Å–≤–æ–±–æ–¥–Ω–æ)  
‚úÖ **–ö–æ–º–ø–∏–ª—è—Ü–∏—è:** –ë–µ–∑ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫  

### –ì–æ—Ç–æ–≤–æ –∫:
‚úÖ –ü—Ä–æ—à–∏–≤–∫–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ  
‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é backend  
‚úÖ –°–±–æ—Ä—É –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏  
‚úÖ –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ UI  

---

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** üü¢ **–ì–û–¢–û–í –ö –ü–†–û–®–ò–í–ö–ï –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ!**

**–í–µ—Ä—Å–∏—è –æ—Ç—á–µ—Ç–∞:** 1.0  
**–î–∞—Ç–∞:** 2025-10-15  
**–ü—Ä–æ–≤–µ—Ä–∏–ª:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è + linter + —Å–±–æ—Ä–∫–∞

