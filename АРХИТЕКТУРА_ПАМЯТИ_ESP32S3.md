# üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–∞–º—è—Ç–∏ ESP32-S3 –≤ –ø—Ä–æ–µ–∫—Ç–µ Hydro 1.0

**–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:** ESP32-S3 (Dual Core Xtensa LX7, 240 MHz)  
**Flash:** 4 MB  
**PSRAM:** 2-8 MB (OCT mode, 80 MHz)  
**–î–∞—Ç–∞:** 2025-10-16

---

## üß† 1. –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è SRAM (~512 KB)

ESP32-S3 –∏–º–µ–µ—Ç ~512 KB –±—ã—Å—Ç—Ä–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏ (SRAM), —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–æ–π –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–≥–∏–æ–Ω–æ–≤:

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ SRAM:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  ESP32-S3 SRAM                      ‚îÇ
‚îÇ                   ~512 KB Total                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                     ‚îÇ
‚îÇ  IRAM (Instruction RAM) - ~200 KB                   ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ  ‚îÇ
‚îÇ  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:                                        ‚îÇ
‚îÇ  ‚Ä¢ –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π –∫–æ–¥ ISR (–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è)                 ‚îÇ
‚îÇ  ‚Ä¢ WiFi/Bluetooth –¥—Ä–∞–π–≤–µ—Ä—ã                          ‚îÇ
‚îÇ  ‚Ä¢ –§—É–Ω–∫—Ü–∏–∏ —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º IRAM_ATTR                    ‚îÇ
‚îÇ  ‚Ä¢ –ö—Ä–∏—Ç–∏—á–Ω—ã–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–¥                         ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ:                            ‚îÇ
‚îÇ  .text:    15356 bytes (93.73%)                     ‚îÇ
‚îÇ  .vectors:  1028 bytes (6.27%)                      ‚îÇ
‚îÇ  –í—Å–µ–≥–æ:    16384 bytes (100%) ‚úÖ –ü–æ–ª–Ω–æ–µ            ‚îÇ
‚îÇ                                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                     ‚îÇ
‚îÇ  DRAM (Data RAM) - ~328 KB  ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–´–ô –†–ï–°–£–†–°    ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ  ‚îÇ
‚îÇ  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:                                        ‚îÇ
‚îÇ  ‚Ä¢ Heap (malloc/free)                               ‚îÇ
‚îÇ  ‚Ä¢ –°—Ç–µ–∫–∏ FreeRTOS –∑–∞–¥–∞—á                             ‚îÇ
‚îÇ  ‚Ä¢ .data (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ)            ‚îÇ
‚îÇ  ‚Ä¢ .bss (–Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ)           ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ (–ü–û–°–õ–ï –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏):        ‚îÇ
‚îÇ  .bss:   149512 bytes (43.75%) ‚Üê –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å    ‚îÇ
‚îÇ  .data:   15768 bytes (4.61%)                       ‚îÇ
‚îÇ  .text:   65487 bytes (19.16%)                      ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                     ‚îÇ
‚îÇ  –í—Å–µ–≥–æ:  230767 bytes (67.52%) ‚úÖ –•–æ—Ä–æ—à–æ           ‚îÇ
‚îÇ  –°–≤–æ–±–æ–¥–Ω–æ: 108 KB ‚Üê –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è WiFi!            ‚îÇ
‚îÇ                                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                     ‚îÇ
‚îÇ  Cache - ~64 KB                                     ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ  ‚îÇ
‚îÇ  ‚Ä¢ –ö—ç—à –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (Instruction Cache)               ‚îÇ
‚îÇ  ‚Ä¢ –ö—ç—à –¥–∞–Ω–Ω—ã—Ö (Data Cache): 32 KB (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)      ‚îÇ
‚îÇ  ‚Ä¢ –ë—É—Ñ–µ—Ä –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Flash                        ‚îÇ
‚îÇ                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ DRAM (230767 bytes):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           .bss (149512 bytes)               ‚îÇ  ‚Üê –ù–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îÇ  ‚Ä¢ WiFi driver BSS (~10-15 KB)              ‚îÇ
‚îÇ  ‚Ä¢ Adaptive PID states (~3-5 KB)            ‚îÇ
‚îÇ  ‚Ä¢ Pump manager states (~2-3 KB)            ‚îÇ
‚îÇ  ‚Ä¢ LVGL widget buffers (~2-4 KB)            ‚îÇ
‚îÇ  ‚Ä¢ Sensor cache & stats (~1-2 KB)           ‚îÇ
‚îÇ  ‚Ä¢ Notification system (~1 KB)              ‚îÇ
‚îÇ  ‚Ä¢ Error handler (~1 KB)                    ‚îÇ
‚îÇ  ‚Ä¢ –û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (~125 KB)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           .data (15768 bytes)               ‚îÇ  ‚Üê –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îÇ  ‚Ä¢ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã               ‚îÇ
‚îÇ  ‚Ä¢ –ö–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã                      ‚îÇ
‚îÇ  ‚Ä¢ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         .text –≤ DRAM (65487 bytes)          ‚îÇ  ‚Üê –ö–æ–¥ –≤ DRAM
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ –§—É–Ω–∫—Ü–∏–∏ –±–µ–∑ IRAM_ATTR                    ‚îÇ
‚îÇ  ‚Ä¢ –ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–¥               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        Heap + Stack (~108 KB free)          ‚îÇ  ‚Üê –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ malloc/free allocations                  ‚îÇ
‚îÇ  ‚Ä¢ FreeRTOS task stacks:                    ‚îÇ
‚îÇ    - sensor_task:      4096 bytes           ‚îÇ
‚îÇ    - display_task:     2560 bytes           ‚îÇ
‚îÇ    - notification:     2048 bytes           ‚îÇ
‚îÇ    - data_logger:      3072 bytes           ‚îÇ
‚îÇ    - scheduler:        1536 bytes           ‚îÇ
‚îÇ    - ph_ec_task:       1536 bytes           ‚îÇ
‚îÇ    - encoder_task:     1536 bytes           ‚îÇ
‚îÇ    - LVGL timer:       ~4096 bytes          ‚îÇ
‚îÇ    - Idle tasks (x2):  ~2048 bytes          ‚îÇ
‚îÇ  ‚Ä¢ Heap —Ä–µ–∑–µ—Ä–≤: ~80 KB                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üíæ 2. –í–Ω–µ—à–Ω—è—è PSRAM (~2-8 MB)

–ú–µ–¥–ª–µ–Ω–Ω–∞—è, –Ω–æ –æ–±—ä–µ–º–Ω–∞—è –ø–∞–º—è—Ç—å –¥–ª—è –±–æ–ª—å—à–∏—Ö –±—É—Ñ–µ—Ä–æ–≤.

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PSRAM:

```ini
CONFIG_SPIRAM=y                                   # ‚úÖ –í–∫–ª—é—á–µ–Ω–æ
CONFIG_SPIRAM_MODE_OCT=y                          # 8-–±–∏—Ç–Ω–∞—è —à–∏–Ω–∞
CONFIG_SPIRAM_SPEED_80M=y                         # 80 MHz
CONFIG_SPIRAM_USE_MALLOC=y                        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö malloc
CONFIG_SPIRAM_ALLOW_BSS_SEG_EXTERNAL_MEMORY=y     # BSS –≤ PSRAM
CONFIG_SPIRAM_TRY_ALLOCATE_WIFI_LWIP=y            # WiFi –±—É—Ñ–µ—Ä—ã –≤ PSRAM
CONFIG_SPIRAM_MALLOC_RESERVE_INTERNAL=32768       # –†–µ–∑–µ—Ä–≤ 32 KB DRAM
CONFIG_SPIRAM_ALLOW_STACK_EXTERNAL_MEMORY=y       # –°—Ç–µ–∫–∏ –≤ PSRAM
```

### –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ PSRAM:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       Heap allocations (~2-8 MB)            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                             ‚îÇ
‚îÇ  –ö–†–ò–¢–ò–ß–ù–û: –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ PSRAM –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏: ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚Ä¢ LVGL –±—É—Ñ–µ—Ä—ã:                             ‚îÇ
‚îÇ    - disp_buf1: 28.8 KB  ‚Üê –û—Å–Ω–æ–≤–Ω–æ–π         ‚îÇ
‚îÇ    - disp_buf2: 28.8 KB  ‚Üê –î–≤–æ–π–Ω–∞—è –±—É—Ñ-—è    ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚Ä¢ WiFi –±—É—Ñ–µ—Ä—ã (—á–∞—Å—Ç–∏—á–Ω–æ):                  ‚îÇ
‚îÇ    - LWIP heap: ~5-10 KB                    ‚îÇ
‚îÇ    - RX/TX buffers: ~3-5 KB                 ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚Ä¢ –ë–æ–ª—å—à–∏–µ malloc (> 16 KB –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):  ‚îÇ
‚îÇ    - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –±—É—Ñ–µ—Ä—ã                       ‚îÇ
‚îÇ    - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–∞—Å—Å–∏–≤—ã                   ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚Ä¢ BSS —Å–µ–≥–º–µ–Ω—Ç (–µ—Å–ª–∏ –Ω–µ –≤–ª–µ–∑ –≤ DRAM):       ‚îÇ
‚îÇ    - –ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ      ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  –°–≤–æ–±–æ–¥–Ω–æ: ~1.8-7.8 MB (–¥–ª—è –±—É–¥—É—â–∏—Ö –Ω—É–∂–¥)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å PSRAM:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | SRAM | PSRAM (OCT 80MHz) | –†–∞–∑–Ω–∏—Ü–∞ |
|----------|------|-------------------|---------|
| **–°–∫–æ—Ä–æ—Å—Ç—å** | 240 MHz | 80 MHz | **3x –º–µ–¥–ª–µ–Ω–Ω–µ–µ** |
| **–ó–∞–¥–µ—Ä–∂–∫–∞** | 1 —Ü–∏–∫–ª | 4-8 —Ü–∏–∫–ª–æ–≤ | **4-8x –º–µ–¥–ª–µ–Ω–Ω–µ–µ** |
| **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** | ~960 MB/s | ~160 MB/s | **6x –º–µ–¥–ª–µ–Ω–Ω–µ–µ** |

**–í—ã–≤–æ–¥:** PSRAM –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (UI –±—É—Ñ–µ—Ä—ã, –∫—ç—à–∏), –Ω–æ –Ω–µ –¥–ª—è ISR –∏ WiFi –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –∫–æ–¥–∞.

---

## üìÄ 3. Flash –ø–∞–º—è—Ç—å (4 MB)

–í–Ω–µ—à–Ω—è—è —ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è –ø–∞–º—è—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—à–∏–≤–∫–∏ –∏ –¥–∞–Ω–Ω—ã—Ö.

### –¢–∞–±–ª–∏—Ü–∞ —Ä–∞–∑–¥–µ–ª–æ–≤ (partitions.csv):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Offset    ‚îÇ  Size      ‚îÇ  Name      ‚îÇ  Type/SubType ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  0x9000    ‚îÇ  24 KB     ‚îÇ  nvs       ‚îÇ  data/nvs     ‚îÇ  ‚Üê –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ  0xF000    ‚îÇ  4 KB      ‚îÇ  phy_init  ‚îÇ  data/phy     ‚îÇ  ‚Üê WiFi –∫–∞–ª–∏–±—Ä.
‚îÇ  0x10000   ‚îÇ  3.83 MB   ‚îÇ  factory   ‚îÇ  app/factory  ‚îÇ  ‚Üê –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–í—Å–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ: 3.91 MB
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ:   1.32 MB (34%)
–°–≤–æ–±–æ–¥–Ω–æ:       2.6 MB (66%)  ‚úÖ –û—Ç–ª–∏—á–Ω—ã–π –∑–∞–ø–∞—Å!
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Flash:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     .text (–∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã) ~540 KB           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                   ‚îÇ
‚îÇ  ‚Ä¢ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ (LVGL, FreeRTOS, ESP-IDF)     ‚îÇ
‚îÇ  ‚Ä¢ –î—Ä–∞–π–≤–µ—Ä—ã –¥–∞—Ç—á–∏–∫–æ–≤ –∏ –¥–∏—Å–ø–ª–µ—è              ‚îÇ
‚îÇ  ‚Ä¢ UI –∫–æ–¥ –∏ —ç–∫—Ä–∞–Ω—ã                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    .rodata (–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã) ~213 KB              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ –°—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã ("Hello", TAG)        ‚îÇ
‚îÇ  ‚Ä¢ const –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ                         ‚îÇ
‚îÇ  ‚Ä¢ Lookup —Ç–∞–±–ª–∏—Ü—ã                           ‚îÇ
‚îÇ  ‚Ä¢ –®—Ä–∏—Ñ—Ç—ã LVGL (montserrat_ru)              ‚îÇ
‚îÇ  ‚Ä¢ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       NVS (—ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ) 24 KB         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ WiFi credentials (SSID, password)        ‚îÇ
‚îÇ  ‚Ä¢ System config (PID –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)            ‚îÇ
‚îÇ  ‚Ä¢ Pump calibration –¥–∞–Ω–Ω—ã–µ                  ‚îÇ
‚îÇ  ‚Ä¢ User settings (—è—Ä–∫–æ—Å—Ç—å, —è–∑—ã–∫)            ‚îÇ
‚îÇ  ‚Ä¢ Scheduler tasks                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      PHY_INIT (WiFi –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞) 4 KB        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ WiFi RF –∫–∞–ª–∏–±—Ä–æ–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ             ‚îÇ
‚îÇ  ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º     ‚îÇ
‚îÇ    –∑–∞–ø—É—Å–∫–µ WiFi                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      –†–µ–∑–µ—Ä–≤ –¥–ª—è –±—É–¥—É—â–µ–≥–æ ~2.6 MB            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥                       ‚îÇ
‚îÇ  ‚Ä¢ –ù–æ–≤—ã–µ —ç–∫—Ä–∞–Ω—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏                   ‚îÇ
‚îÇ  ‚Ä¢ –ê—Å—Å–µ—Ç—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —à—Ä–∏—Ñ—Ç—ã)             ‚îÇ
‚îÇ  ‚Ä¢ –õ–æ–≥–∏ (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å SPIFFS)              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ 4. –†–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | DRAM (.bss) | Flash (.text) | Flash (.rodata) | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|-------------|---------------|-----------------|------------|
| **LVGL –±–∏–±–ª–∏–æ—Ç–µ–∫–∞** | ~0 KB | ~120 KB | ~44 KB | –ë—É—Ñ–µ—Ä—ã –≤ PSRAM ‚úÖ |
| **ESP-IDF WiFi** | ~10-15 KB | ~35 KB | ~12 KB | –ß–∞—Å—Ç–∏—á–Ω–æ –≤ PSRAM |
| **ESP-IDF System** | ~20 KB | ~100 KB | ~56 KB | –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ |
| **FreeRTOS** | ~20 KB | ~17 KB | ~11 KB | –Ø–¥—Ä–æ RTOS |
| **LVGL UI** | ~15 KB | ~48 KB | ~14 KB | –≠–∫—Ä–∞–Ω—ã –∏ –≤–∏–¥–∂–µ—Ç—ã |
| **Adaptive PID** | ~3-5 KB | ~20 KB | ~2 KB | –ò—Å—Ç–æ—Ä–∏—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è |
| **Pump Manager** | ~2-3 KB | ~14 KB | ~2 KB | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å–æ—Å–∞–º–∏ |
| **Sensor Manager** | ~1-2 KB | ~15 KB | ~1 KB | –ö—ç—à —Å–µ–Ω—Å–æ—Ä–æ–≤ |
| **–û—Å—Ç–∞–ª—å–Ω–æ–µ** | ~80 KB | ~185 KB | ~71 KB | –î—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |

---

## üéØ 5. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

### –ß—Ç–æ –ú–û–ñ–ù–û —Ö—Ä–∞–Ω–∏—Ç—å –≤ DRAM:

‚úÖ **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** (–±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø):
- WiFi driver buffers
- ISR –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- FreeRTOS —Å—Ç–µ–∫–∏
- –ú–∞–ª–µ–Ω—å–∫–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (<1 KB)
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –≥–æ—Ä—è—á–∏—Ö —Ü–∏–∫–ª–∞—Ö

### –ß—Ç–æ –ù–£–ñ–ù–û —Ö—Ä–∞–Ω–∏—Ç—å –≤ PSRAM:

‚úÖ **–ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –±–æ–ª—å—à–∏–µ –¥–∞–Ω–Ω—ã–µ**:
- LVGL –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –±—É—Ñ–µ—Ä—ã
- –ë–æ–ª—å—à–∏–µ –º–∞—Å—Å–∏–≤—ã (> 1 KB)
- –ö—ç—à–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –±—É—Ñ–µ—Ä—ã
- –ò—Å—Ç–æ—Ä–∏—è –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –±–æ–ª—å—à–∞—è)

### –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤–æ Flash:

‚úÖ **–¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ**:
- –í–µ—Å—å –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã (.text)
- –°—Ç—Ä–æ–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- const –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- Lookup —Ç–∞–±–ª–∏—Ü—ã
- –®—Ä–∏—Ñ—Ç—ã –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

## üìà 6. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ë–æ–ª—å—à–∏–µ –±—É—Ñ–µ—Ä—ã –≤ PSRAM

```c
// LVGL display buffers (lcd_ili9341.c)
static lv_color_t *disp_buf1 = NULL;
static lv_color_t *disp_buf2 = NULL;

void init() {
    size_t buf_size = LCD_H_RES * 60 * sizeof(lv_color_t);  // 28.8 KB
    
    // –í—ã–¥–µ–ª—è–µ–º –≤ PSRAM
    disp_buf1 = heap_caps_malloc(buf_size, MALLOC_CAP_SPIRAM | MALLOC_CAP_8BIT);
    disp_buf2 = heap_caps_malloc(buf_size, MALLOC_CAP_SPIRAM | MALLOC_CAP_8BIT);
    
    ESP_LOGI("LCD", "Buffers allocated in PSRAM: %d bytes each", buf_size);
}
```

**–í—ã–≥–æ–¥–∞:** –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ ~57 KB DRAM!

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ú–∞–ª–µ–Ω—å–∫–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ DRAM

```c
// sensor_manager.c
static sensor_data_t cached_data = {0};  // ~100 bytes
static sensor_stats_t stats[SENSOR_TYPE_COUNT] = {0};  // ~200 bytes
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø, –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–æ Flash

```c
// pump_manager.c
static const char* TAG = "PUMP";  // .rodata
static const int PUMP_PINS[PUMP_INDEX_COUNT] = {...};  // .rodata
```

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ, –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.

### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –û–≥—Ä–æ–º–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã –≤ DRAM

```c
// ‚ùå –ü–õ–û–•–û - —Å—ä–µ—Å—Ç –≤–µ—Å—å DRAM!
static uint8_t huge_buffer[100000];  // 100 KB –≤ .bss

// ‚úÖ –•–û–†–û–®–û - –∏—Å–ø–æ–ª—å–∑—É–µ–º PSRAM
static uint8_t *huge_buffer = NULL;
void init() {
    huge_buffer = heap_caps_malloc(100000, MALLOC_CAP_SPIRAM);
}
```

---

## üîç 7. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–∞–º—è—Ç–∏

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
idf.py size

# –ü–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
idf.py size-components

# –ù–∞–π—Ç–∏ –±–æ–ª—å—à–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
xtensa-esp32s3-elf-nm -S --size-sort build/hydroponics.elf | grep " [bBdD] "

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å heap –≤ runtime
ESP_LOGI("MEM", "Free DRAM: %d", heap_caps_get_free_size(MALLOC_CAP_INTERNAL));
ESP_LOGI("MEM", "Free PSRAM: %d", heap_caps_get_free_size(MALLOC_CAP_SPIRAM));
```

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

```
DIRAM: 230767 / 341760 bytes (67.52%)
  .bss:   149512 bytes  ‚Üê –ï—Å–ª–∏ > 200 KB - –ø—Ä–æ–±–ª–µ–º–∞!
  .data:   15768 bytes  ‚Üê –û–±—ã—á–Ω–æ 10-20 KB
  .text:   65487 bytes  ‚Üê –ö–æ–¥ –≤ DRAM
```

**–ü—Ä–∞–≤–∏–ª–æ –±–æ–ª—å—à–æ–≥–æ –ø–∞–ª—å—Ü–∞:**
- ‚úÖ DRAM < 80% - –æ—Ç–ª–∏—á–Ω–æ
- ‚ö†Ô∏è DRAM 80-90% - –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ
- ‚ùå DRAM > 90% - –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

---

## üìä 8. –ò—Ç–æ–≥–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë              ESP32-S3 Memory Map                      ‚ïë
‚ïë                  Hydro 1.0 Project                    ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë                                                       ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚ïë
‚ïë  ‚îÇ   FAST SRAM (Internal) - ~512 KB            ‚îÇ     ‚ïë
‚ïë  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚ïë
‚ïë  ‚îÇ  IRAM:  16 KB / 16 KB (100%) ‚úÖ             ‚îÇ     ‚ïë
‚ïë  ‚îÇ  DRAM: 230 KB / 328 KB (67.5%) ‚úÖ           ‚îÇ     ‚ïë
‚ïë  ‚îÇ  Cache: 64 KB                               ‚îÇ     ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚ïë
‚ïë                       ‚Üï                               ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚ïë
‚ïë  ‚îÇ   SLOW PSRAM (External) - 2-8 MB            ‚îÇ     ‚ïë
‚ïë  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚ïë
‚ïë  ‚îÇ  LVGL buffers:     ~57 KB                   ‚îÇ     ‚ïë
‚ïë  ‚îÇ  WiFi buffers:     ~10 KB                   ‚îÇ     ‚ïë
‚ïë  ‚îÇ  BSS overflow:     ~10-20 KB                ‚îÇ     ‚ïë
‚ïë  ‚îÇ  Free:             ~1.8-7.8 MB ‚úÖ           ‚îÇ     ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚ïë
‚ïë                       ‚Üï                               ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚ïë
‚ïë  ‚îÇ   FLASH (External) - 4 MB                   ‚îÇ     ‚ïë
‚ïë  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚ïë
‚ïë  ‚îÇ  Bootloader:       ~24 KB                   ‚îÇ     ‚ïë
‚ïë  ‚îÇ  Partition table:  ~4 KB                    ‚îÇ     ‚ïë
‚ïë  ‚îÇ  NVS:              24 KB                    ‚îÇ     ‚ïë
‚ïë  ‚îÇ  PHY_INIT:         4 KB                     ‚îÇ     ‚ïë
‚ïë  ‚îÇ  Application:      1.32 MB / 3.83 MB (34%) ‚îÇ     ‚ïë
‚ïë  ‚îÇ  Free:             2.6 MB ‚úÖ                ‚îÇ     ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚ïë
‚ïë                                                       ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

## üí° 9. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

1. **–ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –±–æ–ª—å—à–æ–≥–æ –º–∞—Å—Å–∏–≤–∞:**
   ```bash
   idf.py size  # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ heap_caps_malloc –¥–ª—è –±–æ–ª—å—à–∏—Ö –±—É—Ñ–µ—Ä–æ–≤:**
   ```c
   // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç PSRAM –¥–ª—è –±–æ–ª—å—à–∏—Ö –≤—ã–¥–µ–ª–µ–Ω–∏–π
   void *buf = heap_caps_malloc(size, MALLOC_CAP_DEFAULT);
   
   // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤ PSRAM
   void *buf = heap_caps_malloc(size, MALLOC_CAP_SPIRAM);
   
   // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤ DRAM (–¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
   void *buf = heap_caps_malloc(size, MALLOC_CAP_INTERNAL);
   ```

3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ heap:**
   ```c
   ESP_LOGI(TAG, "DRAM free: %d", heap_caps_get_free_size(MALLOC_CAP_INTERNAL));
   ESP_LOGI(TAG, "PSRAM free: %d", heap_caps_get_free_size(MALLOC_CAP_SPIRAM));
   ```

### –ï—Å–ª–∏ DRAM overflow:

1. **–ù–∞–π–¥–∏—Ç–µ –≤–∏–Ω–æ–≤–Ω–∏–∫–∞:**
   ```bash
   xtensa-esp32s3-elf-nm -S --size-sort build/hydroponics.elf | grep " [bBdD] " | tail -20
   ```

2. **–ü–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ –±–æ–ª—å—à–∏–µ –º–∞—Å—Å–∏–≤—ã –≤ PSRAM**
3. **–£–º–µ–Ω—å—à–∏—Ç–µ —Å—Ç–µ–∫–∏ –∑–∞–¥–∞—á** (—Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é!)
4. **–û—Ç–∫–ª—é—á–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –≤ `sdkconfig`

### –ï—Å–ª–∏ Flash overflow:

1. **–û—Ç–∫–ª—é—á–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ LVGL:**
   ```ini
   # sdkconfig
   CONFIG_LV_USE_SNAPSHOT=n
   CONFIG_LV_USE_MONKEY=n
   ```

2. **–£–º–µ–Ω—å—à–∏—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   ```ini
   CONFIG_LOG_DEFAULT_LEVEL_INFO=y  # –≤–º–µ—Å—Ç–æ DEBUG
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø–æ —Ä–∞–∑–º–µ—Ä—É:**
   ```ini
   CONFIG_COMPILER_OPTIMIZATION_SIZE=y  # –≤–º–µ—Å—Ç–æ PERFORMANCE
   ```

---

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|----------|----------|--------|
| **DRAM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ** | 230 KB / 328 KB (67.5%) | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **DRAM —Å–≤–æ–±–æ–¥–Ω–æ** | 108 KB | ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ |
| **PSRAM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ** | ~100 KB / 2-8 MB | ‚úÖ –ú–Ω–æ–≥–æ –º–µ—Å—Ç–∞ |
| **Flash –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ** | 1.32 MB / 3.83 MB (34%) | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **WiFi —Å—Ç–∞—Ç—É—Å** | –í–∫–ª—é—á–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ |
| **UI —Å—Ç–∞—Ç—É—Å** | –ü–ª–∞–≤–Ω—ã–π, –æ—Ç–∑—ã–≤—á–∏–≤—ã–π | ‚úÖ |
| **–°–±–æ—Ä–∫–∞** | –ë–µ–∑ –æ—à–∏–±–æ–∫ | ‚úÖ |

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å WiFi!

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** 2025-10-16  
**–í–µ—Ä—Å–∏—è:** Hydro 1.0 v3.0.0-advanced

