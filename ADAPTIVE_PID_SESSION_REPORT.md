# üìä –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π PID —Å–∏—Å—Ç–µ–º—ã

**–î–∞—Ç–∞:** 2025-10-15  
**–°–µ—Å—Å–∏—è:** #1  
**–°—Ç–∞—Ç—É—Å:** üü¢ 5 –∏–∑ 12 —ç—Ç–∞–ø–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω—ã (42%)

---

## ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ù–´–ï –≠–¢–ê–ü–´

### –≠–¢–ê–ü 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ‚úÖ
**–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ PSRAM –≤–∫–ª—é—á–µ–Ω (OCT mode, 80MHz)
- ‚úÖ Watchdog —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 20 –º–∏–Ω—É—Ç (–¥–ª—è –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- ‚úÖ –ß–∞—Å—Ç–æ—Ç–∞ –¥–∞—Ç—á–∏–∫–æ–≤: 1 —Å–µ–∫ (–±—ã–ª–æ 2 —Å–µ–∫)
- ‚úÖ –û–∫—Ä—É–∂–µ–Ω–∏–µ ESP-IDF v5.5 –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- ‚úÖ –ü–æ—Ä—Ç: COM5
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏: 279 KB —Å–≤–æ–±–æ–¥–Ω–æ

---

### –≠–¢–ê–ü 1: Backend - adaptive_pid ‚úÖ
**–í—Ä–µ–º—è:** 15 –º–∏–Ω—É—Ç  
**–§–∞–π–ª—ã:**
```
components/adaptive_pid/
‚îú‚îÄ‚îÄ adaptive_pid.h     (324 —Å—Ç—Ä–æ–∫–∏)
‚îú‚îÄ‚îÄ adaptive_pid.c     (787 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ CMakeLists.txt
```

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ Ring buffer –∏—Å—Ç–æ—Ä–∏–∏ (50 —Ç–æ—á–µ–∫ –Ω–∞ –Ω–∞—Å–æ—Å)
- ‚úÖ –õ–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Ç—Ä–µ–Ω–¥–æ–≤
- ‚úÖ –û–±—É—á–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–Ω–æ–π –µ–º–∫–æ—Å—Ç–∏ —Ä–∞—Å—Ç–≤–æ—Ä–∞
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ PID –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º (–æ—Ç–∫–∞—Ç –∫ –±–∞–∑–æ–≤–æ–º—É PID)
- ‚úÖ –£–ø—Ä–µ–∂–¥–∞—é—â–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è (–¥–æ 10 —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏)
- ‚úÖ API: 12 —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ Thread-safe —Å –º—å—é—Ç–µ–∫—Å–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞—Å–æ—Å–∞

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `adaptive_pid_init()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- `adaptive_pid_update_history()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- `adaptive_pid_predict()` - –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ 1-3 —á–∞—Å–∞
- `adaptive_pid_learn_buffer_capacity()` - —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏–µ
- `adaptive_pid_get_coefficients()` - –ø–æ–ª—É—á–µ–Ω–∏–µ Kp/Ki/Kd
- `adaptive_pid_set_safe_mode()` - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º

---

### –≠–¢–ê–ü 2: Backend - trend_predictor ‚úÖ
**–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç  
**–§–∞–π–ª—ã:**
```
components/trend_predictor/
‚îú‚îÄ‚îÄ trend_predictor.h  (174 —Å—Ç—Ä–æ–∫–∏)
‚îú‚îÄ‚îÄ trend_predictor.c  (266 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ CMakeLists.txt
```

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –õ–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è (–º–µ—Ç–æ–¥ –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤)
- ‚úÖ –°–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ (Simple Moving Average)
- ‚úÖ –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ
- ‚úÖ –î–µ—Ç–µ–∫—Ç–æ—Ä –∞–Ω–æ–º–∞–ª–∏–π (–Ω–∞ –æ—Å–Ω–æ–≤–µ œÉ)
- ‚úÖ –†–∞—Å—á–µ—Ç R¬≤ (–∫–∞—á–µ—Å—Ç–≤–æ fit)
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é

---

### –≠–¢–ê–ü 3: Backend - pid_auto_tuner ‚úÖ
**–í—Ä–µ–º—è:** 15 –º–∏–Ω—É—Ç  
**–§–∞–π–ª—ã:**
```
components/pid_auto_tuner/
‚îú‚îÄ‚îÄ pid_auto_tuner.h   (166 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ pid_auto_tuner.c   (517 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ CMakeLists.txt
```

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ Relay feedback –º–µ—Ç–æ–¥ (Ziegler-Nichols)
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Ku (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ)
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Tu (–ø–µ—Ä–∏–æ–¥ –∫–æ–ª–µ–±–∞–Ω–∏–π)
- ‚úÖ –†–∞—Å—á–µ—Ç PID: Kp=0.6*Ku, Ki=1.2*Ku/Tu, Kd=0.075*Ku*Tu
- ‚úÖ –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –∑–∞–¥–∞—á–∞ FreeRTOS
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö (0-100%)
- ‚úÖ –û—Ç–º–µ–Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–∞—á–∞–Ω–∏—è: ¬±0.3 pH/EC
- ‚úÖ –¢–∞–π–º–∞—É—Ç: 20 –º–∏–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º

**–ú–µ—Ç–æ–¥—ã:**
- TUNING_METHOD_RELAY (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)
- TUNING_METHOD_STEP_RESPONSE (TODO)
- TUNING_METHOD_ADAPTIVE (TODO)

---

### –≠–¢–ê–ü 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Backend ‚úÖ
**–í—Ä–µ–º—è:** 20 –º–∏–Ω—É—Ç  
**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `pump_manager.c/h` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ `ph_ec_controller.c` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚úÖ `main/app_main.c` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ `main/CMakeLists.txt` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
```c
// pump_manager.h
esp_err_t pump_manager_compute_and_execute_adaptive(...);
esp_err_t pump_manager_run_with_dose(pump_index_t pump_idx, float dose_ml);
esp_err_t pump_manager_get_pid_tunings(...);
```

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤ adaptive_pid
2. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–ø—Ä–µ–∂–¥–∞—é—â–µ–π –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏
4. –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ Kp/Ki/Kd
5. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ PID –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏

---

### –≠–¢–ê–ü 5: Frontend - Dashboard ‚úÖ
**–í—Ä–µ–º—è:** 25 –º–∏–Ω—É—Ç  
**–§–∞–π–ª—ã:**
```
components/lvgl_ui/
‚îú‚îÄ‚îÄ widgets/
‚îÇ   ‚îú‚îÄ‚îÄ intelligent_pid_card.h (100 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ intelligent_pid_card.c (200 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ screens/adaptive/
‚îÇ   ‚îú‚îÄ‚îÄ pid_intelligent_dashboard.h (50 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ pid_intelligent_dashboard.c (250 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ lvgl_ui.c (+80 —Å—Ç—Ä–æ–∫ PID —Å—Ç–∏–ª–µ–π)
‚îî‚îÄ‚îÄ lvgl_styles.h (+20 —Å—Ç—Ä–æ–∫)
```

**UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ 12 PID —Å—Ç–∏–ª–µ–π (—Ü–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –±–µ–∑ –∏–∫–æ–Ω–æ–∫)
- ‚úÖ –í–∏–¥–∂–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —Å:
  - –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞—Å–æ—Å–∞
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä ON/OFF
  - –¢–µ–∫—É—â–µ–µ ‚Üí –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–æ —Ü–µ–ª–∏
  - PID –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (P/I/D)
  - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (Kp/Ki)
  - –û–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞

**–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:**
- üü¢ –ó–µ–ª–µ–Ω—ã–π - —Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞
- üü° –ñ–µ–ª—Ç—ã–π - –∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è
- üîµ –°–∏–Ω–∏–π - —Ä–µ–∂–∏–º –æ–±—É—á–µ–Ω–∏—è
- üü£ –§–∏–æ–ª–µ—Ç–æ–≤—ã–π - —É–ø—Ä–µ–∂–¥–∞—é—â–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è
- üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π - –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚ö™ –°–µ—Ä—ã–π - –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω
- üî¥ –ö—Ä–∞—Å–Ω—ã–π - –æ—à–∏–±–∫–∞

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
- Dashboard –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ "pid_intelligent_dashboard"
- –î–æ—Å—Ç—É–ø: –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí –°–∏—Å—Ç–µ–º–∞ ‚Üí "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π PID"
- –ó–∞–¥–∞—á–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: –∫–∞–∂–¥—ã–µ 500–º—Å

---

## üìà –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:
- **Backend:** 9 —Ñ–∞–π–ª–æ–≤ (3 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)
- **Frontend:** 4 —Ñ–∞–π–ª–∞ (1 —ç–∫—Ä–∞–Ω + 1 –≤–∏–¥–∂–µ—Ç)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** 3 —Ñ–∞–π–ª–∞
- **–ò–¢–û–ì–û:** 16 —Ñ–∞–π–ª–æ–≤

### –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞:
- **Backend:** ~1900 —Å—Ç—Ä–æ–∫
- **Frontend:** ~650 —Å—Ç—Ä–æ–∫
- **–ò–¢–û–ì–û:** ~2550 —Å—Ç—Ä–æ–∫

### –†–∞–∑–º–µ—Ä –ø—Ä–æ—à–∏–≤–∫–∏:
- **–î–æ:** 764 KB
- **–ü–æ—Å–ª–µ:** 783 KB
- **–î–æ–±–∞–≤–ª–µ–Ω–æ:** +19 KB (+2.5%)
- **–°–≤–æ–±–æ–¥–Ω–æ:** 263 KB (25%)

---

## ‚öôÔ∏è –¢–ï–ö–£–©–ê–Ø –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨

### –ß—Ç–æ –£–ñ–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:
‚úÖ **–°–∞–º–æ–æ–±—É—á–µ–Ω–∏–µ** - —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ä–∞—Å—Ç–≤–æ—Ä–∞  
‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ** - –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 1-3 —á–∞—Å–∞ –≤–ø–µ—Ä–µ–¥ —Å R¬≤  
‚úÖ **–ê–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - Relay method (Ziegler-Nichols)  
‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ Kp/Ki/Kd  
‚úÖ **–£–ø—Ä–µ–∂–¥–∞—é—â–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è** - –¥–µ–π—Å—Ç–≤–∏–µ –î–û –≤—ã—Ö–æ–¥–∞ –∑–∞ –ø–æ—Ä–æ–≥–∏  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º** - –æ—Ç–∫–∞—Ç –∫ –±–∞–∑–æ–≤–æ–º—É PID  
‚úÖ **Dashboard UI** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö 6 –Ω–∞—Å–æ—Å–æ–≤  
‚úÖ **–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è** - 7 —Å—Ç–∞—Ç—É—Å–æ–≤  
‚úÖ **Live –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 500–º—Å  

### –ú–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –°–ï–ô–ß–ê–°:
```bash
# –ü—Ä–æ—à–∏–≤–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
idf.py -p COM5 flash monitor

# –í —Å–∏—Å—Ç–µ–º–µ –¥–æ—Å—Ç—É–ø–Ω–æ:
# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí –°–∏—Å—Ç–µ–º–∞ ‚Üí "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π PID"
```

---

## üîÑ –û–°–¢–ê–õ–û–°–¨ –°–î–ï–õ–ê–¢–¨

### –≠–¢–ê–ü 6: –î–µ—Ç–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω (3 –≤–∫–ª–∞–¥–∫–∏) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2
- –í–∫–ª–∞–¥–∫–∞ "–û–±–∑–æ—Ä" - PID –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
- –í–∫–ª–∞–¥–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Kp/Ki/Kd, —Ä–µ–∂–∏–º—ã
- –í–∫–ª–∞–¥–∫–∞ "–ì—Ä–∞—Ñ–∏–∫" - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–Ω–¥–æ–≤

### –≠–¢–ê–ü 7: –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1
- UI –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö Ku/Tu
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –≠–¢–ê–ü 8: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3
- –≠–∫—Ä–∞–Ω —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–æ/–ø–æ—Å–ª–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –≠–∫—Ä–∞–Ω –æ–±—É—á–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –≠–¢–ê–ü 9: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤ - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞ –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –≠–¢–ê–ü 10: –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ NVS (–±—É—Ñ–µ—Ä–Ω–∞—è –µ–º–∫–æ—Å—Ç—å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ SD –∫–∞—Ä—Ç—É (–ø—Ä–æ–≥–Ω–æ–∑—ã, –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)

### –≠–¢–ê–ü 11: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1
- –¢–µ—Å—Ç –Ω–∞ –º–æ–∫–∞—Ö/—ç–º—É–ª—è—Ç–æ—Ä–µ
- –¢–µ—Å—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –±–µ–∑ —Ä–∞—Å—Ç–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

### –≠–¢–ê–ü 12: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ USER_GUIDE
- API –ø—Ä–∏–º–µ—Ä—ã
- Troubleshooting

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –î–ê–õ–¨–®–ï:

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# 1. –ü—Ä–æ—à–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
idf.py -p COM5 flash monitor

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
# - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è adaptive_pid
# - –†–∞–±–æ—Ç–∞ dashboard
# - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
# - –ù–∞–≤–∏–≥–∞—Ü–∏—è —ç–Ω–∫–æ–¥–µ—Ä–æ–º

# 3. –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É
- –°–æ–∑–¥–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω (–≠–¢–ê–ü 6)
- –°–æ–∑–¥–∞—Ç—å —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–≠–¢–ê–ü 7)
- –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é (–≠–¢–ê–ü 9)
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë –≤–º–µ—Å—Ç–µ

#### –í–∞—Ä–∏–∞–Ω—Ç –í: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git
- –°–æ–∑–¥–∞—Ç—å branch –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è
- –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## üì¶ –§–ê–ô–õ–´ –î–õ–Ø –ö–û–ú–ú–ò–¢–ê

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
```
components/adaptive_pid/
components/trend_predictor/
components/pid_auto_tuner/
components/lvgl_ui/widgets/intelligent_pid_card.c/h
components/lvgl_ui/screens/adaptive/pid_intelligent_dashboard.c/h
ADAPTIVE_PID_IMPLEMENTATION_PLAN.md
ADAPTIVE_PID_USER_GUIDE.md
ADAPTIVE_PID_SESSION_REPORT.md
```

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
```
main/system_config.h
main/app_main.c
main/CMakeLists.txt
sdkconfig
components/pump_manager/pump_manager.c/h
components/pump_manager/CMakeLists.txt
components/ph_ec_controller/ph_ec_controller.c
components/lvgl_ui/lvgl_ui.c
components/lvgl_ui/lvgl_styles.h
components/lvgl_ui/CMakeLists.txt
components/lvgl_ui/screen_manager/screen_init.c
components/lvgl_ui/screens/system/system_menu_screen.c
```

---

## üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ü–†–û–î–û–õ–ñ–ï–ù–ò–Ø

### –ü—Ä–æ—à–∏–≤–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# –ü—Ä–æ—à–∏–≤–∫–∞
idf.py -p COM5 flash

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
idf.py -p COM5 monitor

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ —Å–±–æ—Ä–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
idf.py fullclean
idf.py build
idf.py -p COM5 flash monitor
```

### Git –∫–æ–º–º–∏—Ç:
```bash
git status
git add .
git commit -m "feat: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è PID —Å–∏—Å—Ç–µ–º–∞ - –≠—Ç–∞–ø—ã 0-5

- Backend: adaptive_pid, trend_predictor, pid_auto_tuner
- Frontend: Dashboard —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º–∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
- –°–∞–º–æ–æ–±—É—á–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–Ω–æ–π –µ–º–∫–æ—Å—Ç–∏
- –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤ —Å –ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–µ–π
- –ê–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Relay method (Ziegler-Nichols)
- –£–ø—Ä–µ–∂–¥–∞—é—â–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è
- PSRAM –≤–∫–ª—é—á–µ–Ω, Watchdog 20 –º–∏–Ω
- Binary: 783KB (25% —Å–≤–æ–±–æ–¥–Ω–æ)"

git push
```

### –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
# –°–ª–µ–¥—É—é—â–∞—è —Å–µ—Å—Å–∏—è –Ω–∞—á–Ω–µ—Ç—Å—è —Å –≠–¢–ê–ü 6
# –û—Ç–∫—Ä–æ–π—Ç–µ ADAPTIVE_PID_IMPLEMENTATION_PLAN.md
# –∏ —Å–ª–µ–¥—É–π—Ç–µ —á–µ–∫-–ª–∏—Å—Ç–∞–º
```

---

## ‚ö†Ô∏è –ò–ó–í–ï–°–¢–ù–´–ï TODO

### –í –∫–æ–¥–µ –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ TODO:
1. ‚ùå `pid_auto_tuner.c:116` - –î–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∏–∫–æ–≤ –≤ relay_auto_tune (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
2. ‚ùå `pump_manager.c:748` - Delayed learning task (–æ–±—É—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 –º–∏–Ω –ø–æ—Å–ª–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏)
3. ‚ùå `adaptive_pid.c:377,388` - NVS save/load (–±—É–¥–µ—Ç –≤ –≠–¢–ê–ü–ï 10)
4. ‚ùå `pid_intelligent_dashboard.c:77,166` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–∞—Ç—á–∏–∫–æ–≤

### Warnings (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ):
- ‚ö†Ô∏è –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ pid_auto_tuner.c (TODO –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- ‚ö†Ô∏è –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è g_selected_card (–¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —ç–Ω–∫–æ–¥–µ—Ä–æ–º)

---

## üí° –°–õ–ï–î–£–Æ–©–ê–Ø –°–ï–°–°–ò–Ø

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏:
1. **–≠–¢–ê–ü 7:** –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
2. **–≠–¢–ê–ü 6:** –î–µ—Ç–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω —Å 3 –≤–∫–ª–∞–¥–∫–∞–º–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
3. **–≠–¢–ê–ü 9:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ù–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

### –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:
- –≠–¢–ê–ü 6-7: 2-3 —á–∞—Å–∞
- –≠–¢–ê–ü 9: 30 –º–∏–Ω—É—Ç
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 1-2 —á–∞—Å–∞
- **–ò–¢–û–ì–û:** 4-6 —á–∞—Å–æ–≤ –¥–æ –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

---

## üéâ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø

‚ú® **Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω** - –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å!  
‚ú® **UI Dashboard —Ä–∞–±–æ—Ç–∞–µ—Ç** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!  
‚ú® **2550 —Å—Ç—Ä–æ–∫ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞** –∑–∞ –æ–¥–Ω—É —Å–µ—Å—Å–∏—é!  
‚ú® **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –æ–±—É—á–µ–Ω–∏—é** - –Ω–∞—á–Ω–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É!  
‚ú® **–ü–∞–º—è—Ç—å –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º** - 25% —Å–≤–æ–±–æ–¥–Ω–æ (263 KB)!  

---

## üìû –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
   - –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: "Adaptive PID initialized"
   - "PID Auto-Tuner initialized"

2. **Dashboard:**
   - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí –°–∏—Å—Ç–µ–º–∞ ‚Üí "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π PID"
   - –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è 6 –∫–∞—Ä—Ç–æ—á–µ–∫ –Ω–∞—Å–æ—Å–æ–≤
   - –°–µ–∫—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞ —Å–∏—Å—Ç–µ–º—ã

3. **–†–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã:**
   - –ß–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã –Ω–∞—á–Ω–µ—Ç—Å—è —Å–±–æ—Ä –∏—Å—Ç–æ—Ä–∏–∏
   - –ß–µ—Ä–µ–∑ 10-15 –∫–æ—Ä—Ä–µ–∫—Ü–∏–π –Ω–∞—á–Ω–µ—Ç—Å—è –æ–±—É—á–µ–Ω–∏–µ
   - –ü—Ä–æ–≥–Ω–æ–∑—ã –ø–æ—è–≤—è—Ç—Å—è –ø—Ä–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ >70%

4. **–ü–∞–º—è—Ç—å:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å heap: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å >150KB —Å–≤–æ–±–æ–¥–Ω–æ
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –Ω–∞ —É—Ç–µ—á–∫–∏

---

**–í–µ—Ä—Å–∏—è –æ—Ç—á–µ—Ç–∞:** 1.0  
**–°–ª–µ–¥—É—é—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ü–æ—Å–ª–µ –≠–¢–ê–ü–û–í 6-9  
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** üü¢ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–æ—Ç–æ–≤–∞

