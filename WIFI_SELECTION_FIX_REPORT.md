# üîß –û—Ç—á–µ—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ WiFi —Å–µ—Ç–µ–π —ç–Ω–∫–æ–¥–µ—Ä–æ–º

**–î–∞—Ç–∞:** 16 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—É—é WiFi —Å–µ—Ç—å —ç–Ω–∫–æ–¥–µ—Ä–æ–º  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ —Å–æ–±—Ä–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è WiFi —Å–µ—Ç–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Å–µ—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞ —Å –ø–æ–º–æ—â—å—é —ç–Ω–∫–æ–¥–µ—Ä–∞ (rotary encoder). –ö–Ω–æ–ø–∫–∏ —Å–µ—Ç–µ–π –Ω–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ —ç–Ω–∫–æ–¥–µ—Ä–∞.

---

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

–í LVGL 9.2 —ç–Ω–∫–æ–¥–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ `LV_EVENT_KEY` —Å –∫–ª—é—á–æ–º `LV_KEY_ENTER` –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏.

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–¥–µ:**
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `on_network_select()` —Å–ª—É—à–∞–ª —Ç–æ–ª—å–∫–æ `LV_EVENT_CLICKED` –∏ `LV_EVENT_PRESSED`
- –°–æ–±—ã—Ç–∏–µ `LV_EVENT_KEY` (–Ω–∞–∂–∞—Ç–∏–µ —ç–Ω–∫–æ–¥–µ—Ä–∞) –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ—Å—å
- –ö–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –≤ encoder group, –Ω–æ –Ω–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª–∏ –Ω–∞ Enter

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ —Å–µ—Ç–∏

**–§–∞–π–ª:** `components/lvgl_ui/screens/system/wifi_settings_screen.c`

**–ë—ã–ª–æ:**
```c
static void on_network_select(lv_event_t *e)
{
    lv_event_code_t code = lv_event_get_code(e);
    if (code != LV_EVENT_CLICKED && code != LV_EVENT_PRESSED) return;
    // ...
}
```

**–°—Ç–∞–ª–æ:**
```c
static void on_network_select(lv_event_t *e)
{
    lv_event_code_t code = lv_event_get_code(e);
    
    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–ª–∏–∫ –º—ã—à–∏, –Ω–∞–∂–∞—Ç–∏–µ –∏ –∫–ª–∞–≤–∏—à—É —ç–Ω–∫–æ–¥–µ—Ä–∞
    if (code == LV_EVENT_KEY) {
        uint32_t key = lv_event_get_key(e);
        if (key != LV_KEY_ENTER) return;  // –¢–æ–ª—å–∫–æ Enter (–Ω–∞–∂–∞—Ç–∏–µ —ç–Ω–∫–æ–¥–µ—Ä–∞)
    } else if (code != LV_EVENT_CLICKED && code != LV_EVENT_PRESSED) {
        return;
    }
    
    // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Å–µ—Ç–∏
}
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è KEY –∫ –∫–Ω–æ–ø–∫–∞–º

**–í —Ñ—É–Ω–∫—Ü–∏–∏ `wifi_scan_task()` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–Ω–æ–ø–æ–∫:**

**–ë—ã–ª–æ:**
```c
widget_add_click_handler(btn, on_network_select, (void*)(intptr_t)idx);
```

**–°—Ç–∞–ª–æ:**
```c
widget_add_click_handler(btn, on_network_select, (void*)(intptr_t)idx);
// –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–ª–∞–≤–∏—à–∏ —ç–Ω–∫–æ–¥–µ—Ä–∞
lv_obj_add_event_cb(btn, on_network_select, LV_EVENT_KEY, (void*)(intptr_t)idx);
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤—É—é —Å–µ—Ç—å –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

–î–æ–±–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–∞ –Ω–∞ –ø–µ—Ä–≤—É—é —Å–µ—Ç—å –≤ —Å–ø–∏—Å–∫–µ:

```c
// –ù–û–í–û–ï: –§–æ–∫—É—Å–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é —Å–µ—Ç—å –≤ —Å–ø–∏—Å–∫–µ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
lv_lock();
if (g_network_list) {
    lv_obj_t *first_btn = lv_obj_get_child(g_network_list, 0);
    if (first_btn) {
        lv_group_t *group = lv_group_get_default();
        if (group) {
            lv_group_focus_obj(first_btn);
            ESP_LOGI(TAG, "Focused first network in list");
        }
    }
}
lv_unlock();
```

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å

### UX Flow:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "Scan Networks"**
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ü–æ—è–≤–ª—è–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Å–µ—Ç–µ–π

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å** ‚≠ê
   - –§–æ–∫—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –ø–µ—Ä–≤—É—é —Å–µ—Ç—å
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–µ –Ω—É–∂–Ω–æ –∫—Ä—É—Ç–∏—Ç—å —ç–Ω–∫–æ–¥–µ—Ä –¥–æ —Å–ø–∏—Å–∫–∞

3. **–í—ã–±–æ—Ä —Å–µ—Ç–∏**
   - –ö—Ä—É—Ç–∏—Ç —ç–Ω–∫–æ–¥–µ—Ä –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ ‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç —Å–µ—Ç—å
   - –ù–∞–∂–∏–º–∞–µ—Ç —ç–Ω–∫–æ–¥–µ—Ä ‚Üí —Å–µ—Ç—å –≤—ã–±—Ä–∞–Ω–∞ ‚úÖ

4. **–ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–∞—Ä–æ–ª—å** (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
   - –ü–æ–ª–µ –ø–∞—Ä–æ–ª—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è
   - –§–æ–∫—É—Å —Å—Ä–∞–∑—É –Ω–∞ –ø–æ–ª–µ –ø–∞—Ä–æ–ª—è
   - –í–≤–æ–¥–∏—Ç –ø–∞—Ä–æ–ª—å –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–±–æ—Ä–∫–∏

```
‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞
   –í–µ—Ä—Å–∏—è: 151a461
   –†–∞–∑–º–µ—Ä: 0x149de0 bytes (1,351,136 bytes)
   –°–≤–æ–±–æ–¥–Ω–æ: 66% (2,613,792 bytes)
   –û—à–∏–±–æ–∫: 0
   –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π: 14 (kconfig - –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
```

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `components/lvgl_ui/screens/system/wifi_settings_screen.c`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `LV_EVENT_KEY` –≤ `on_network_select()`
   - –î–æ–±–∞–≤–ª–µ–Ω `lv_obj_add_event_cb()` –¥–ª—è —Å–æ–±—ã—Ç–∏—è KEY
   - –î–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤—É—é —Å–µ—Ç—å –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üéØ –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ WiFi:**
   - –ù–∞–∂–∞—Ç—å "Scan Networks"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Å–µ—Ç–µ–π
   - ‚úÖ –§–æ–∫—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –ø–µ—Ä–≤–æ–π —Å–µ—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

2. **–í—ã–±–æ—Ä —Å–µ—Ç–∏ —ç–Ω–∫–æ–¥–µ—Ä–æ–º:**
   - –ö—Ä—É—Ç–∏—Ç—å —ç–Ω–∫–æ–¥–µ—Ä –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑
   - ‚úÖ –î–æ–ª–∂–Ω–∞ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å—Å—è —Ç–µ–∫—É—â–∞—è —Å–µ—Ç—å
   - –ù–∞–∂–∞—Ç—å —ç–Ω–∫–æ–¥–µ—Ä
   - ‚úÖ –°–µ—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω–∞ (–ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω–∏–º)
   - ‚úÖ –ü–æ–ª–µ –ø–∞—Ä–æ–ª—è –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è
   - ‚úÖ –§–æ–∫—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –ø–æ–ª–µ –ø–∞—Ä–æ–ª—è

3. **–í–≤–æ–¥ –ø–∞—Ä–æ–ª—è –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
   - –ö—Ä—É—Ç–∏—Ç—å —ç–Ω–∫–æ–¥–µ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–∏–º–≤–æ–ª–æ–≤
   - –ù–∞–∂–∞—Ç—å –¥–ª—è –≤–≤–æ–¥–∞
   - –í—ã–±—Ä–∞—Ç—å "Connect"
   - –ù–∞–∂–∞—Ç—å —ç–Ω–∫–æ–¥–µ—Ä
   - ‚úÖ –î–æ–ª–∂–Ω–æ –Ω–∞—á–∞—Ç—å—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- ‚ùå COM5 –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º - —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—Ä—É—á–Ω—É—é –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è LVGL 9.2 –¥–ª—è —ç–Ω–∫–æ–¥–µ—Ä–∞:

- `LV_EVENT_KEY` - –Ω–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à–∏ (Enter, Escape, –∏ —Ç.–¥.)
  - `LV_KEY_ENTER` - –Ω–∞–∂–∞—Ç–∏–µ —ç–Ω–∫–æ–¥–µ—Ä–∞
  - `LV_KEY_ESC` - –≤—ã—Ö–æ–¥
  - `LV_KEY_UP/DOWN/LEFT/RIGHT` - –Ω–∞–≤–∏–≥–∞—Ü–∏—è
  
- `LV_EVENT_CLICKED` - –∫–ª–∏–∫ –º—ã—à–∏ (–µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞)
- `LV_EVENT_PRESSED` - –Ω–∞–∂–∞—Ç–∏–µ —Ç–∞—á—Å–∫—Ä–∏–Ω–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ—à–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –≤—ã–±–æ—Ä–∞ —Å–µ—Ç–µ–π

–î–ª—è –ø—Ä–æ—à–∏–≤–∫–∏:
```batch
c:\Users\admin\2\hydro1.0\free_com5.bat
idf.py -p COM5 flash monitor
```

---

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π Hydro System 1.0** üå±üíß

