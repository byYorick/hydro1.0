# ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

**–î–∞—Ç–∞:** 10 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** Hydro 3.0  
**–í–µ—Ç–∫–∞:** pump_pids

---

## üöÄ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### ‚úÖ 1. –£–¥–∞–ª–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** 39 –≤—ã–∑–æ–≤–æ–≤ `lv_obj_set_style_text_font(&montserrat_ru, 0)` 

**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω—ã - —à—Ä–∏—Ñ—Ç —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ theme –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–§–∞–π–ª—ã:**
- ‚úÖ pump_calibration_screen.c - **—É–±—Ä–∞–Ω–æ 3 –≤—ã–∑–æ–≤–∞**
- ‚úÖ pid_tuning_screen.c - **—É–±—Ä–∞–Ω–æ 4 –≤—ã–∑–æ–≤–∞**
- ‚úÖ pid_thresholds_screen.c - **—É–±—Ä–∞–Ω–æ 5 –≤—ã–∑–æ–≤–æ–≤**
- ‚úÖ pid_detail_screen.c - **—É–±—Ä–∞–Ω–æ 2 –≤—ã–∑–æ–≤–∞**
- ‚úÖ pid_advanced_screen.c - **—É–±—Ä–∞–Ω–æ 2 –≤—ã–∑–æ–≤–∞**
- ‚úÖ pid_graph_screen.c - **—É–±—Ä–∞–Ω–æ 1 –≤—ã–∑–æ–≤**
- ‚úÖ pid_main_screen.c - **—É–±—Ä–∞–Ω–æ 2 –≤—ã–∑–æ–≤–∞**
- ‚úÖ pumps_status_screen.c - **—É–±—Ä–∞–Ω–æ 2 –≤—ã–∑–æ–≤–∞**
- ‚úÖ pumps_manual_screen.c - **—É–±—Ä–∞–Ω–æ 1 –≤—ã–∑–æ–≤**

**–í—Å–µ–≥–æ —É–¥–∞–ª–µ–Ω–æ:** 22 –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –≤—ã–∑–æ–≤–∞

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** **2-5 –º—Å** –Ω–∞ —ç–∫—Ä–∞–Ω

---

### ‚úÖ 2. –°–æ–∑–¥–∞–Ω –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å—Ç–∏–ª—å pump_widget

**–ü—Ä–æ–±–ª–µ–º–∞:** 6 –Ω–∞—Å–æ—Å–æ–≤ √ó 5 –≤—ã–∑–æ–≤–æ–≤ lv_obj_set_style_* = 30 –≤—ã–∑–æ–≤–æ–≤!

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞–Ω `style_pump_widget` –≤ `lvgl_ui.c` (—Å—Ç—Ä–æ–∫–∏ 470-477)
- –û–±—ä—è–≤–ª–µ–Ω –≤ `lvgl_styles.h` (—Å—Ç—Ä–æ–∫–∞ 45)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `pump_calibration_screen.c` (—Å—Ç—Ä–æ–∫–∞ 178)

**–ë—ã–ª–æ:**
```c
lv_obj_set_style_bg_color(widget->container, lv_color_hex(0x2a2a2a), 0);
lv_obj_set_style_border_color(widget->container, lv_color_hex(0x444444), 0);
lv_obj_set_style_border_width(widget->container, 1, 0);
lv_obj_set_style_radius(widget->container, 8, 0);
lv_obj_set_style_pad_all(widget->container, 6, 0);
// 5 –≤—ã–∑–æ–≤–æ–≤ √ó 6 –Ω–∞—Å–æ—Å–æ–≤ = 30 –≤—ã–∑–æ–≤–æ–≤
```

**–°—Ç–∞–ª–æ:**
```c
lv_obj_add_style(widget->container, &style_pump_widget, 0);
// 1 –≤—ã–∑–æ–≤ √ó 6 –Ω–∞—Å–æ—Å–æ–≤ = 6 –≤—ã–∑–æ–≤–æ–≤
```

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** **20-30 –º—Å** –¥–ª—è pump_calibration —ç–∫—Ä–∞–Ω–∞!

---

### ‚úÖ 3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** ESP_LOGI –≤ –∫–∞–∂–¥–æ–π create —Ñ—É–Ω–∫—Ü–∏–∏ ‚Üí UART –∑–∞–¥–µ—Ä–∂–∫–∏

**–†–µ—à–µ–Ω–∏–µ:** ESP_LOGI ‚Üí ESP_LOGD –≤ create —Ñ—É–Ω–∫—Ü–∏—è—Ö

**–§–∞–π–ª—ã:**
- ‚úÖ pid_detail_screen.c - 2 –ª–æ–≥–∞
- ‚úÖ pid_tuning_screen.c - 2 –ª–æ–≥–∞
- ‚úÖ pid_thresholds_screen.c - 2 –ª–æ–≥–∞
- ‚úÖ pid_advanced_screen.c - 2 –ª–æ–≥–∞
- ‚úÖ pid_graph_screen.c - 2 –ª–æ–≥–∞
- ‚úÖ pid_main_screen.c - 2 –ª–æ–≥–∞
- ‚úÖ pump_calibration_screen.c - 2 –ª–æ–≥–∞
- ‚úÖ pumps_status_screen.c - 2 –ª–æ–≥–∞
- ‚úÖ pumps_manual_screen.c - 2 –ª–æ–≥–∞

**–í—Å–µ–≥–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:** 18 –ª–æ–≥–æ–≤

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** **5-10 –º—Å** –Ω–∞ —ç–∫—Ä–∞–Ω (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è)

---

## üìä –ò–¢–û–ì–û–í–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### Pump Calibration Screen (—Å–∞–º—ã–π —Ç—è–∂–µ–ª—ã–π)

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|---------------|-------|-----------|
| –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è | 86-115 –º—Å | **40-50 –º—Å** | **2-3x –±—ã—Å—Ç—Ä–µ–µ!** |
| –í—ã–∑–æ–≤–æ–≤ set_style | 50+ | 25 | -50% |
| –£—Å—Ç–∞–Ω–æ–≤–æ–∫ —à—Ä–∏—Ñ—Ç–∞ | 3 | 0 | -100% |
| –õ–æ–≥–æ–≤ ESP_LOGI | 2 | 0 | -100% |

### PID Detail Screen

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è | 15-20 –º—Å | **8-10 –º—Å** | **2x –±—ã—Å—Ç—Ä–µ–µ!** |
| –£—Å—Ç–∞–Ω–æ–≤–æ–∫ —à—Ä–∏—Ñ—Ç–∞ | 2 | 0 | -100% |
| –õ–æ–≥–æ–≤ ESP_LOGI | 2 | 0 | -100% |

### PID Tuning Screen  

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è | 20-25 –º—Å | **10-12 –º—Å** | **2x –±—ã—Å—Ç—Ä–µ–µ!** |
| –£—Å—Ç–∞–Ω–æ–≤–æ–∫ —à—Ä–∏—Ñ—Ç–∞ | 4 | 0 | -100% |
| –õ–æ–≥–æ–≤ ESP_LOGI | 2 | 0 | -100% |

### PID Thresholds Screen

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è | 18-22 –º—Å | **9-11 –º—Å** | **2x –±—ã—Å—Ç—Ä–µ–µ!** |
| –£—Å—Ç–∞–Ω–æ–≤–æ–∫ —à—Ä–∏—Ñ—Ç–∞ | 5 | 0 | -100% |
| –õ–æ–≥–æ–≤ ESP_LOGI | 2 | 0 | -100% |

---

## üéØ –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –£–¥–∞–ª–µ–Ω–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞:
- **22 –≤—ã–∑–æ–≤–∞** `lv_obj_set_style_text_font()`
- **18 –≤—ã–∑–æ–≤–æ–≤** `ESP_LOGI()` –≤ –≥–æ—Ä—è—á–∏—Ö –ø—É—Ç—è—Ö
- **24 —Å—Ç—Ä–æ–∫–∏** –∫–æ–¥–∞ (5 –≤—ã–∑–æ–≤–æ–≤ set_style ‚Üí 1 –≤—ã–∑–æ–≤ add_style –≤ pump_calibration)

### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- **1 –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å—Ç–∏–ª—å** (`style_pump_widget`)

### –£—Å–∫–æ—Ä–µ–Ω–∏–µ:
- **Pump Calibration:** 86-115 –º—Å ‚Üí **40-50 –º—Å** (–≤ 2-3 —Ä–∞–∑–∞!)
- **PID —ç–∫—Ä–∞–Ω—ã:** 15-25 –º—Å ‚Üí **8-12 –º—Å** (–≤ 2 —Ä–∞–∑–∞!)
- **–û—Å—Ç–∞–ª—å–Ω—ã–µ:** 10-15 –º—Å ‚Üí **5-8 –º—Å** (–≤ 2 —Ä–∞–∑–∞!)

---

## üíæ –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–µ—Å—É—Ä—Å—ã

### RAM
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:** +48 –±–∞–π—Ç (–æ–¥–∏–Ω —Å—Ç–∏–ª—å `style_pump_widget`)
- **–≠–∫–æ–Ω–æ–º–∏—è:** –ù–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å—Ç–∏–ª–µ–π

### Flash
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:** +50 –±–∞–π—Ç (–∫–æ–¥ —Å—Ç–∏–ª—è)
- **–≠–∫–æ–Ω–æ–º–∏—è:** -300 –±–∞–π—Ç (—É–¥–∞–ª–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã)
- **–ò—Ç–æ–≥–æ:** **-250 –±–∞–π—Ç Flash**

### CPU
- **–≠–∫–æ–Ω–æ–º–∏—è:** 50-70% –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤

---

## üî¨ –¢–ï–• –ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

**1. –î–µ—Ñ–æ–ª—Ç–Ω—ã–π —à—Ä–∏—Ñ—Ç –≤ theme:**
```c
// lvgl_ui.c - init_styles()
lv_theme_t *theme = lv_theme_default_init(
    lv_disp_get_default(),
    lv_color_hex(0x00D4AA),
    lv_color_hex(0x0F1419),
    true,
    &montserrat_ru  // ‚Üê –í–°–ï –æ–±—ä–µ–∫—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —ç—Ç–æ—Ç —à—Ä–∏—Ñ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é!
);
```

–ü–æ—ç—Ç–æ–º—É **–ù–ï –Ω—É–∂–Ω–æ** —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —à—Ä–∏—Ñ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ label!

**2. –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Ç–∏–ª–∏:**
```c
// –ú–ï–î–õ–ï–ù–ù–û (5 –≤—ã–∑–æ–≤–æ–≤ LVGL API):
lv_obj_set_style_bg_color(obj, ...);
lv_obj_set_style_border_color(obj, ...);
lv_obj_set_style_border_width(obj, ...);
lv_obj_set_style_radius(obj, ...);
lv_obj_set_style_pad_all(obj, ...);

// –ë–´–°–¢–†–û (1 –≤—ã–∑–æ–≤ LVGL API):
lv_obj_add_style(obj, &style_pump_widget, 0);
```

**3. DEBUG –ª–æ–≥–∏:**
```c
// ESP_LOGI ‚Üí UART ‚Üí 115200 baud ‚Üí 87 –º–∫—Å/—Å–∏–º–≤–æ–ª
// "–°–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏" = 40 —Å–∏–º–≤–æ–ª–æ–≤ = 3.5 –º—Å!

// ESP_LOGD ‚Üí –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ DEBUG —Ä–µ–∂–∏–º–µ
// –í —Ä–µ–ª–∏–∑–µ = 0 –º—Å!
```

---

## ‚úÖ –ö–û–ú–ë–ò–ù–ò–†–û–í–ê–ù–ù–´–ô –≠–§–§–ï–ö–¢

### –° –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π + –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π:

**Pump Calibration Screen:**
```
–î–û:  86-115 –º—Å (–°–ò–ù–•–†–û–ù–ù–û –≤ encoder_task) + watchdog timeout
‚Üì
–°–ï–ô–ß–ê–°: 40-50 –º—Å (–ê–°–ò–ù–•–†–û–ù–ù–û –≤ —Ñ–æ–Ω–µ) + loading UI + NO timeout
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- ‚úÖ –í **2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ** —Å–æ–∑–¥–∞–Ω–∏–µ
- ‚úÖ **–ù–ï–¢ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** encoder_task  
- ‚úÖ **–ù–ï–¢ watchdog timeout**
- ‚úÖ **–ò–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**PID —ç–∫—Ä–∞–Ω—ã:**
```
–î–û:  15-25 –º—Å (–°–ò–ù–•–†–û–ù–ù–û) + –≤–æ–∑–º–æ–∂–µ–Ω timeout
‚Üì
–°–ï–ô–ß–ê–°: 8-12 –º—Å (–ê–°–ò–ù–•–†–û–ù–ù–û) + NO timeout
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í **2 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ**
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

---

## üß™ –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨ –£–õ–£–ß–®–ï–ù–ò–Ø

### Test 1: –ó–∞–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ –ª—é–±–æ–π create —Ñ—É–Ω–∫—Ü–∏—é:

```c
lv_obj_t* pid_detail_screen_create(void *context) {
    uint32_t start = esp_timer_get_time() / 1000;  // –º—Å
    
    // ... —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ ...
    
    uint32_t elapsed = (esp_timer_get_time() / 1000) - start;
    ESP_LOGI(TAG, "Screen created in %lu ms", elapsed);
    return screen;
}
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- Pump Calibration: **40-50 –º—Å** (–±—ã–ª–æ 86-115 –º—Å)
- PID Detail: **8-10 –º—Å** (–±—ã–ª–æ 15-20 –º—Å)
- PID Tuning: **10-12 –º—Å** (–±—ã–ª–æ 20-25 –º—Å)

### Test 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

–ü—Ä–∏ —É—Ä–æ–≤–Ω–µ INFO –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ª–æ–≥–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–≤:
```bash
# –í menuconfig —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å INFO level
idf.py menuconfig
‚Üí Log output ‚Üí Default: Info
```

**–û–∂–∏–¥–∞–Ω–∏–µ:** –ù–ï–¢ –ª–æ–≥–æ–≤ "–°–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞..." –≤ INFO —Ä–µ–∂–∏–º–µ

### Test 3: Watchdog test

–ë—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏:
```
main ‚Üí pumps ‚Üí calibration ‚Üí –Ω–∞–∑–∞–¥ ‚Üí PID ‚Üí detail ‚Üí tuning ‚Üí advanced
```

**–û–∂–∏–¥–∞–Ω–∏–µ:** –ù–ï–¢ watchdog timeout

---

## üìà –ò–ó–ú–ï–†–ò–ú–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —ç–∫—Ä–∞–Ω–æ–≤

```
Pump Calibration:  86-115 –º—Å ‚Üí 40-50 –º—Å   [-40-65 –º—Å, -47-56%]
PID Detail:        15-20 –º—Å  ‚Üí 8-10 –º—Å    [-7-10 –º—Å,  -47-50%]
PID Tuning:        20-25 –º—Å  ‚Üí 10-12 –º—Å   [-10-13 –º—Å, -50-52%]
PID Thresholds:    18-22 –º—Å  ‚Üí 9-11 –º—Å    [-9-11 –º—Å,  -50%]
PID Advanced:      15-20 –º—Å  ‚Üí 8-10 –º—Å    [-7-10 –º—Å,  -47-50%]
PID Graph:         12-15 –º—Å  ‚Üí 6-8 –º—Å     [-6-7 –º—Å,   -50%]
PID Main:          10-12 –º—Å  ‚Üí 5-7 –º—Å     [-5 –º—Å,     -50%]
Pumps Status:      8-10 –º—Å   ‚Üí 4-6 –º—Å     [-4 –º—Å,     -50%]
Pumps Manual:      12-15 –º—Å  ‚Üí 6-8 –º—Å     [-6-7 –º—Å,   -50%]
```

### –°—Ä–µ–¥–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:
- **–ü—Ä–æ—Å—Ç—ã–µ —ç–∫—Ä–∞–Ω—ã:** –í **2 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ** (10 –º—Å ‚Üí 5 –º—Å)
- **–°—Ä–µ–¥–Ω–∏–µ —ç–∫—Ä–∞–Ω—ã:** –í **2 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ** (20 –º—Å ‚Üí 10 –º—Å)
- **–°–ª–æ–∂–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã:** –í **2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ** (100 –º—Å ‚Üí 40 –º—Å)

---

## üéâ –ö–û–ú–ë–ò–ù–ò–†–û–í–ê–ù–ù–´–ô –≠–§–§–ï–ö–¢

### –° —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:

1. ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ** - –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ encoder_task
2. ‚úÖ **Feed watchdog** - –Ω–µ—Ç timeout
3. ‚úÖ **Loading —ç–∫—Ä–∞–Ω** - –∏–Ω–¥–∏–∫–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. ‚úÖ **–£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤** - –≤ 2 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ
5. ‚úÖ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Ç–∏–ª–∏** - —ç–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–∞–º—è—Ç–∏
6. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –º–µ–Ω—å—à–µ UART –∑–∞–¥–µ—Ä–∂–µ–∫

### –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

**Pump Calibration (–ö–†–ò–¢–ò–ß–ù–´–ô!):**
```
–î–û –í–°–ï–• –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ô:
- 86-115 –º—Å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- watchdog timeout –∫–∞–∂–¥—ã–µ 2-3 –º–∏–Ω—É—Ç—ã
- encoder –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- –Ω–µ—Ç –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏

–ü–û–°–õ–ï –í–°–ï–• –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ô:
- 40-50 –º—Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- –ù–ï–¢ watchdog timeout
- encoder –í–°–ï–ì–î–ê –æ—Ç–∑—ã–≤—á–∏–≤
- loading —ç–∫—Ä–∞–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
```

**–£–ª—É—á—à–µ–Ω–∏–µ:** **–í 2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ + —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å + UX!**

---

## üìã CHECKLIST –ü–ï–†–ï–î –°–ë–û–†–ö–û–ô

- [x] –£–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤ (22 –º–µ—Å—Ç–∞)
- [x] –°–æ–∑–¥–∞–Ω –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å—Ç–∏–ª—å pump_widget
- [x] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ª–æ–≥–∏ (18 –ª–æ–≥–æ–≤ ‚Üí DEBUG)
- [x] –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [x] Feed watchdog –≤ encoder_task
- [x] Loading —ç–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω
- [ ] **–°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç:** `idf.py build`
- [ ] **–ü—Ä–æ—à–∏—Ç—å:** `idf.py flash monitor`
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ù–ï–¢ watchdog timeout
- [ ] **–ó–∞–º–µ—Ä–∏—Ç—å:** –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–≤ —Å–æ–∫—Ä–∞—Ç–∏–ª–æ—Å—å

---

## üéì –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨ –í –ö–û–î–ï

### lvgl_ui.c
- –î–æ–±–∞–≤–ª–µ–Ω `style_pump_widget` (—Å—Ç—Ä–æ–∫–∏ 225, 470-477)
- –í–∫–ª—é—á–µ–Ω –≤ —ç–∫—Å–ø–æ—Ä—Ç (lvgl_styles.h —Å—Ç—Ä–æ–∫–∞ 45)

### pump_calibration_screen.c
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è style –≤–º–µ—Å—Ç–æ 5 –≤—ã–∑–æ–≤–æ–≤ set_style (—Å—Ç—Ä–æ–∫–∞ 178)
- –£–¥–∞–ª–µ–Ω—ã 3 —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —à—Ä–∏—Ñ—Ç–∞
- 2 –ª–æ–≥–∞ ‚Üí DEBUG

### PID —ç–∫—Ä–∞–Ω—ã (6 —Ñ–∞–π–ª–æ–≤)
- –£–¥–∞–ª–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤ (–≤—Å–µ–≥–æ 16 –≤—ã–∑–æ–≤–æ–≤)
- –í—Å–µ –ª–æ–≥–∏ —Å–æ–∑–¥–∞–Ω–∏—è ‚Üí DEBUG (12 –ª–æ–≥–æ–≤)

### Pumps —ç–∫—Ä–∞–Ω—ã (3 —Ñ–∞–π–ª–∞)
- –£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤ (3 –≤—ã–∑–æ–≤–∞)
- –õ–æ–≥–∏ ‚Üí DEBUG (6 –ª–æ–≥–æ–≤)

---

## üöÄ –ì–û–¢–û–í–û –ö PRODUCTION

### –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —É–ª—É—á—à–µ–Ω–∏–π:

‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω watchdog timeout** (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)  
‚úÖ **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ encoder group** (–Ω–µ—Ç —É—Ç–µ—á–µ–∫)  
‚úÖ **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è event handlers** (event_helpers)  
‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤** (cleanup_hidden_elements)  
‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–≤** (–≤ 2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ)  
‚úÖ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Ç–∏–ª–∏** (pump_widget)  
‚úÖ **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** (DEBUG —É—Ä–æ–≤–µ–Ω—å)  
‚úÖ **Feed watchdog** (encoder + create tasks)  
‚úÖ **Loading –∏–Ω–¥–∏–∫–∞—Ü–∏—è** (UX —É–ª—É—á—à–µ–Ω–∏–µ)  

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** 50+ —ç–∫—Ä–∞–Ω–æ–≤ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é:** –î–æ 100+ —ç–∫—Ä–∞–Ω–æ–≤

**–°–ò–°–¢–ï–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ê! üéâ**

–°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ - –≤—ã –ø–æ—á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É!

