# âœ… Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº IoT - Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ°!

## ğŸ¯ Ğ§Ñ‚Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¾

### 1. âœ… Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ° ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸

**`main/system_config.h`** - Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ IoT ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹:
- âœ… `wifi_config_t` - WiFi (SSID, password, static IP, gateway, DNS)
- âœ… `mqtt_config_t` - MQTT (broker URI, credentials, keepalive, intervals)
- âœ… `telegram_config_t` - Telegram (bot token, chat ID, notifications)
- âœ… `sd_config_t` - SD-ĞºĞ°Ñ€Ñ‚Ğ° (enabled, log interval, cleanup days)
- âœ… `mesh_config_t` - Mesh (role, device ID, heartbeat)
- âœ… `ai_config_t` - AI (enabled, confidence, interval)

**Ğ’ÑĞµĞ³Ğ¾:** 50+ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸!

### 2. âœ… ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ Config Manager

**`components/config_manager/config_manager.c`**:
- âœ… Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… IoT Ğ¿Ğ¾Ğ»ĞµĞ¹
- âœ… ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ/Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ· NVS
- âœ… ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸

### 3. âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ñ‹ ÑĞºÑ€Ğ°Ğ½Ñ‹ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº

| Ğ­ĞºÑ€Ğ°Ğ½ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ |
|-------|--------|-----------|
| `settings_main_screen` | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ | Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ (6 ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹) |
| `settings_iot_menu` | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ | IoT Ğ¿Ğ¾Ğ´Ğ¼ĞµĞ½Ñ (4 Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ°) |
| `settings_wifi_screen` | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ | WiFi (9 Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²) |
| `settings_mqtt_screen` | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ | MQTT (8 Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²) |
| `settings_telegram_screen` | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ | Telegram (7 Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²) |
| `settings_sd_screen` | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ | SD Card (5 Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²) |
| `settings_mesh_screen` | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ | Mesh (4 Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°) |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾:** 7 ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ² Ñ 48 Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¼Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ğ¼Ğ¸

### 4. âœ… Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ² System Menu

**`system_menu_screen.c`**:
- âœ… Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ğ¿ÑƒĞ½ĞºÑ‚ "Settings" Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼ Ğ² ÑĞ¿Ğ¸ÑĞºĞµ
- âœ… ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ½Ğ° `settings_main`

## ğŸ“Š Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ Ğ¼ĞµĞ½Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº

```
System Menu
â”œâ”€â”€ Settings â† ĞĞĞ’ĞĞ•!
â”‚   â”œâ”€â”€ Sensors
â”‚   â”‚   â”œâ”€â”€ pH Target/Alarms
â”‚   â”‚   â”œâ”€â”€ EC Target/Alarms
â”‚   â”‚   â””â”€â”€ Temp Target/Alarms
â”‚   â”œâ”€â”€ Pumps
â”‚   â”‚   â””â”€â”€ 6 Ğ½Ğ°ÑĞ¾ÑĞ¾Ğ² (flow rate, timing)
â”‚   â”œâ”€â”€ WiFi
â”‚   â”‚   â”œâ”€â”€ SSID & Password
â”‚   â”‚   â”œâ”€â”€ Network Mode (STA/AP/Hybrid)
â”‚   â”‚   â”œâ”€â”€ Static IP Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
â”‚   â”‚   â””â”€â”€ Auto Reconnect
â”‚   â”œâ”€â”€ IoT
â”‚   â”‚   â”œâ”€â”€ MQTT
â”‚   â”‚   â”‚   â”œâ”€â”€ Enabled
â”‚   â”‚   â”‚   â”œâ”€â”€ Broker URI
â”‚   â”‚   â”‚   â”œâ”€â”€ Client ID
â”‚   â”‚   â”‚   â”œâ”€â”€ Username/Password
â”‚   â”‚   â”‚   â”œâ”€â”€ Keepalive
â”‚   â”‚   â”‚   â””â”€â”€ Publish Interval
â”‚   â”‚   â”œâ”€â”€ Telegram
â”‚   â”‚   â”‚   â”œâ”€â”€ Enabled
â”‚   â”‚   â”‚   â”œâ”€â”€ Bot Token
â”‚   â”‚   â”‚   â”œâ”€â”€ Chat ID
â”‚   â”‚   â”‚   â”œâ”€â”€ Commands
â”‚   â”‚   â”‚   â”œâ”€â”€ Report Hour
â”‚   â”‚   â”‚   â””â”€â”€ Notifications
â”‚   â”‚   â”œâ”€â”€ SD Card
â”‚   â”‚   â”‚   â”œâ”€â”€ Enabled
â”‚   â”‚   â”‚   â”œâ”€â”€ Log Interval
â”‚   â”‚   â”‚   â”œâ”€â”€ Cleanup Days
â”‚   â”‚   â”‚   â””â”€â”€ Auto Sync
â”‚   â”‚   â””â”€â”€ Mesh Network
â”‚   â”‚       â”œâ”€â”€ Enabled
â”‚   â”‚       â”œâ”€â”€ Role (Gateway/Slave)
â”‚   â”‚       â”œâ”€â”€ Device ID
â”‚   â”‚       â””â”€â”€ Heartbeat Interval
â”‚   â”œâ”€â”€ AI Control
â”‚   â”‚   â”œâ”€â”€ Enabled
â”‚   â”‚   â”œâ”€â”€ Min Confidence
â”‚   â”‚   â”œâ”€â”€ Correction Interval
â”‚   â”‚   â””â”€â”€ Use ML Model
â”‚   â””â”€â”€ System
â”‚       â”œâ”€â”€ Auto Control
â”‚       â”œâ”€â”€ Device Name
â”‚       â”œâ”€â”€ Display Brightness
â”‚       â””â”€â”€ Factory Reset
â”œâ”€â”€ Auto Control
â”œâ”€â”€ WiFi
â”œâ”€â”€ Display
â”œâ”€â”€ Data Logger
â”œâ”€â”€ System Info
â””â”€â”€ Reset
```

## ğŸš€ ĞšĞ°Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ

### ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğµ

1. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€ Ğ½Ğ° Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ¼ ÑĞºÑ€Ğ°Ğ½Ğµ
2. ĞŸĞ¾Ğ²ĞµÑ€Ğ½Ğ¸Ñ‚Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€, Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ "System"
3. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€
4. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ "**Settings**" â† ĞĞĞ’Ğ«Ğ™ ĞŸĞ£ĞĞšĞ¢!
5. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€
6. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ:
   - **Sensors** - Ñ†ĞµĞ»ĞµĞ²Ñ‹Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ pH/EC/Temp
   - **Pumps** - Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ½Ğ°ÑĞ¾ÑĞ¾Ğ²
   - **WiFi** - Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº ÑĞµÑ‚Ğ¸
   - **IoT** â†’ MQTT, Telegram, SD, Mesh
   - **AI Control** - Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ AI
   - **System** - ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸

### Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²

**Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ (WiFi SSID, MQTT Broker):**
1. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ»Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€Ğ¾Ğ¼
2. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€ - Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ°
3. Ğ’Ğ²Ğ¾Ğ´Ğ¸Ñ‚Ğµ Ñ‚ĞµĞºÑÑ‚ (Ğ¸Ğ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ÑĞºÑ€Ğ°Ğ½Ğ½ÑƒÑ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ)
4. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ "OK"

**Ğ§Ğ¸ÑĞ»Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ (Keepalive, Intervals):**
1. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ spinbox ÑĞ½ĞºĞ¾Ğ´ĞµÑ€Ğ¾Ğ¼
2. Ğ’Ñ€Ğ°Ñ‰Ğ°Ğ¹Ñ‚Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€ - Ğ¸Ğ·Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
3. ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ñ‚Ğµ Ğº ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¼Ñƒ Ğ¿Ğ¾Ğ»Ñ

**ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»Ğ¸ (Enabled, Auto Reconnect):**
1. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ switch ÑĞ½ĞºĞ¾Ğ´ĞµÑ€Ğ¾Ğ¼
2. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€ - Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ ON/OFF

**Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ:**
1. ĞŸÑ€Ğ¾ĞºÑ€ÑƒÑ‚Ğ¸Ñ‚Ğµ Ğ²Ğ½Ğ¸Ğ· Ğ´Ğ¾ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ "Save"
2. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€
3. Ğ£Ğ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ "Saved!" Ğ½Ğ° 2 ÑĞµĞºÑƒĞ½Ğ´Ñ‹

## ğŸ’¾ Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² NVS

Ğ’ÑÑ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ² NVS Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¸ "Save":

```
NVS Namespace: "hydro_cfg"
Key: "system_cfg"
Size: ~2KB (Ğ²ÑÑ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° system_config_t)
```

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ² Ğ»Ğ¾Ğ³Ğ°Ñ…:

```
I (12345) CONFIG_MANAGER: Config manager initialized
I (12356) CONFIG_MANAGER: Config Manager initialized (auto mode: ON)
I (12367) SETTINGS_MQTT: MQTT settings saved
I (12378) SETTINGS_WIFI: WiFi settings saved successfully
```

## ğŸ“ ĞÑÑ‚Ğ°Ğ²ÑˆĞ¸ĞµÑÑ ÑĞºÑ€Ğ°Ğ½Ñ‹ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ‚Ñ‹ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ:

1. **settings_sensors_screen** - Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ñ†ĞµĞ»ĞµĞ²Ñ‹Ñ… Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ°Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ²
2. **settings_pumps_screen** - Ñ‚Ğ¾Ğ½ĞºĞ°Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ½Ğ°ÑĞ¾ÑĞ°
3. **settings_ai_screen** - Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ AI ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ğ°
4. **settings_system_screen** - ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹

Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ¸ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸ Ğ² `SETTINGS_SCREENS_GUIDE.md`

## ğŸ¨ ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ UI

### Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ†Ğ²ĞµÑ‚Ğ°

Ğ’ create Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑÑ…:
```c
lv_obj_set_style_bg_color(obj, lv_color_hex(0x1E1E1E), 0);
lv_obj_set_style_text_color(obj, lv_color_hex(0x00FF00), 0);
```

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ

```c
static void validate_ip(lv_event_t *e) {
    const char *ip = lv_textarea_get_text(textarea_ip);
    // Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ° IP
    if (!is_valid_ip(ip)) {
        lv_obj_set_style_border_color(textarea_ip, lv_color_hex(0xFF0000), 0);
    }
}
```

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "Test"

```c
static void test_mqtt_connection(lv_event_t *e) {
    ESP_LOGI(TAG, "Testing MQTT connection...");
    // ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Ğ±Ñ€Ğ¾ĞºĞµÑ€Ñƒ
    // ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
}
```

## ğŸ”— Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² lvgl_ui.c

ĞÑƒĞ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² `components/lvgl_ui/lvgl_ui.c`:

```c
// Ğ’ ÑĞµĞºÑ†Ğ¸Ğ¸ includes
#include "screens/settings/settings_main_screen.h"
#include "screens/settings/settings_wifi_screen.h"
#include "screens/settings/settings_iot_menu.h"
#include "screens/settings/settings_mqtt_screen.h"
#include "screens/settings/settings_telegram_screen.h"
#include "screens/settings/settings_sd_screen.h"
#include "screens/settings/settings_mesh_screen.h"

// Ğ’ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ lvgl_ui_init() Ğ¿Ğ¾ÑĞ»Ğµ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ²:
ESP_LOGI(TAG, "Registering settings screens...");
settings_main_screen_init();
settings_wifi_screen_init();
settings_iot_menu_init();
settings_mqtt_screen_init();
settings_telegram_screen_init();
settings_sd_screen_init();
settings_mesh_screen_init();
ESP_LOGI(TAG, "Settings screens registered");
```

## ğŸ“¦ CMakeLists.txt Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ

Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ² `components/lvgl_ui/CMakeLists.txt`:

```cmake
SRCS
    # ... ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ ...
    "screens/settings/settings_main_screen.c"
    "screens/settings/settings_wifi_screen.c"
    "screens/settings/settings_iot_menu.c"
    "screens/settings/settings_mqtt_screen.c"
    "screens/settings/ALL_SETTINGS_SCREENS.c"
```

## âœ… Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚

**Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº IoT:**

- âœ… **50+ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²** Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
- âœ… **7 ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ²** Ñ Ğ¸ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¾Ğ¹
- âœ… **Ğ­Ğ½ĞºĞ¾Ğ´ĞµÑ€** Ğ´Ğ»Ñ Ğ²ÑĞµĞ¹ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸
- âœ… **NVS** Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ
- âœ… **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ** Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- âœ… **Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ** "Saved!" Ğ¿Ñ€Ğ¸ ÑƒÑĞ¿ĞµÑ…Ğµ
- âœ… **Ğ£Ğ´Ğ¾Ğ±Ğ½Ñ‹Ğ¹ UI** Ñ Ğ¿Ñ€Ğ¾ĞºÑ€ÑƒÑ‚ĞºĞ¾Ğ¹

## ğŸ¯ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

1. Ğ—Ğ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² **System â†’ Settings**
2. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ **IoT â†’ MQTT**
3. Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ **Broker URI** Ğ½Ğ° `mqtt://192.168.1.100:1883`
4. Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ **Client ID** Ğ½Ğ° `my_hydro_device`
5. ĞŸÑ€Ğ¾ĞºÑ€ÑƒÑ‚Ğ¸Ñ‚Ğµ Ğ²Ğ½Ğ¸Ğ·
6. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ **Save MQTT**
7. Ğ£Ğ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ "MQTT Saved!"
8. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹ Ğ² NVS!

## ğŸ”„ ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº

ĞŸĞ¾ÑĞ»Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑÑÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ Ğ¸Ğ»Ğ¸ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ:

```c
// Ğ’ iot_integration.c
esp_err_t iot_apply_config_changes() {
    system_config_t config;
    config_load(&config);
    
    // ĞŸĞµÑ€ĞµĞ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ MQTT Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ğ¼Ğ¸
    if (config.mqtt.enabled) {
        mqtt_client_stop();
        mqtt_client_config_t mqtt_cfg = {
            .broker_uri = config.mqtt.broker_uri,
            .client_id = config.mqtt.client_id,
            // ...
        };
        mqtt_client_init(&mqtt_cfg);
        mqtt_client_start();
    }
    
    // Ğ¢Ğ¾ Ğ¶Ğµ Ğ´Ğ»Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²
}
```

## ğŸ“± Ğ¡ĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚Ñ‹ ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ² (ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ‚)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Settings        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš™ Sensors         â”‚
â”‚ âš¡ Pumps           â”‚
â”‚ ğŸ“¡ WiFi            â”‚
â”‚ â˜ï¸  IoT            â”‚
â”‚ ğŸ¤– AI Control     â”‚
â”‚ âš™ï¸  System         â”‚
â”‚                    â”‚
â”‚  [â† Back]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IoT Settings     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â¬†ï¸  MQTT           â”‚
â”‚ ğŸ“ Telegram        â”‚
â”‚ ğŸ’¾ SD Card         â”‚
â”‚ ğŸ“¡ Mesh Network    â”‚
â”‚                    â”‚
â”‚  [â† Back]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MQTT Settings    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Enabled: [ON]      â”‚
â”‚ Broker URI:        â”‚
â”‚ [mqtt://192...]    â”‚
â”‚ Client ID:         â”‚
â”‚ [hydro_gate...]    â”‚
â”‚ Username:          â”‚
â”‚ [        ]         â”‚
â”‚ Password:          â”‚
â”‚ [        ]         â”‚
â”‚ Keepalive: [120]   â”‚
â”‚ Auto Reconnect:[ON]â”‚
â”‚ Interval: [5]      â”‚
â”‚                    â”‚
â”‚  [ğŸ’¾ Save MQTT]    â”‚
â”‚  [â† Back]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ† ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

âœ… **ĞœĞ¾Ğ´ÑƒĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ** - ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ»  
âœ… **Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ** - Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº  
âœ… **NVS** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ  
âœ… **Ğ­Ğ½ĞºĞ¾Ğ´ĞµÑ€** - ÑƒĞ´Ğ¾Ğ±Ğ½Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ  
âœ… **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ** - Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸  
âœ… **Feedback** - ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¾Ğ± ÑƒÑĞ¿ĞµÑ…Ğµ  
âœ… **ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ** - Ğ»ĞµĞ³ĞºĞ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹  

## ğŸš€ Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑˆĞ°Ğ³Ğ¸

### Ğ”Ğ»Ñ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ Ğ²ÑĞµÑ… ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ²:

1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ´Ğ»Ñ Ğ¾ÑÑ‚Ğ°Ğ²ÑˆĞ¸Ñ…ÑÑ ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ² Ğ¿Ğ¾ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñƒ Ğ¸Ğ· `SETTINGS_SCREENS_GUIDE.md`:
   - `settings_sensors_screen.c/h`
   - `settings_pumps_screen.c/h`
   - `settings_ai_screen.c/h`
   - `settings_system_screen.c/h`

2. Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ¸Ñ… Ğ² `lvgl_ui.c`

3. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ² `CMakeLists.txt`

### Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾):

- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ QR-ĞºĞ¾Ğ´ ÑĞºĞ°Ğ½ĞµÑ€ Ğ´Ğ»Ñ WiFi
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "Test Connection" Ğ´Ğ»Ñ MQTT/Telegram
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ SD-ĞºĞ°Ñ€Ñ‚Ñ‹
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ñ… WiFi ÑĞµÑ‚ĞµĞ¹

## ğŸ“š Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
components/lvgl_ui/screens/settings/
â”œâ”€â”€ settings_main_screen.c/h           âœ… Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ
â”œâ”€â”€ settings_wifi_screen.c/h           âœ… WiFi Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
â”œâ”€â”€ settings_iot_menu.c/h              âœ… IoT Ğ¿Ğ¾Ğ´Ğ¼ĞµĞ½Ñ
â”œâ”€â”€ settings_mqtt_screen.c/h           âœ… MQTT Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
â”œâ”€â”€ ALL_SETTINGS_SCREENS.c             âœ… Telegram, SD, Mesh
â”œâ”€â”€ settings_sensors_screen.c/h        â³ TODO
â”œâ”€â”€ settings_pumps_screen.c/h          â³ TODO
â”œâ”€â”€ settings_ai_screen.c/h             â³ TODO
â””â”€â”€ settings_system_screen.c/h         â³ TODO

main/
â”œâ”€â”€ system_config.h                    âœ… Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½ IoT
â””â”€â”€ iot_config.h                       âœ… Ğ”ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ñ‹Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ

components/config_manager/
â”œâ”€â”€ config_manager.c                   âœ… IoT defaults Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹
â””â”€â”€ config_manager.h                   âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾
```

## ğŸ‰ Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ!

**Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°:**

1. âœ… Ğ’ÑĞµ IoT Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ² `system_config_t`
2. âœ… Config Manager ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸ĞµĞ¼/Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¾Ğ¹
3. âœ… 7 ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ² Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹
4. âœ… ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· ÑĞ½ĞºĞ¾Ğ´ĞµÑ€
5. âœ… Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² NVS
6. âœ… Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² System Menu

**ĞŸÑ€Ğ¾ÑˆĞµĞ¹Ñ‚Ğµ ESP32 Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ IoT Ğ¿Ñ€ÑĞ¼Ğ¾ Ğ½Ğ° ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğµ!** ğŸŠ

---

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ:** Ğ­ĞºÑ€Ğ°Ğ½Ñ‹ Sensors/Pumps/AI/System Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ·Ğ¶Ğµ Ğ¿Ğ¾ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñƒ, Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ IoT Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ (WiFi/MQTT/Telegram) ÑƒĞ¶Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚!

