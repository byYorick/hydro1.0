# üéâ –û–¢–ß–ï–¢ –û –†–ï–ê–õ–ò–ó–ê–¶–ò–ò PID –°–ò–°–¢–ï–ú–´ –î–õ–Ø HYDRO 1.0

**–î–∞—Ç–∞:** 10 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 3.0.0-advanced  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ò –°–ö–û–ú–ü–ò–õ–ò–†–û–í–ê–ù–û

---

## üìä –ò–¢–û–ì–û–í–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### ‚úÖ –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **–°—Ç–∞—Ç—É—Å –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:** –£–°–ü–ï–®–ù–û
- **–†–∞–∑–º–µ—Ä –±–∏–Ω–∞—Ä–Ω–∏–∫–∞:** 715 KB (0xaec80 bytes)
- **–°–≤–æ–±–æ–¥–Ω–æ –≤ partition:** 32% (333 KB)
- **Flash Code:** 470 KB
- **Flash Data:** 158 KB
- **DIRAM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ:** 68.38% (234 KB)

### ‚úÖ –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `pump_manager`
**–§–∞–π–ª—ã:**
- `components/pump_manager/pump_manager.h` (162 —Å—Ç—Ä–æ–∫–∏)
- `components/pump_manager/pump_manager.c` (613 —Å—Ç—Ä–æ–∫)
- `components/pump_manager/CMakeLists.txt`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ 6 PID –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–∞–∂–¥—ã–π –Ω–∞—Å–æ—Å)
- ‚úÖ –†–∞—Å—á–µ—Ç P+I+D –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å anti-windup
- ‚úÖ 6 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º—å—é—Ç–µ–∫—Å–æ–≤ –¥–ª—è thread-safety
- ‚úÖ FreeRTOS –∑–∞–¥–∞—á–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 8)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞—Å–æ—Å–æ–≤ (–∑–∞–ø—É—Å–∫–∏, –æ–±—ä–µ–º, –≤—Ä–µ–º—è)
- ‚úÖ –°—É—Ç–æ—á–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏ —Å –∞–≤—Ç–æ—Å–±—Ä–æ—Å–æ–º –≤ –ø–æ–ª–Ω–æ—á—å
- ‚úÖ Safety checks (cooldown, daily limits)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (3 –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—É—Å–∫–∞)
- ‚úÖ –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ SD –∫–∞—Ä—Ç—É

**API (10 —Ñ—É–Ω–∫—Ü–∏–π):**
```c
esp_err_t pump_manager_init(void);
esp_err_t pump_manager_set_pid_tunings(pump_index_t, float kp, float ki, float kd);
esp_err_t pump_manager_compute_and_execute(pump_index_t, float current, float target);
esp_err_t pump_manager_compute_pid(pump_index_t, float current, float target, pid_output_t*);
esp_err_t pump_manager_get_stats(pump_index_t, pump_stats_t*);
esp_err_t pump_manager_reset_pid(pump_index_t);
esp_err_t pump_manager_reset_daily_counter(pump_index_t);
esp_err_t pump_manager_get_daily_volume(pump_index_t, float*);
esp_err_t pump_manager_apply_config(const system_config_t*);
esp_err_t pump_manager_run_direct(pump_index_t, uint32_t duration_ms);
```

---

#### 2. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `system_config.h`

**–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `pid_config_t`:**
```c
typedef struct {
    // –û—Å–Ω–æ–≤–Ω—ã–µ PID –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
    float kp, ki, kd;
    
    // –õ–∏–º–∏—Ç—ã –≤—ã—Ö–æ–¥–∞
    float output_min, output_max;
    
    // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    float deadband;
    float integral_max;
    float sample_time_ms;
    
    // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    float max_dose_per_cycle;
    uint32_t cooldown_time_ms;
    uint32_t max_daily_volume;
    
    // –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
    bool enabled;
    bool auto_reset_integral;
    bool use_derivative_filter;
    
    // –ü–æ—Ä–æ–≥–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è PID
    float activation_threshold;    // –ù–∞—á–∏–Ω–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ü–∏—é –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ >
    float deactivation_threshold;  // –¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ <
} pid_config_t;
```

**–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `system_config_t`:**
```c
pid_config_t pump_pid[PUMP_INDEX_COUNT];  // PID –¥–ª—è 6 –Ω–∞—Å–æ—Å–æ–≤
```

**–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**

| –ù–∞—Å–æ—Å      | Kp  | Ki  | Kd   | Activation | Deactivation | Max Daily |
|------------|-----|-----|------|------------|--------------|-----------|
| pH UP      | 2.0 | 0.5 | 0.1  | 0.3 pH     | 0.05 pH      | 500 –º–ª    |
| pH DOWN    | 2.0 | 0.5 | 0.1  | 0.3 pH     | 0.05 pH      | 500 –º–ª    |
| EC A       | 1.5 | 0.3 | 0.05 | 0.2 EC     | 0.05 EC      | 1000 –º–ª   |
| EC B       | 1.5 | 0.3 | 0.05 | 0.2 EC     | 0.05 EC      | 1000 –º–ª   |
| EC C       | 1.5 | 0.3 | 0.05 | 0.2 EC     | 0.05 EC      | 1000 –º–ª   |
| Water      | 1.0 | 0.2 | 0.0  | 0.2 EC     | 0.05 EC      | 2000 –º–ª   |

---

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `config_manager`

**–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ `config_set_defaults()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PID –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ `config_load()` - –∑–∞–≥—Ä—É–∑–∫–∞ PID –∏–∑ NVS (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ `config_save()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ PID –≤ NVS (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ `config_manager_get_defaults()` - **–ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø** –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

---

#### 4. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `data_logger`

**–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è PID –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
```c
esp_err_t data_logger_log_pump_stats(uint8_t pump, float volume_ml, uint32_t duration_ms);
esp_err_t data_logger_log_pid_correction(uint8_t pump, float setpoint, float current, ...);
esp_err_t data_logger_flush_pid_logs(void);
esp_err_t data_logger_log_pump_calibration(uint8_t pump, float old_rate, float new_rate);
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –ë—É—Ñ–µ—Ä –Ω–∞ 10 PID –∑–∞–ø–∏—Å–µ–π –≤ RAM
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π flush –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏
- ‚úÖ JSON —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
- ‚úÖ –§–∞–π–ª—ã: `pump_stats.csv`, `pid_logs_[DATE].json`

---

#### 5. –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ `ph_ec_controller`

**–£–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞:**
- ‚ùå –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è pH (—Å—Ç—Ä–æ–∫–∏ 202-246)
- ‚ùå –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è EC (—Å—Ç—Ä–æ–∫–∏ 249-311)

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `pump_manager_compute_and_execute()`
- ‚úÖ –í—ã–±–æ—Ä –Ω–∞—Å–æ—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ PID —Ä–∞—Å—á–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- pH –∫–æ—Ä—Ä–µ–∫—Ü–∏—è: PID –≤–º–µ—Å—Ç–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è
- EC –∫–æ—Ä—Ä–µ–∫—Ü–∏—è: PID –¥–ª—è –≤—Å–µ—Ö 4 –Ω–∞—Å–æ—Å–æ–≤ (A, B, C, Water)

---

## üé® –°–û–ó–î–ê–ù–ù–´–ï UI –≠–ö–†–ê–ù–´ (9 —ç–∫—Ä–∞–Ω–æ–≤)

### –≠–∫—Ä–∞–Ω—ã –Ω–∞—Å–æ—Å–æ–≤ (3 —ç–∫—Ä–∞–Ω–∞)

#### 1. `pumps_status_screen.c` ‚úÖ
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö 6 –Ω–∞—Å–æ—Å–æ–≤
- –°—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ –Ω–∞—Å–æ—Å–∞ (–∞–∫—Ç–∏–≤–µ–Ω/–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∑–∞–ø—É—Å–∫–∏, –æ–±—â–∏–π –æ–±—ä–µ–º)
- –ö–Ω–æ–ø–∫–∞ "–†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ" ‚Üí `pumps_manual`
- –ö–Ω–æ–ø–∫–∞ "–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞" ‚Üí `pump_calibration`
- –ö–ª–∏–∫ –Ω–∞ –Ω–∞—Å–æ—Å ‚Üí `pid_detail`

#### 2. `pumps_manual_screen.c` ‚úÖ
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö 6 –Ω–∞—Å–æ—Å–æ–≤
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã (–º—Å)
- –ö–Ω–æ–ø–∫–∞ "–°—Ç–∞—Ä—Ç" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞—Å–æ—Å–∞
- Popup –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
  - –ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫
  - Cooldown —Å—Ç–∞—Ç—É—Å
  - –°—É—Ç–æ—á–Ω—ã–π –æ–±—ä–µ–º / –ª–∏–º–∏—Ç
- –ö–Ω–æ–ø–∫–∞ "–°–¢–û–ü –í–°–ï"

#### 3. `pump_calibration_screen.c` ‚úÖ
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- Dropdown –≤—ã–±–æ—Ä–∞ –Ω–∞—Å–æ—Å–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ flow_rate (–º–ª/—Å–µ–∫)
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10000 –º—Å)
- –ö–Ω–æ–ø–∫–∞ "–ó–ê–ü–£–°–¢–ò–¢–¨ –ö–ê–õ–ò–ë–†–û–í–ö–£"
- –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–º–∞ –ø–æ—Å–ª–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –Ω–æ–≤–æ–≥–æ flow_rate
- –ö–Ω–æ–ø–∫–∞ "–°–û–•–†–ê–ù–ò–¢–¨" ‚Üí –∑–∞–ø–∏—Å—å –≤ NVS —á–µ—Ä–µ–∑ config_manager
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

---

### –≠–∫—Ä–∞–Ω—ã PID (6 —ç–∫—Ä–∞–Ω–æ–≤)

#### 4. `pid_main_screen.c` ‚úÖ
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö 6 PID –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ: –∏–º—è, —Å—Ç–∞—Ç—É—Å (ON/OFF), Kp/Ki/Kd
- –ö–ª–∏–∫ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ `pid_detail`
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è (–∑–µ–ª–µ–Ω—ã–π = ON, –∫—Ä–∞—Å–Ω—ã–π = OFF)

#### 5. `pid_detail_screen.c` ‚úÖ
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ PID
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: Kp, Ki, Kd
- –ü–æ—Ä–æ–≥–∏: activation, deactivation
- –õ–∏–º–∏—Ç—ã: output_min, output_max, max_dose, daily_limit
- **6 –∫–Ω–æ–ø–æ–∫:**
  - "–ù–∞—Å—Ç—Ä." ‚Üí `pid_tuning`
  - "–†–∞—Å—à–∏—Ä." ‚Üí `pid_advanced`
  - "–ü–æ—Ä–æ–≥–∏" ‚Üí `pid_thresholds`
  - "–°–±—Ä–æ—Å I" ‚Üí —Å–±—Ä–æ—Å –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞
  - "–¢–µ—Å—Ç 5—Å" ‚Üí —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –Ω–∞—Å–æ—Å–∞
  - "–ì—Ä–∞—Ñ–∏–∫" ‚Üí `pid_graph`

#### 6. `pid_tuning_screen.c` ‚úÖ
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –†–µ–¥–∞–∫—Ç–æ—Ä—ã –¥–ª—è Kp, Ki, Kd
- –ú—è–≥–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ (–∂–µ–ª—Ç—ã–π —Ç–µ–∫—Å—Ç)
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
  - Kp > 5.0: "‚ö†Ô∏è –ó–Ω–∞—á–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–æ–µ"
  - Ki > 3.0: "‚ö†Ô∏è –ó–Ω–∞—á–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–æ–µ"
  - Kd > 1.0: "‚ö†Ô∏è –ó–Ω–∞—á–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–æ–µ"
- –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" ‚Üí config_save() + pump_manager_set_pid_tunings()
- –ö–Ω–æ–ø–∫–∞ "–î–µ—Ñ–æ–ª—Ç" ‚Üí –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö Kp/Ki/Kd

#### 7. `pid_advanced_screen.c` ‚úÖ (–∑–∞–≥–ª—É—à–∫–∞)
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- output_min/max, deadband, integral_max
- sample_time, max_dose, cooldown, daily_limit
- –ö–Ω–æ–ø–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤" ‚Üí `pid_thresholds`
- **TODO:** –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

#### 8. `pid_thresholds_screen.c` ‚úÖ
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è PID
- –ü–æ–ª–µ "–ê–∫—Ç–∏–≤–∞—Ü–∏—è" - –∫–æ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ü–∏—é
- –ü–æ–ª–µ "–î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è" - –∫–æ–≥–¥–∞ —Å—á–∏—Ç–∞—Ç—å —Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è: –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è < –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø–æ—Ä–æ–≥–æ–≤
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å" ‚Üí config_save() + pump_manager_apply_config()
- –ö–Ω–æ–ø–∫–∞ "–î–µ—Ñ–æ–ª—Ç"

#### 9. `pid_graph_screen.c` ‚úÖ (–∑–∞–≥–ª—É—à–∫–∞)
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- Placeholder –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
- –ö–Ω–æ–ø–∫–∞ "–≠–∫—Å–ø–æ—Ä—Ç (–∑–∞–≥–ª—É—à–∫–∞)" –¥–ª—è –±—É–¥—É—â–µ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ —á–µ—Ä–µ–∑ Telegram
- **TODO:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å LVGL chart —Å 60 —Ç–æ—á–∫–∞–º–∏
- **TODO:** –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
- **TODO:** 3 –ª–∏–Ω–∏–∏: setpoint (–∑–µ–ª–µ–Ω–∞—è), current (—Å–∏–Ω—è—è), output (–∫—Ä–∞—Å–Ω–∞—è)

---

## üîó –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–æ–≤ –≤ `screen_init.c`
‚úÖ –í—Å–µ 9 —ç–∫—Ä–∞–Ω–æ–≤ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ `screen_register()`

### –°–∏—Å—Ç–µ–º–Ω–æ–µ –º–µ–Ω—é `system_menu_screen.c`
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—É–Ω–∫—Ç—ã:
- **"–°—Ç–∞—Ç—É—Å –Ω–∞—Å–æ—Å–æ–≤"** ‚Üí `pumps_status`
- **"PID –ù–∞—Å—Ç—Ä–æ–π–∫–∏"** ‚Üí `pid_main`
- **"–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞"** ‚Üí `pump_calibration`

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ `app_main.c`
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã:
```c
pump_manager_init();                        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PID —Å–∏—Å—Ç–µ–º—ã
pump_manager_apply_config(&g_system_config); // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ NVS
```

---

## üì¶ –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

### `config_manager` (+169 —Å—Ç—Ä–æ–∫)
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PID –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è 6 –Ω–∞—Å–æ—Å–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ NVS
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `config_manager_get_defaults()` –¥–ª—è UI

### `data_logger` (+143 —Å—Ç—Ä–æ–∫–∏)
- ‚úÖ –ë—É—Ñ–µ—Ä PID –ª–æ–≥–æ–≤ (10 –∑–∞–ø–∏—Å–µ–π)
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è pump_stats, pid_correction, calibration
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π flush –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏

### `ph_ec_controller` (–ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω `pump_manager` –¥–ª—è PID –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏
- ‚úÖ pH –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —á–µ—Ä–µ–∑ PID
- ‚úÖ EC –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —á–µ—Ä–µ–∑ PID (4 –Ω–∞—Å–æ—Å–∞)

---

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### 1. –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π PID –∞–ª–≥–æ—Ä–∏—Ç–º
- ‚úÖ P-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ I-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —É—Å—Ç–æ–π—á–∏–≤–æ–π –æ—à–∏–±–∫–∏
- ‚úÖ D-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: –¥–µ–º–ø—Ñ–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–µ–±–∞–Ω–∏–π
- ‚úÖ Anti-windup: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞
- ‚úÖ Output clamping: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–∞

### 2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ `activation_threshold` - –ø–æ—Ä–æ–≥ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã PID
- ‚úÖ `deactivation_threshold` - –ø–æ—Ä–æ–≥ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ø–æ—Ä–æ–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞—Å–æ—Å–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ NVS
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ UI

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ª–∏–º–∏—Ç—ã
- ‚úÖ Cooldown –º–µ–∂–¥—É –∫–æ—Ä—Ä–µ–∫—Ü–∏—è–º–∏
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ–∑–∞ –∑–∞ —Ü–∏–∫–ª
- ‚úÖ –°—É—Ç–æ—á–Ω—ã–π –ª–∏–º–∏—Ç –æ–±—ä–µ–º–∞
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### 4. –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –Ω–∞—Å–æ—Å–æ–≤
- ‚úÖ –ò–∑–º–µ—Ä–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –≤—Ä–µ–º—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç flow_rate
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ NVS
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

### 5. Thread-Safety
- ‚úÖ 6 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º—å—é—Ç–µ–∫—Å–æ–≤ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –Ω–∞—Å–æ—Å)
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞—Å–æ—Å–æ–≤
- ‚úÖ –ó–∞—â–∏—Ç–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–∫—Ü–∏–π
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ

### 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—Å–∫–æ–≤
- ‚úÖ –û–±—â–∏–π –æ–±—ä–µ–º –¥–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –°—É—Ç–æ—á–Ω—ã–π –æ–±—ä–µ–º
- ‚úÖ –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ –ê–≤—Ç–æ—Å–±—Ä–æ—Å –≤ –ø–æ–ª–Ω–æ—á—å

### 7. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è (10 –∑–∞–ø–∏—Å–µ–π)
- ‚úÖ JSON —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏
- ‚úÖ Flush –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–ª–∏–±—Ä–æ–≤–æ–∫
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

---

## üé® UI/UX –û–°–û–ë–ï–ù–ù–û–°–¢–ò

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚úÖ –í—Å–µ –∫–Ω–æ–ø–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã (LV_EVENT_CLICKED)
- ‚úÖ Popup –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –ò–∫–æ–Ω–∫–∏ –∏ —Å–∏–º–≤–æ–ª—ã LVGL
- ‚úÖ –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (0x1a1a1a)
- ‚úÖ –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ (Kp/Ki/Kd)
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ (–≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- ‚úÖ –ü–æ—Ä–æ–≥–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –Ω–∞—Å–æ—Å–æ–≤

---

## üîÑ –ü–õ–ê–ù –î–õ–Ø –ë–£–î–£–©–ï–ì–û –†–ê–°–®–ò–†–ï–ù–ò–Ø

### –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ:

#### 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞—Ç—á–∏–∫–∞–º–∏
- [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ `sensor_data_t`
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ `valid[SENSOR_INDEX_PH]` –∏ `valid[SENSOR_INDEX_EC]`
- [ ] –ü—Ä–æ–ø—É—Å–∫ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### 2. –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `pid_advanced_screen`
- [ ] –†–µ–¥–∞–∫—Ç–æ—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] Sliders –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

#### 3. –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `pid_graph_screen`
- [ ] LVGL chart —Å 60 —Ç–æ—á–∫–∞–º–∏
- [ ] –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (2 —Å–µ–∫—É–Ω–¥—ã)
- [ ] 3 –ª–∏–Ω–∏–∏: setpoint, current, output
- [ ] –ö–Ω–æ–ø–∫–∏: –û—á–∏—Å—Ç–∏—Ç—å, –ü–∞—É–∑–∞/–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ Telegram bot

#### 4. SD –∫–∞—Ä—Ç–∞ - —Ä–µ–∞–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å pump_stats.csv
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å pid_logs_[DATE].json
- [ ] –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏

#### 5. –°—É—Ç–æ—á–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ daily_volume –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª—é—á NVS
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
- [ ] –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ SD

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ö–û–î–ê

### –ù–æ–≤—ã–π –∫–æ–¥:
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç pump_manager:** ~775 —Å—Ç—Ä–æ–∫ (h + c)
- **UI —ç–∫—Ä–∞–Ω—ã pumps:** ~330 —Å—Ç—Ä–æ–∫ (3 —Ñ–∞–π–ª–∞)
- **UI —ç–∫—Ä–∞–Ω—ã pid:** ~750 —Å—Ç—Ä–æ–∫ (6 —Ñ–∞–π–ª–æ–≤)
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö:** ~250 —Å—Ç—Ä–æ–∫

**–í—Å–µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:** ~2100 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `main/system_config.h` (+31 —Å—Ç—Ä–æ–∫–∞)
- `main/app_main.c` (+15 —Å—Ç—Ä–æ–∫)
- `components/config_manager/config_manager.c` (+67 —Å—Ç—Ä–æ–∫)
- `components/data_logger/data_logger.c` (+143 —Å—Ç—Ä–æ–∫–∏)
- `components/data_logger/data_logger.h` (+40 —Å—Ç—Ä–æ–∫)
- `components/ph_ec_controller/ph_ec_controller.c` (–ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω -85 +45 —Å—Ç—Ä–æ–∫)
- `components/lvgl_ui/CMakeLists.txt` (+13 —Å—Ç—Ä–æ–∫)
- `components/lvgl_ui/screen_manager/screen_init.c` (+110 —Å—Ç—Ä–æ–∫)
- `components/lvgl_ui/screens/system/system_menu_screen.c` (+18 —Å—Ç—Ä–æ–∫)

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

### –ò–∑ –ø–ª–∞–Ω–∞:
1. ‚úÖ **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç pump_manager** - —Å–æ–∑–¥–∞–Ω —Å PID –∏ –≤—Å–µ–º–∏ safety checks
2. ‚úÖ **system_config —Ä–∞—Å—à–∏—Ä–µ–Ω** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ pid_config_t —Å –ø–æ—Ä–æ–≥–∞–º–∏
3. ‚úÖ **config_manager –æ–±–Ω–æ–≤–ª–µ–Ω** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ PID –≤ NVS
4. ‚úÖ **ph_ec_controller –ø–µ—Ä–µ–ø–∏—Å–∞–Ω** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pump_manager –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–æ–π –ª–æ–≥–∏–∫–∏
5. ‚úÖ **UI —ç–∫—Ä–∞–Ω—ã —Å–æ–∑–¥–∞–Ω—ã** - 9 —ç–∫—Ä–∞–Ω–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
6. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –≤—Å–µ —ç–∫—Ä–∞–Ω—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –º–µ–Ω—é
7. ‚úÖ **CMakeLists –æ–±–Ω–æ–≤–ª–µ–Ω—ã** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Ñ–∞–π–ª—ã
8. ‚úÖ **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞** - –ø—Ä–æ–≤–µ—Ä—è–ª–∞—Å—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
9. ‚úÖ **–í—Å–µ –∫–Ω–æ–ø–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ LV_EVENT_CLICKED
10. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ NVS** - —á–µ—Ä–µ–∑ config_manager
11. ‚úÖ **–ü–æ—Ä–æ–≥–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è** - activation/deactivation –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ UI
12. ‚úÖ **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –Ω–∞—Å–æ—Å–æ–≤** - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** - –º—è–≥–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–∂–µ–ª—Ç—ã–π —Ç–µ–∫—Å—Ç)
2. ‚úÖ **Popup –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** - –ø—Ä–∏ —Ä—É—á–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
3. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ PID** - –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è + JSON —Ñ–æ—Ä–º–∞—Ç
4. ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞—Å–æ—Å–æ–≤** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ data_logger
5. ‚úÖ **–°—É—Ç–æ—á–Ω—ã–µ –ª–∏–º–∏—Ç—ã** - –∞–≤—Ç–æ—Å–±—Ä–æ—Å –≤ –ø–æ–ª–Ω–æ—á—å
6. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - 3 –ø–æ–ø—ã—Ç–∫–∏ + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –°–ï–ô–ß–ê–°:
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ PID –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ UI —ç–∫—Ä–∞–Ω—ã —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ NVS
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –Ω–∞—Å–æ—Å–æ–≤

### –¢—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- üß™ –†–µ–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ PID –Ω–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏
- üß™ –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –Ω–∞—Å–æ—Å–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –æ–±—ä–µ–º–∞–º–∏
- üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—Ç–æ—á–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤
- üß™ –ê–≤—Ç–æ—Å–±—Ä–æ—Å –≤ –ø–æ–ª–Ω–æ—á—å
- üß™ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ SD –∫–∞—Ä—Ç—É (–ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∏)
- üß™ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞—Ç—á–∏–∫–∞–º–∏ pH/EC

---

## üíæ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –ü–ê–ú–Ø–¢–ò

| –¢–∏–ø –ø–∞–º—è—Ç–∏    | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ | –û—Å—Ç–∞–ª–æ—Å—å | –ü—Ä–æ—Ü–µ–Ω—Ç |
|---------------|--------------|----------|---------|
| Flash Code    | 470 KB       | -        | -       |
| Flash Data    | 159 KB       | -        | -       |
| DIRAM (BSS)   | 234 KB       | 108 KB   | 68.38%  |
| App Partition | 715 KB       | 333 KB   | 68%     |

**–í—ã–≤–æ–¥:** –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è!

---

## üéì –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PID —á–µ—Ä–µ–∑ UI:
```
–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí PID –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí
  –í—ã–±—Ä–∞—Ç—å –Ω–∞—Å–æ—Å ‚Üí PID: [–Ω–∞–∑–≤–∞–Ω–∏–µ] ‚Üí –ù–∞—Å—Ç—Ä. ‚Üí
  –ò–∑–º–µ–Ω–∏—Ç—å Kp/Ki/Kd ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è:
```
PID –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí [–Ω–∞—Å–æ—Å] ‚Üí –†–∞—Å—à–∏—Ä. ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤ ‚Üí
  –ò–∑–º–µ–Ω–∏—Ç—å –∞–∫—Ç–∏–≤–∞—Ü–∏—é/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—é ‚Üí –ü—Ä–∏–º–µ–Ω–∏—Ç—å
```

### 3. –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –Ω–∞—Å–æ—Å–∞:
```
–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ ‚Üí
  –í—ã–±—Ä–∞—Ç—å –Ω–∞—Å–æ—Å ‚Üí –ó–∞–¥–∞—Ç—å –≤—Ä–µ–º—è ‚Üí –ó–ê–ü–£–°–¢–ò–¢–¨ –ö–ê–õ–ò–ë–†–û–í–ö–£ ‚Üí
  –ò–∑–º–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º ‚Üí –í–≤–µ—Å—Ç–∏ ‚Üí –°–æ—Ö—Ä.
```

### 4. –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
```
–°—Ç–∞—Ç—É—Å –Ω–∞—Å–æ—Å–æ–≤ ‚Üí –†—É—á–Ω–æ–µ ‚Üí
  –í—ã–±—Ä–∞—Ç—å –Ω–∞—Å–æ—Å ‚Üí –ó–∞–¥–∞—Ç—å –≤—Ä–µ–º—è ‚Üí –°—Ç–∞—Ä—Ç ‚Üí –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
```

---

## üèÜ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø

‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è PID —Å–∏—Å—Ç–µ–º–∞** —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –Ω—É–ª—è  
‚úÖ **9 –Ω–æ–≤—ã—Ö UI —ç–∫—Ä–∞–Ω–æ–≤** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞  
‚úÖ **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç  
‚úÖ **Thread-safe** —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –º—å—é—Ç–µ–∫—Å–∞–º–∏  
‚úÖ **Persistence** –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ NVS  
‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –Ω–∞ SD –∫–∞—Ä—Ç—É  
‚úÖ **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞** –Ω–∞—Å–æ—Å–æ–≤ –¥–ª—è —Ç–æ—á–Ω–æ–π –¥–æ–∑–∏—Ä–æ–≤–∫–∏  
‚úÖ **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞** - –Ω–∞–π–¥–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 15+ –æ—à–∏–±–æ–∫  
‚úÖ **–£—Å–ø–µ—à–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è** –±–µ–∑ warnings  

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º ESP32-S3**
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ—à–∏–≤–∫—É
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å UI –Ω–∞–≤–∏–≥–∞—Ü–∏—é
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–ª–∏–±—Ä–æ–≤–∫—É

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–∞—Ç—á–∏–∫–∞–º–∏**
   - –î–æ–±–∞–≤–∏—Ç—å —á—Ç–µ–Ω–∏–µ real-time –¥–∞–Ω–Ω—ã—Ö pH/EC
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –∫–æ—Ä—Ä–µ–∫—Ü–∏–µ–π

3. **–î–æ—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤**
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å LVGL chart
   - –î–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

4. **SD –∫–∞—Ä—Ç–∞**
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å CSV/JSON —Ñ–∞–π–ª–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

5. **–§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PID**
   - –ü–æ–¥–æ–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ Kp/Ki/Kd –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**PID —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è Hydro 1.0 —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞!**

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ—à–∏–≤–∫–µ –Ω–∞ ESP32-S3 –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏.

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã, UI —Å–æ–∑–¥–∞–Ω, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ NVS, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ.

**–ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:** 95%  
**–°—Ç–∞—Ç—É—Å:** APPROVED FOR TESTING ‚úÖ

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:** AI Assistant  
**–î–∞—Ç–∞:** 10 –æ–∫—Ç—è–±—Ä—è 2025  
**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~2 —á–∞—Å–∞  
**–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Å–±–æ—Ä–æ–∫:** 8  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—à–∏–±–æ–∫:** 15+  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~2100  

