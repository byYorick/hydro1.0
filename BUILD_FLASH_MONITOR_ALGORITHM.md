# üîß –ê–õ–ì–û–†–ò–¢–ú –°–ë–û–†–ö–ò, –ü–†–û–®–ò–í–ö–ò –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê

**–î–æ–∫—É–º–µ–Ω—Ç:** –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–±–æ—Ç—ã —Å ESP-IDF –ø—Ä–æ–µ–∫—Ç–æ–º  
**–î–∞—Ç–∞:** 16 –æ–∫—Ç—è–±—Ä—è 2025

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
2. [–ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏](#2-–ø—Ä–æ—Ü–µ—Å—Å-—Å–±–æ—Ä–∫–∏)
3. [–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ COM –ø–æ—Ä—Ç–∞](#3-–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ-com-–ø–æ—Ä—Ç–∞)
4. [–ü—Ä–æ—à–∏–≤–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞](#4-–ø—Ä–æ—à–∏–≤–∫–∞-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
5. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤](#5-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–∞–Ω–∞–ª–∏–∑-–ª–æ–≥–æ–≤)
6. [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#6-–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
7. [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞](#7-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è-–ø—Ä–æ—Ü–µ—Å—Å–∞)

---

## 1. –ü–û–î–ì–û–¢–û–í–ö–ê –û–ö–†–£–ñ–ï–ù–ò–Ø

### 1.1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ESP-IDF

```batch
cmd /c "C:\Espressif\idf_cmd_init.bat esp-idf-1dcc643656a1439837fdf6ab63363005 >nul 2>&1 && cd c:\esp\hydro\hydro1.0 && <–ö–û–ú–ê–ù–î–ê>"
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `idf_cmd_init.bat` - —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ESP-IDF –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `esp-idf-1dcc643656a1439837fdf6ab63363005` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –≤–µ—Ä—Å–∏–∏ ESP-IDF
- `>nul 2>&1` - –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –ª–æ–≥–æ–≤
- `cd c:\esp\hydro\hydro1.0` - –ø–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç Python virtual environment (`idf5.5_py3.11_env`)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (PATH, IDF_PATH)
- –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç toolchain (xtensa-esp-elf-gcc)
- –î–µ–ª–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥—ã `idf.py`, `esptool.py`

---

## 2. –ü–†–û–¶–ï–°–° –°–ë–û–†–ö–ò

### 2.1. –ö–æ–º–∞–Ω–¥–∞ —Å–±–æ—Ä–∫–∏

```bash
idf.py build
```

### 2.2. –≠—Ç–∞–ø—ã —Å–±–æ—Ä–∫–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ)

#### –≠—Ç–∞–ø 1: CMake –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```
-- Re-running CMake...
-- Building ESP-IDF components for target esp32s3
-- Project sdkconfig file C:/esp/hydro/hydro1.0/sdkconfig
-- Configuring done (10.3s)
-- Generating done (1.5s)
```

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –£—Å–ø–µ—Ö: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∑–∞ ~12 —Å–µ–∫—É–Ω–¥
- ‚ö†Ô∏è Warnings: –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ kconfig —Å–∏–º–≤–æ–ª—ã
- ‚ùå –û—à–∏–±–∫–∞: –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### –≠—Ç–∞–ø 2: –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```
[1/44] Building C object esp-idf/adaptive_pid/...
[2/44] Building C object esp-idf/lvgl_ui/...
...
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- –°—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤: `[X/Y]` –≥–¥–µ Y = –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- –ü—Ä–æ–≤–µ—Ä—è–µ–º warnings:
  - `-Wunused-variable` ‚Üí –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å
  - `-Wunused-function` ‚Üí –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–æ
  - Implicit declaration ‚Üí **–ö–†–ò–¢–ò–ß–ù–û**, –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

#### –≠—Ç–∞–ø 3: –õ–∏–Ω–∫–æ–≤–∫–∞
```
[40/44] Linking CXX executable hydroponics.elf
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –£—Å–ø–µ—Ö: `.elf` —Å–æ–∑–¥–∞–Ω
- ‚ùå Undefined reference ‚Üí –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è/–∫–æ–º–ø–æ–Ω–µ–Ω—Ç

#### –≠—Ç–∞–ø 4: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏
```
[41/44] Generating binary image from built executable
esptool.py v4.10.dev2
Creating esp32s3 image...
Successfully created esp32s3 image.
Generated C:/esp/hydro/hydro1.0/build/hydroponics.bin
```

**–ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞:**
```
hydroponics.bin binary size 0xc0610 bytes. 
Smallest app partition is 0x100000 bytes. 
0x3f9f0 bytes (25%) free.
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏:**
- ‚úÖ –†–∞–∑–º–µ—Ä < 1 MB (0x100000)
- ‚úÖ –°–≤–æ–±–æ–¥–Ω–æ ‚â• 20% ‚Üí —Ö–æ—Ä–æ—à–∏–π –∑–∞–ø–∞—Å
- ‚ö†Ô∏è –°–≤–æ–±–æ–¥–Ω–æ < 10% ‚Üí –Ω—É–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
- ‚ùå –ù–µ –≤–ª–µ–∑–∞–µ—Ç ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å partition –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–¥

### 2.3. –ê–Ω–∞–ª–∏–∑ –≤—ã–≤–æ–¥–∞ —Å–±–æ—Ä–∫–∏

**–£—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞:**
```
Project build complete. To flash, run:
 idf.py flash
```

**–ù–µ—É–¥–∞—á–Ω–∞—è —Å–±–æ—Ä–∫–∞:**
```
ninja: build stopped: subcommand failed.
ninja failed with exit code 1
```

**–î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–µ:**
1. –ß–∏—Ç–∞–µ–º –ª–æ–≥: `build/log/idf_py_stderr_output_XXXX`
2. –ò—â–µ–º –ø–µ—Ä–≤—É—é –æ—à–∏–±–∫—É (–Ω–µ warning!)
3. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º (missing include, undefined, syntax error)
4. –ü–æ–≤—Ç–æ—Ä—è–µ–º —Å–±–æ—Ä–∫—É

---

## 3. –û–°–í–û–ë–û–ñ–î–ï–ù–ò–ï COM –ü–û–†–¢–ê

### 3.1. –ü—Ä–æ–±–ª–µ–º–∞

COM –ø–æ—Ä—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–Ω—è—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏:
- `idf.py monitor` (–Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è)
- `esptool.py` (–∑–∞–≤–∏—Å—à–∏–π)
- –î—Ä—É–≥–∏–µ serial —Ç–µ—Ä–º–∏–Ω–∞–ª—ã

### 3.2. –ö–æ–º–∞–Ω–¥–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è

```batch
c:\esp\hydro\hydro1.0\free_com5.bat
```

### 3.3. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

```batch
# 1. –ù–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ COM5
handle.exe COM5

# 2. –£–±–∏–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–æ PID
taskkill /PID <PID> /F

# 3. –ñ–¥—ë—Ç –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–æ—Ä—Ç–∞
timeout /t 2

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
mode COM5
```

**–ê–Ω–∞–ª–∏–∑ –≤—ã–≤–æ–¥–∞:**
```
Killing PID: 1364
  [OK] PID 1364 terminated    ‚úÖ –£—Å–ø–µ—Ö
  [FAIL] Could not kill       ‚ö†Ô∏è –ü—Ä–æ—Ü–µ—Å—Å —É–∂–µ –∑–∞–≤–µ—Ä—à—ë–Ω –∏–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤
  
COM5 is ready to use!         ‚úÖ –ü–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω
```

### 3.4. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–µ—Å–ª–∏ bat –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

```python
python c:\esp\hydro\hydro1.0\free_com_port.py COM5
```

---

## 4. –ü–†–û–®–ò–í–ö–ê –£–°–¢–†–û–ô–°–¢–í–ê

### 4.1. –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—à–∏–≤–∫–∏

```bash
idf.py -p COM5 flash
```

### 4.2. –≠—Ç–∞–ø—ã –ø—Ä–æ—à–∏–≤–∫–∏

#### –≠—Ç–∞–ø 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
```
Serial port COM5
Connecting....
Chip is ESP32-S3 (QFN56) (revision v0.2)
Features: WiFi, BLE, Embedded PSRAM 8MB (AP_3v3)
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ `Connecting....` ‚Üí –Ω–∞–∂–∏–º–∞–µ–º BOOT –Ω–∞ –ø–ª–∞—Ç–µ (–µ—Å–ª–∏ –Ω–µ auto-reset)
- ‚úÖ `Chip is ESP32-S3` ‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —á–∏–ø
- ‚úÖ `PSRAM 8MB` ‚Üí –ø–∞–º—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå `Could not open COM5` ‚Üí –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç (—Å–º. —Ä–∞–∑–¥–µ–ª 3)
- ‚ùå `Timed out waiting for packet header` ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
  - –†–µ—à–µ–Ω–∏–µ: –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å USB, –Ω–∞–∂–∞—Ç—å BOOT

#### –≠—Ç–∞–ø 2: –ó–∞–≥—Ä—É–∑–∫–∞ stub
```
Uploading stub...
Running stub...
Stub running...
Changing baud rate to 460800
Changed.
```

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ `Changed.` ‚Üí —Å–∫–æ—Ä–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∞ –¥–æ 460800 (–±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ—à–∏–≤–∫–∞)

#### –≠—Ç–∞–ø 3: –°—Ç–∏—Ä–∞–Ω–∏–µ flash
```
Flash will be erased from 0x00000000 to 0x00006fff...
Flash will be erased from 0x00010000 to 0x000d0fff...
Flash will be erased from 0x00008000 to 0x00008fff...
```

**–ß—Ç–æ —Å—Ç–∏—Ä–∞–µ—Ç—Å—è:**
- `0x0` - bootloader
- `0x8000` - partition table
- `0x10000` - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

#### –≠—Ç–∞–ø 4: –ó–∞–ø–∏—Å—å –ø—Ä–æ—à–∏–≤–∫–∏
```
Writing at 0x00010000... (3 %)
Writing at 0x0001f7c8... (7 %)
...
Writing at 0x000cc6f7... (100 %)
Wrote 787984 bytes (436036 compressed) at 0x00010000 in 10.0 seconds
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- –ü—Ä–æ–≥—Ä–µ—Å—Å: 0% ‚Üí 100%
- –°–∫–æ—Ä–æ—Å—Ç—å: ~628 kbit/s (–Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è 460800 baud)
- –í—Ä–µ–º—è: ~10 —Å–µ–∫—É–Ω–¥ –¥–ª—è 788 KB

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå `Failed to write` ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å USB/–ø–∏—Ç–∞–Ω–∏–µ–º
- ‚ùå `Hash of data verified` –ù–ï –ø–æ—è–≤–∏–ª—Å—è ‚Üí –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω–∞—è –ø—Ä–æ—à–∏–≤–∫–∞

#### –≠—Ç–∞–ø 5: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
```
Leaving...
Hard resetting via RTS pin...
Done
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ `Done` ‚Üí –ø—Ä–æ—à–∏–≤–∫–∞ —É—Å–ø–µ—à–Ω–∞, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–æ

---

## 5. –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í

### 5.1. –ö–æ–º–∞–Ω–¥–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
idf.py -p COM5 monitor
```

–∏–ª–∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è:

```bash
idf.py -p COM5 flash monitor
```

### 5.2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

#### –§–æ—Ä–º–∞—Ç –ª–æ–≥–∞ ESP-IDF
```
<–£–†–û–í–ï–ù–¨> (<–í–†–ï–ú–Ø_–ú–°>) <–¢–≠–ì>: <–°–û–û–ë–©–ï–ù–ò–ï>
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```
I (1234) MAIN: –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞          # INFO
W (2345) SENSOR: –î–∞—Ç—á–∏–∫ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç      # WARNING
E (3456) I2C: –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è              # ERROR
D (4567) LVGL: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI              # DEBUG
```

### 5.3. –ê–Ω–∞–ª–∏–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π

#### 5.3.1. Watchdog Timeout (–ö–†–ò–¢–ò–ß–ù–û!)
```
E (90310) task_wdt: Task watchdog got triggered
E (90310) task_wdt: CPU 1: autotune_upd
E (90310) task_wdt: Print CPU 1 backtrace

Backtrace: 0x40378326:0x3FC994D0 0x42024DDA:0x600FF570 ...
```

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ß–∏—Ç–∞–µ–º backtrace ‚Üí –Ω–∞—Ö–æ–¥–∏–º —Ñ—É–Ω–∫—Ü–∏—é
2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ `esp_task_wdt_reset()` –≤ —Ü–∏–∫–ª–µ
3. –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—Ç–µ–∫ –∑–∞–¥–∞—á–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
4. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```c
while (running) {
    esp_task_wdt_reset();  // –î–û–ë–ê–í–ò–¢–¨!
    // ... —Ä–∞–±–æ—Ç–∞ –∑–∞–¥–∞—á–∏ ...
    vTaskDelay(100);
}
```

#### 5.3.2. Stack Overflow
```
***ERROR*** A stack overflow in task autotune_upd has been detected.
```

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞: `xTaskCreate(..., 4096, ...)` ‚Üí `8192`
2. –î–æ–±–∞–≤–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
```c
UBaseType_t stack = uxTaskGetStackHighWaterMark(NULL);
ESP_LOGI(TAG, "–°–≤–æ–±–æ–¥–Ω—ã–π —Å—Ç–µ–∫: %lu –±–∞–π—Ç", stack * 4);
```

#### 5.3.3. Memory Leak (–£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏)
```
I (60000) heap: Free heap: 150000 bytes
I (120000) heap: Free heap: 145000 bytes  # –£–º–µ–Ω—å—à–∞–µ—Ç—Å—è!
I (180000) heap: Free heap: 140000 bytes
```

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ `malloc()` ‚Üí –µ—Å—Ç—å –ª–∏ `free()`?
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å LVGL –æ–±—ä–µ–∫—Ç—ã ‚Üí –µ—Å—Ç—å –ª–∏ `LV_EVENT_DELETE` callbacks?
3. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –ª–æ–≥ –ø–∞–º—è—Ç–∏:
```c
ESP_LOGI(TAG, "Free heap: %lu bytes", esp_get_free_heap_size());
```

#### 5.3.4. Assertion Failed
```
assert failed: pvTaskIncrementMutexHeldCount tasks.c:4920
```

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –∏ —Å—Ç—Ä–æ–∫—É (tasks.c:4920)
2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º—å—é—Ç–µ–∫—Å–æ–≤/—Å–µ–º–∞—Ñ–æ—Ä–æ–≤
3. –ü—Ä–æ–≤–µ—Ä—è–µ–º `lv_lock()` / `lv_unlock()` –ø–∞—Ä—ã

### 5.4. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### CPU Load
```
I (10000) SYSTEM: CPU0: 45%, CPU1: 32%
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏:**
- ‚úÖ < 60% ‚Üí –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- ‚ö†Ô∏è 60-80% ‚Üí –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
- ‚ùå > 80% ‚Üí –∫—Ä–∏—Ç–∏—á–Ω–æ, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å

#### FreeRTOS Task Stats
```
I (10000) TASK_STATS:
  Name          State  Prio  Stack  CPU
  IDLE0         R      0     1024   50%
  display_upd   B      6     4096   15%
  sensor_task   B      5     8192   10%
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- `Stack` ‚Üí –µ—Å–ª–∏ < 500 –±–∞–π—Ç —Å–≤–æ–±–æ–¥–Ω–æ ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å
- `CPU` ‚Üí –µ—Å–ª–∏ –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞ > 40% ‚Üí –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
- `State: R` (Running) —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ ‚Üí –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª?

---

## 6. –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö

### 6.1. –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

#### –ü—Ä–∏–º–µ—Ä 1: Missing header
```
fatal error: adaptive_pid.h: No such file or directory
```

**–†–µ—à–µ–Ω–∏–µ:**
```cmake
# –í CMakeLists.txt –¥–æ–±–∞–≤–∏—Ç—å:
PRIV_REQUIRES adaptive_pid
```

#### –ü—Ä–∏–º–µ—Ä 2: Undefined reference
```
undefined reference to `adaptive_pid_init'
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `.c` —Ñ–∞–π–ª–µ
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ CMakeLists.txt
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ –≤ `.h`

#### –ü—Ä–∏–º–µ—Ä 3: Type mismatch
```
error: conflicting types for 'on_hide'
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—É —Ñ—É–Ω–∫—Ü–∏–∏
2. –°—Ä–∞–≤–Ω–∏—Ç—å —Å typedef –≤ `.h` —Ñ–∞–π–ª–µ
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã

### 6.2. –û—à–∏–±–∫–∏ –ø—Ä–æ—à–∏–≤–∫–∏

#### –ü—Ä–∏–º–µ—Ä 1: Port busy
```
A fatal error occurred: Could not open COM5, the port is busy
```

**–†–µ—à–µ–Ω–∏–µ:**
```batch
c:\esp\hydro\hydro1.0\free_com5.bat
```

#### –ü—Ä–∏–º–µ—Ä 2: Flash verification failed
```
Hash of data NOT verified.
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å USB
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∏—Ç–∞–Ω–∏–µ (5V, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ç–æ–∫)
3. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π USB –ø–æ—Ä—Ç
4. –£–º–µ–Ω—å—à–∏—Ç—å baud rate: `idf.py -p COM5 -b 115200 flash`

---

## 7. –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ü–†–û–¶–ï–°–°–ê

### 7.1. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:**
```bash
# –°–±–æ—Ä–∫–∞ ‚Üí –ü—Ä–æ—à–∏–≤–∫–∞ ‚Üí –ú–æ–Ω–∏—Ç–æ—Ä (–æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π)
idf.py build && idf.py -p COM5 flash monitor
```

**–¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
```bash
# Ninja –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ
idf.py build  # –ë—ã—Å—Ç—Ä–∞—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
```

**–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å):**
```bash
idf.py fullclean
idf.py build
```

### 7.2. –§–æ–Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
cmd /c "... && idf.py -p COM5 flash monitor"
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ background –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ crash
- –ü–µ—Ä–µ—Ö–≤–∞—Ç UART –≤—ã–≤–æ–¥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## 8. –ú–û–ô –ê–õ–ì–û–†–ò–¢–ú –†–ê–ë–û–¢–´

### 8.1. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞              ‚îÇ
‚îÇ    - –ò–∑–º–µ–Ω—è—é .c/.h —Ñ–∞–π–ª—ã            ‚îÇ
‚îÇ    - –î–æ–±–∞–≤–ª—è—é —Ñ—É–Ω–∫—Ü–∏–∏/–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞                   ‚îÇ
‚îÇ    cmd /c "init.bat && idf.py build"‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ    –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –≤—ã–≤–æ–¥:                ‚îÇ
‚îÇ    ‚úÖ "build complete" ‚Üí OK          ‚îÇ
‚îÇ    ‚ùå –û—à–∏–±–∫–∏ ‚Üí –∏—Å–ø—Ä–∞–≤–ª—è—é ‚Üí –ø–æ–≤—Ç–æ—Ä   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3. –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ COM –ø–æ—Ä—Ç–∞           ‚îÇ
‚îÇ    free_com5.bat                    ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ    –ü—Ä–æ–≤–µ—Ä—è—é:                        ‚îÇ
‚îÇ    ‚úÖ "ready to use" ‚Üí OK            ‚îÇ
‚îÇ    ‚ö†Ô∏è Warnings ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä—É—é –æ–±—ã—á–Ω–æ   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 4. –ü—Ä–æ—à–∏–≤–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞              ‚îÇ
‚îÇ    idf.py -p COM5 flash             ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ    –ú–æ–Ω–∏—Ç–æ—Ä—é:                        ‚îÇ
‚îÇ    - Connecting ‚Üí –∂–¥—ë–º              ‚îÇ
‚îÇ    - Writing (0-100%) ‚Üí –ø—Ä–æ–≥—Ä–µ—Å—Å    ‚îÇ
‚îÇ    - Done ‚Üí —É—Å–ø–µ—Ö                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)         ‚îÇ
‚îÇ    idf.py -p COM5 monitor           ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ    –ò—â—É –≤ –ª–æ–≥–∞—Ö:                     ‚îÇ
‚îÇ    - E (XXXX) ‚Üí –æ—à–∏–±–∫–∏              ‚îÇ
‚îÇ    - task_wdt ‚Üí watchdog            ‚îÇ
‚îÇ    - assert ‚Üí –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –±–∞–≥–∏        ‚îÇ
‚îÇ    - Free heap ‚Üí —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 6. –ê–Ω–∞–ª–∏–∑ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ             ‚îÇ
‚îÇ    –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:              ‚îÇ
‚îÇ    - –ß–∏—Ç–∞—é backtrace                ‚îÇ
‚îÇ    - –ù–∞—Ö–æ–∂—É –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Ñ–∞–π–ª/—Å—Ç—Ä–æ–∫—É  ‚îÇ
‚îÇ    - –ò—Å–ø—Ä–∞–≤–ª—è—é –∫–æ–¥                  ‚îÇ
‚îÇ    - –í–æ–∑–≤—Ä–∞—Ç –∫ —à–∞–≥—É 2               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 8.2. –ë—ã—Å—Ç—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –∫–æ–¥ –∏–∑–º–µ–Ω—ë–Ω)

```bash
# –í—Å—ë –≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
cmd /c "C:\Espressif\idf_cmd_init.bat ... && cd ... && idf.py build && idf.py -p COM5 flash"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- 1 –∫–æ–º–∞–Ω–¥–∞ –≤–º–µ—Å—Ç–æ 3-4
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ (~30 —Å–µ–∫ ‚Üí 15 —Å–µ–∫)

### 8.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—é –≤ –ø–µ—Ä–≤—ã—Ö 10 —Å–µ–∫—É–Ω–¥–∞—Ö –ª–æ–≥–æ–≤:**

```
I (298) cpu_start: App "hydroponics" version: 44d2a9d-dirty
I (305) esp_psram: PSRAM initialized, available size: 8192 KB
I (312) main_task: Started on CPU0
I (320) main_task: Calling app_main()
I (325) MAIN: ========================================
I (330) MAIN:    Hydro System Starting
I (335) MAIN: ========================================
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∞
- ‚úÖ PSRAM –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ app_main() –≤—ã–∑–≤–∞–Ω–∞
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–æ–≤–∞–ª–∞:**
- ‚ùå –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –≤ —Ü–∏–∫–ª–µ (boot loop)
- ‚ùå Panic/Abort —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞
- ‚ùå Watchdog –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

---

## 9. –ß–ï–ö–õ–ò–°–¢ –ö–ê–ß–ï–°–¢–í–ê –ü–†–û–®–ò–í–ö–ò

### –ü–µ—Ä–µ–¥ –ø—Ä–æ—à–∏–≤–∫–æ–π:
- [ ] –°–±–æ—Ä–∫–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Warnings —Ç–æ–ª—å–∫–æ –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ
- [ ] –†–∞–∑–º–µ—Ä < partition size
- [ ] –°–≤–æ–±–æ–¥–Ω–æ ‚â• 20% flash

### –ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏:
- [ ] –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (–Ω–µ boot loop)
- [ ] –ù–µ—Ç watchdog timeout –≤ –ø–µ—Ä–≤—ã–µ 60 —Å–µ–∫
- [ ] LVGL UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –≠–Ω–∫–æ–¥–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç
- [ ] –î–∞—Ç—á–∏–∫–∏ —á–∏—Ç–∞—é—Ç—Å—è (–Ω–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫ I2C)

### –î–ª–∏—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (5+ –º–∏–Ω—É—Ç):
- [ ] –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ (Free heap —Å—Ç–∞–±–∏–ª—å–Ω–æ)
- [ ] –ù–µ—Ç watchdog timeout –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ UI
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–µ—Ç crash –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## 10. –¢–ò–ü–ò–ß–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

| –ü—Ä–æ–±–ª–µ–º–∞ | –°–∏–º–ø—Ç–æ–º | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|---------|
| –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ | Free heap —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è | –î–æ–±–∞–≤–∏—Ç—å `LV_EVENT_DELETE` callbacks —Å `free()` |
| Watchdog timeout | `task_wdt triggered` | –î–æ–±–∞–≤–∏—Ç—å `esp_task_wdt_reset()` –≤ —Ü–∏–∫–ª—ã |
| Stack overflow | `stack overflow detected` | –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ –∑–∞–¥–∞—á–∏ (4096 ‚Üí 8192) |
| –î–≤–æ–π–Ω–æ–π —Ñ–æ–∫—É—Å | –î–≤–µ —Ä–∞–º–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ | –£–±—Ä–∞—Ç—å —Ä—É—á–Ω–æ–µ `set_focused()`, –¥–æ–≤–µ—Ä–∏—Ç—å screen_manager |
| –ù–µ—Ç —Ñ–æ–∫—É—Å–∞ | –≠–ª–µ–º–µ–Ω—Ç –Ω–µ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `lv_btn_create`, –¥–æ–±–∞–≤–∏—Ç—å `style_card_focused` |
| COM –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç | `port is busy` | –ó–∞–ø—É—Å—Ç–∏—Ç—å `free_com5.bat` |
| LVGL crash | Undefined behavior | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `lv_lock()` / `lv_unlock()` –≤ –∑–∞–¥–∞—á–∞—Ö |

---

## 11. –ö–û–ú–ê–ù–î–´ –ë–´–°–¢–†–û–ì–û –î–û–°–¢–£–ü–ê

```bash
# –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª (—Å–±–æ—Ä–∫–∞ + –ø—Ä–æ—à–∏–≤–∫–∞)
cmd /c "C:\Espressif\idf_cmd_init.bat esp-idf-1dcc643656a1439837fdf6ab63363005 >nul 2>&1 && cd c:\esp\hydro\hydro1.0 && idf.py build && idf.py -p COM5 flash"

# –¢–æ–ª—å–∫–æ —Å–±–æ—Ä–∫–∞ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫)
cmd /c "C:\Espressif\idf_cmd_init.bat esp-idf-1dcc643656a1439837fdf6ab63363005 >nul 2>&1 && cd c:\esp\hydro\hydro1.0 && idf.py build"

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ø–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏)
cmd /c "C:\Espressif\idf_cmd_init.bat esp-idf-1dcc643656a1439837fdf6ab63363005 >nul 2>&1 && cd c:\esp\hydro\hydro1.0 && idf.py -p COM5 monitor"

# –û—á–∏—Å—Ç–∫–∞ —Å–±–æ—Ä–∫–∏ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å)
cmd /c "C:\Espressif\idf_cmd_init.bat esp-idf-1dcc643656a1439837fdf6ab63363005 >nul 2>&1 && cd c:\esp\hydro\hydro1.0 && idf.py fullclean && idf.py build"

# –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞
c:\esp\hydro\hydro1.0\free_com5.bat
```

---

## 12. –ú–û–ù–ò–¢–û–†–ò–ù–ì –°–ü–ï–¶–ò–§–ò–ß–ù–´–• –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

### 12.1. LVGL UI

**–ö–ª—é—á–µ–≤—ã–µ –ª–æ–≥–∏:**
```
I (X) SCREEN_MANAGER: Showing screen 'pid_intelligent_dashboard'
I (X) SCREEN_LIFECYCLE: Creating screen instance
I (X) PID_DETAIL: –î–µ—Ç–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω –ø–æ–∫–∞–∑–∞–Ω –¥–ª—è pH Down
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –≠–∫—Ä–∞–Ω –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
- –î–≤–æ–π–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `destroy_on_hide`
- –ó–∞–≤–∏—Å–∞–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ ‚Üí –¥–æ–±–∞–≤–∏—Ç—å `esp_task_wdt_reset()`

### 12.2. Adaptive PID

**–ö–ª—é—á–µ–≤—ã–µ –ª–æ–≥–∏:**
```
I (X) ADAPTIVE_PID: –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –Ω–∞—Å–æ—Å–∞ 0
I (X) ADAPTIVE_PID: –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ: —Ç–µ–∫—É—â–µ–µ=7.2, —á–µ—Ä–µ–∑ 30 —Å–µ–∫=6.8
I (X) ADAPTIVE_PID: –ë—É—Ñ–µ—Ä–Ω–∞—è —ë–º–∫–æ—Å—Ç—å –≤—ã—É—á–µ–Ω–∞: 15.5L
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ –æ–±—É—á–∞–µ—Ç—Å—è ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å–ª–æ–≤–∏—è –≤ `adaptive_pid.c`
- –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ NaN ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ—á–µ–∫?)
- NVS –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `adaptive_pid_save_to_nvs()`

### 12.3. –î–∞—Ç—á–∏–∫–∏

**–ö–ª—é—á–µ–≤—ã–µ –ª–æ–≥–∏:**
```
I (X) SHT3X: Temperature=24.5¬∞C, Humidity=65.3%
W (X) TREMA_PH: CRC –æ—à–∏–±–∫–∞, –ø–æ–≤—Ç–æ—Ä...
E (X) I2C: I2C transaction failed
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- CRC errors ‚Üí –ø–ª–æ—Ö–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ø–æ–º–µ—Ö–∏
- I2C failed ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å pull-up —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã, —Å–∫–æ—Ä–æ—Å—Ç—å —à–∏–Ω—ã
- Timeout ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ –¥—Ä–∞–π–≤–µ—Ä–µ

---

## 13. –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò

### 13.1. –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ –∫–æ–¥

```c
// –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–∞–º—è—Ç–∏
ESP_LOGI(TAG, "Free heap: %lu, largest block: %lu", 
         esp_get_free_heap_size(), 
         heap_caps_get_largest_free_block(MALLOC_CAP_8BIT));

// –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å—Ç–µ–∫–∞
UBaseType_t stack = uxTaskGetStackHighWaterMark(NULL);
ESP_LOGI(TAG, "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–≤–æ–±–æ–¥–Ω—ã–π —Å—Ç–µ–∫: %lu –±–∞–π—Ç", stack * 4);

// –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ LVGL –ø–∞–º—è—Ç–∏
lv_mem_monitor_t mon;
lv_mem_monitor(&mon);
ESP_LOGI(TAG, "LVGL: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ %lu, —Å–≤–æ–±–æ–¥–Ω–æ %lu", 
         mon.total_size - mon.free_size, mon.free_size);

// –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–¥–∞—á
char task_list[1024];
vTaskList(task_list);
ESP_LOGI(TAG, "Tasks:\n%s", task_list);
```

### 13.2. ESP-IDF –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

```bash
# –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
idf.py size-components

# –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
idf.py size-files

# Menuconfig (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫)
idf.py menuconfig
```

---

## 14. BEST PRACTICES

### 14.1. –ü–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –ø—Ä–æ—à–∏–≤–∫–æ–π

1. ‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞ (exit code 0)
2. ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö warnings
3. ‚úÖ COM –ø–æ—Ä—Ç –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω
4. ‚úÖ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ

### 14.2. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø—Ä–æ—à–∏–≤–∫–∏

1. ‚úÖ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å (–Ω–µ—Ç boot loop)
2. ‚úÖ –ü–µ—Ä–≤—ã–µ 10 —Å–µ–∫ –±–µ–∑ –æ—à–∏–±–æ–∫
3. ‚úÖ UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
4. ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç

### 14.3. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ `CMakeLists.txt`
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (REQUIRES/PRIV_REQUIRES)
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
5. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å `esp_task_wdt_reset()` –≤ —Ü–∏–∫–ª—ã
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ –∑–∞–¥–∞—á–∏

---

**–≠—Ç–æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Å–±–æ—Ä–∫—É, –ø—Ä–æ—à–∏–≤–∫—É –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø—Ä–æ–µ–∫—Ç–∞ ESP-IDF!** üöÄ‚ú®

