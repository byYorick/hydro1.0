# üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø: –ü—Ä–æ—à–∏–≤–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏

**–í–µ—Ä—Å–∏—è:** 3.0.0-advanced-final  
**–†–∞–∑–º–µ—Ä:** 1.32 MB  
**–î–∞—Ç–∞:** 2025-10-16  

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û!

–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–∞ **–°–¢–ê–†–ê–Ø –ø—Ä–æ—à–∏–≤–∫–∞** –±–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π!

**–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:**
```
‚ùå E (4575) SYS_TASKS: Failed to create notification_task
   ‚Üí Notification task –ù–ï —Å–æ–∑–¥–∞–µ—Ç—Å—è (—Å—Ç–µ–∫ –±—ã–ª —Å–ª–∏—à–∫–æ–º –º–∞–ª)
   
‚ùå I2C –æ—à–∏–±–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–π —Ü–∏–∫–ª –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
   ‚Üí Auto-disable –¥–∞—Ç—á–∏–∫–æ–≤ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç
   
‚ùå –ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è "LVGL task registered in watchdog"
   ‚Üí –°—Ç–∞—Ä—ã–π –∫–æ–¥ –±–µ–∑ watchdog —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
```

---

## ‚úÖ –ß–¢–û –í –ù–û–í–û–ô –ü–†–û–®–ò–í–ö–ï

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω notification_task:
```
–°—Ç–µ–∫: 2048 ‚Üí 2560 bytes ‚úÖ
–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ!
```

### 2. –í—Å–µ —Å—Ç–µ–∫–∏ —É–≤–µ–ª–∏—á–µ–Ω—ã –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏:
```
SENSOR:       4096 bytes (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
DISPLAY:      3072 bytes (–±—ã–ª–æ 2560)  ‚Üê +512 bytes
NOTIFICATION: 2560 bytes (–±—ã–ª–æ 2048)  ‚Üê +512 bytes ‚úÖ –ö–†–ò–¢–ò–ß–ù–û!
DATALOGGER:   3584 bytes (–±—ã–ª–æ 3072)  ‚Üê +512 bytes
SCHEDULER:    2048 bytes (–±—ã–ª–æ 1536)  ‚Üê +512 bytes
PH_EC:        2048 bytes (–±—ã–ª–æ 1536)  ‚Üê +512 bytes
ENCODER:      2048 bytes (–±—ã–ª–æ 2048)  (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
LVGL:        24576 bytes (–±—ã–ª–æ 20480) ‚Üê +4096 bytes
```

### 3. LVGL Task Priority = 7:
```
–ë—ã–ª–æ: 2 (–Ω–∏–∂–µ –≤—Å–µ—Ö)
–°—Ç–∞–ª–æ: 7 (–≤—ã—à–µ Display/Encoder) ‚úÖ
```

### 4. Watchdog:
```
‚úÖ LVGL task –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
‚úÖ WDT reset –¥–æ/–ø–æ—Å–ª–µ lv_timer_handler()
‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è –º—å—é—Ç–µ–∫—Å–∞
```

### 5. Auto-disable –¥–∞—Ç—á–∏–∫–æ–≤:
```
‚úÖ –ü–æ—Å–ª–µ 10 –æ—à–∏–±–æ–∫ ‚Üí –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ 60 —Å–µ–∫
‚úÖ –ê–≤—Ç–æ–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 60 —Å–µ–∫
‚úÖ –ù–µ—Ç —Å–ø–∞–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```

---

## üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ü–†–û–®–ò–í–ö–ò

### –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –º–æ–Ω–∏—Ç–æ—Ä

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω monitor –Ω–∞–∂–º–∏—Ç–µ:  
**`Ctrl+C`** (–¥–≤–∞-—Ç—Ä–∏ —Ä–∞–∑–∞ –µ—Å–ª–∏ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è)

### –®–∞–≥ 2: –ü—Ä–æ—à–µ–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é

```bash
idf.py -p COM5 flash monitor
```

---

## ‚úÖ –û–ñ–ò–î–ê–ï–ú–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –õ–û–ì–ê–•

### ‚úÖ –ù–û–í–û–ï - –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:

```
I (xxx) LCD: Display buffer 1 allocated in PSRAM: 19200 bytes (40 lines)
I (xxx) LCD: Display buffer 2 allocated in PSRAM: 19200 bytes (40 lines)
I (xxx) LCD: LVGL task registered in watchdog  ‚Üê –ù–û–í–û–ï! ‚úÖ

I (xxx) SYS_TASKS: [OK] notification_task created  ‚Üê –ò–°–ü–†–ê–í–õ–ï–ù–û! ‚úÖ

W (10000) SENSOR_MGR: Sensor 0 disabled until 70000 ms (too many errors)  ‚Üê –ù–û–í–û–ï! ‚úÖ
W (10000) SENSOR_MGR: Sensor 3 disabled until 70000 ms (too many errors)  ‚Üê –ù–û–í–û–ï! ‚úÖ
W (10000) SENSOR_MGR: Sensor 4 disabled until 70000 ms (too many errors)  ‚Üê –ù–û–í–û–ï! ‚úÖ

W (xxx) LCD: LVGL held mutex for XXX ms (blocking Display task!)  ‚Üê –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê! ‚úÖ

(–ß–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥ - –º–∏–Ω–∏–º—É–º I2C –æ—à–∏–±–æ–∫)
```

### ‚ùå –ò–°–ß–ï–ó–ù–ï–¢ - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
‚ùå E (xxx) SYS_TASKS: Failed to create notification_task
‚ùå –°–æ—Ç–Ω–∏ I2C –æ—à–∏–±–æ–∫ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
‚ùå E (xxx) task_wdt: Task watchdog got triggered
‚ùå W (xxx) LVGL_MAIN: Failed to get LVGL lock (–∫–∞–∂–¥—ã–µ 600–º—Å)
```

---

## üìä –§–ò–ù–ê–õ–¨–ù–´–ï –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö–ò

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  –ü–∞–º—è—Ç—å:                                               ‚ïë
‚ïë  ‚îú‚îÄ DRAM:  266 KB / 328 KB (77.8%)  ‚úÖ OK             ‚ïë
‚ïë  ‚îú‚îÄ PSRAM:  57 KB / 2-8 MB  (<1%)   ‚úÖ –ú–Ω–æ–≥–æ          ‚ïë
‚ïë  ‚îî‚îÄ Flash: 1.32 MB / 3.83 MB (34%)  ‚úÖ –ó–∞–ø–∞—Å          ‚ïë
‚ïë                                                        ‚ïë
‚ïë  –°—Ç–µ–∫–∏ (—É–≤–µ–ª–∏—á–µ–Ω—ã –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏):                    ‚ïë
‚ïë  ‚îú‚îÄ LVGL:         24 KB  (–±—ã–ª–æ 20 KB) ‚Üê +20%          ‚ïë
‚ïë  ‚îú‚îÄ Notification: 2.5 KB (–±—ã–ª–æ 2 KB)  ‚Üê –ö–†–ò–¢–ò–ß–ù–û!     ‚ïë
‚ïë  ‚îî‚îÄ –û—Å—Ç–∞–ª—å–Ω—ã–µ:   ~15 KB  (—É–≤–µ–ª–∏—á–µ–Ω—ã –Ω–∞ ~10%)          ‚ïë
‚ïë                                                        ‚ïë
‚ïë  –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:                                          ‚ïë
‚ïë  ‚îú‚îÄ ‚úÖ Watchdog –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω                       ‚ïë
‚ïë  ‚îú‚îÄ ‚úÖ LVGL priority –ø–æ–≤—ã—à–µ–Ω (2‚Üí7)                    ‚ïë
‚ïë  ‚îú‚îÄ ‚úÖ Auto-disable –¥–∞—Ç—á–∏–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç                 ‚ïë
‚ïë  ‚îú‚îÄ ‚úÖ SPI –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω (queue x3)                   ‚ïë
‚ïë  ‚îú‚îÄ ‚úÖ Notification queue x4                           ‚ïë
‚ïë  ‚îî‚îÄ ‚úÖ WiFi –≤–∫–ª—é—á–µ–Ω                                   ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

## üéØ –ß–¢–û –î–ï–õ–ê–¢–¨ –°–ï–ô–ß–ê–°

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –º–æ–Ω–∏—Ç–æ—Ä–∞  ‚îÇ
‚îÇ  2. idf.py -p COM5 flash monitor ‚îÇ
‚îÇ  3. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ù–û–í–´–ú–ò –ª–æ–≥–∞–º–∏     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–æ—à–∏–≤–∞–π—Ç–µ!** –≠—Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å–æ –≤—Å–µ–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ –ø–∞–º—è—Ç–∏ –∏ —Å—Ç–µ–∫–∞! üöÄ
