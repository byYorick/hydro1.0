# Quick Reference: Navigation System Refactoring

**–ü—Ä–æ–µ–∫—Ç:** Hydroponics Monitor v3.0  
**–î–∞—Ç–∞:** 2025-10-08

---

## üìã –î–æ–∫—É–º–µ–Ω—Ç—ã

| –î–æ–∫—É–º–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –†–∞–∑–º–µ—Ä |
|----------|-----------|--------|
| **[NAVIGATION_REFACTORING_PLAN.md](NAVIGATION_REFACTORING_PLAN.md)** | –ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ | 52 —Å—Ç—Ä. |
| **[NAVIGATION_REFACTORING_SUMMARY.md](NAVIGATION_REFACTORING_SUMMARY.md)** | –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ | 8 —Å—Ç—Ä. |
| **–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç** | –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞ | 2 —Å—Ç—Ä. |

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ –≤ –æ–¥–Ω–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏

–¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏–º–µ–µ—Ç **70% –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**, **–∂–µ—Å—Ç–∫—É—é —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å** –∏ **–ø–ª–æ—Ö—É—é –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ 5+ –º–µ—Å—Ç–∞—Ö –∏ 200+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞.

---

## ‚ú® –†–µ—à–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏

**Screen Manager Pattern** - –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π, —á—Ç–æ —Å–æ–∫—Ä–∞—â–∞–µ—Ç –∫–æ–¥ –Ω–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ —Å 200+ —Å—Ç—Ä–æ–∫ –¥–æ ~20 —Å—Ç—Ä–æ–∫.

---

## üìä –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| –ö–æ–¥ –Ω–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ | 200+ —Å—Ç—Ä–æ–∫ | ~20 —Å—Ç—Ä–æ–∫ | **90% ‚Üì** |
| –í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è | 2+ —á–∞—Å–∞ | 30 –º–∏–Ω—É—Ç | **75% ‚Üì** |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | 70% | <10% | **85% ‚Üì** |
| –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ | 25+ | 0 | **100% ‚Üì** |
| –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ | 0% | 80% | **80% ‚Üë** |

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –î–æ (–ø—Ä–æ–±–ª–µ–º–Ω–∞—è)
```
lvgl_ui.c (3345 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ 25+ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ 17 –ø–æ—Ö–æ–∂–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π create_*_screen()
‚îú‚îÄ‚îÄ switch —Å 27 case –≤ show_screen()
‚îú‚îÄ‚îÄ switch —Å 27 case –≤ back_button_event_cb()
‚îî‚îÄ‚îÄ –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
```

### –ü–æ—Å–ª–µ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
```
screen_manager/           # –Ø–¥—Ä–æ (600 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ screen_manager.c      # API
‚îú‚îÄ‚îÄ screen_registry.c     # –†–µ–µ—Å—Ç—Ä
‚îú‚îÄ‚îÄ screen_navigator.c    # –ù–∞–≤–∏–≥–∞—Ü–∏—è
‚îî‚îÄ‚îÄ screen_lifecycle.c    # –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

screens/                  # –ú–æ–¥—É–ª—å–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã
‚îú‚îÄ‚îÄ base/                 # –®–∞–±–ª–æ–Ω—ã (300 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ main_screen.c         # 50 —Å—Ç—Ä–æ–∫
‚îú‚îÄ‚îÄ sensor/*.c            # –ø–æ 30 —Å—Ç—Ä–æ–∫
‚îî‚îÄ‚îÄ system/*.c            # –ø–æ 40 —Å—Ç—Ä–æ–∫

widgets/                  # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ (400 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ –í–∏–¥–∂–µ—Ç—ã –¥–ª—è –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤
```

---

## üíª –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞

```c
// 1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª: screens/my_screen.c

static lv_obj_t* my_screen_create(void *params) {
    lv_obj_t *screen = screen_base_create(&config);
    widget_create_back_button(screen);
    // ... —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
    return screen;
}

esp_err_t my_screen_init(void) {
    screen_config_t config = {
        .id = "my_screen",
        .title = "My Screen",
        .parent_id = "main",              // ‚Üê –ù–∞–≤–∏–≥–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è!
        .create_fn = my_screen_create,
    };
    return screen_register(&config);
}

// 2. –í main.c
my_screen_init();

// 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
screen_show("my_screen", NULL);  // –ü–æ–∫–∞–∑–∞—Ç—å
screen_go_back();                 // –ù–∞–∑–∞–¥ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫ parent_id)
```

**–í—Å—ë!** –ë–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ.

---

## üöÄ –í–∞—Ä–∏–∞–Ω—Ç—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### ‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π: MVP (1 –Ω–µ–¥–µ–ª—è)

```
–î–µ–Ω—å 1-3: Screen Manager Core
–î–µ–Ω—å 4-5: –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω + 2-3 —ç–∫—Ä–∞–Ω–∞ –¥–∞—Ç—á–∏–∫–æ–≤
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–±–æ—Ç–∞—é—â–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø–æ–¥—Ö–æ–¥–∞

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 1: –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (3 –Ω–µ–¥–µ–ª–∏)

```
–ù–µ–¥–µ–ª—è 1: Core + Widgets
–ù–µ–¥–µ–ª—è 2: –í—Å–µ —ç–∫—Ä–∞–Ω—ã
–ù–µ–¥–µ–ª—è 3: –¢–µ—Å—Ç—ã + –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 2: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1 –Ω–µ–¥–µ–ª—è)

```
- Screen Factory
- –¢–∞–±–ª–∏—Ü–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –í–∏–¥–∂–µ—Ç—ã
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** -30% –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ —Ä–µ—à–∞–µ—Ç –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã)

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - 1 —Ñ–∞–π–ª –¥–ª—è –Ω–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∞–º–∞
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å —ç–∫—Ä–∞–Ω—ã
4. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–≥—Ä—É–∑–∫–∞ –ø–∞–º—è—Ç–∏

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏

1. **–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** ‚Üí –§–∞–∑–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥
2. **–†–∞–±–æ—Ç–∞ —ç–Ω–∫–æ–¥–µ—Ä–∞** ‚Üí –¢–µ—Å—Ç—ã –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å** ‚Üí –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è + –ø—Ä–∏–º–µ—Ä—ã

---

## üìû –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ—á–∏—Ç–∞—Ç—å [Summary](NAVIGATION_REFACTORING_SUMMARY.md)
2. ‚úÖ –ò–∑—É—á–∏—Ç—å [–ø–æ–ª–Ω—ã–π –ø–ª–∞–Ω](NAVIGATION_REFACTORING_PLAN.md)
3. ‚úÖ –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ –æ –≤–Ω–µ–¥—Ä–µ–Ω–∏–∏
4. ‚úÖ –ù–∞—á–∞—Ç—å —Å MVP

---

## üéì –í—ã–≤–æ–¥

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ **–Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**:

- ‚úÖ –£–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –Ω–∞ **90%**
- ‚úÖ –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
- ‚úÖ –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ (—Ñ–∞–∑–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥)
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞ (MVP –∑–∞ –Ω–µ–¥–µ–ª—é)

**–ù–∞—á–Ω–∏—Ç–µ —Å MVP –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥—Ö–æ–¥–∞!**

---

**–ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª:** AI Assistant (Claude)  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  
**–í–µ—Ä—Å–∏—è:** 1.0

