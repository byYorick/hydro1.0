# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–≤

**–î–∞—Ç–∞:** 10 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** Hydro 3.0

## üîç –í–´–Ø–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 1: –ò–∑–±—ã—Ç–æ—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤ (–ö–†–ò–¢–ò–ß–ù–û!)

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- **39 –≤—ã–∑–æ–≤–æ–≤** `lv_obj_set_style_text_font(&montserrat_ru, 0)` –≤ —ç–∫—Ä–∞–Ω–∞—Ö
- **–ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤:** –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è –≤ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –æ–±—ä–µ–∫—Ç–∞
- **–ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:** ~50-100 –º–∫—Å –Ω–∞ –≤—ã–∑–æ–≤ √ó 39 = **2-4 –º—Å**

**–ü—Ä–∏–º–µ—Ä—ã –∏–∑ –∫–æ–¥–∞:**

```c
// pid_tuning_screen.c - —Å—Ç—Ä–æ–∫–∏ 103, 120, 143, 166, 189, 204, 211, 216
lv_obj_set_style_text_font(title, &montserrat_ru, 0);
lv_obj_set_style_text_font(kp_label, &montserrat_ru, 0);
lv_obj_set_style_text_font(ki_label, &montserrat_ru, 0);
// ... –∏ —Ç–∞–∫ 8 —Ä–∞–∑ –≤ –æ–¥–Ω–æ–º —ç–∫—Ä–∞–Ω–µ!

// pump_calibration_screen.c - 8 —Ä–∞–∑
// pid_thresholds_screen.c - 7 —Ä–∞–∑
// –ò —Ç–∞–∫ –¥–∞–ª–µ–µ...
```

**–ü–†–ò–ß–ò–ù–ê:**
–®—Ä–∏—Ñ—Ç `montserrat_ru` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ –î–ï–§–û–õ–¢–ù–´–ô –≤ `init_styles()` (lvgl_ui.c:469-476), –Ω–æ –∫–∞–∂–¥—ã–π —ç–∫—Ä–∞–Ω **–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç** –µ–≥–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ label!

**–†–ï–®–ï–ù–ò–ï:**
```c
// –ë–´–õ–û (–º–µ–¥–ª–µ–Ω–Ω–æ):
lv_obj_t *label = lv_label_create(screen);
lv_obj_set_style_text_font(label, &montserrat_ru, 0);  // ‚Üê –ò–ó–ë–´–¢–û–ß–ù–û!
lv_obj_set_style_text_color(label, lv_color_white(), 0);

// –°–¢–ê–õ–û (–±—ã—Å—Ç—Ä–æ):
lv_obj_t *label = lv_label_create(screen);
lv_obj_add_style(label, &style_label, 0);  // ‚Üê –®—Ä–∏—Ñ—Ç —É–∂–µ –≤ —Å—Ç–∏–ª–µ!
// –ò–õ–ò –≤–æ–æ–±—â–µ –Ω–∏—á–µ–≥–æ - –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —à—Ä–∏—Ñ—Ç —É–∂–µ montserrat_ru
```

**–≠–§–§–ï–ö–¢:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞ **2-4 –º—Å**

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 2: –ê–±—Å–æ–ª—é—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (lv_obj_align)

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- **13 –≤—ã–∑–æ–≤–æ–≤** `lv_obj_center()` –≤ PID —ç–∫—Ä–∞–Ω–∞—Ö
- **30+ –≤—ã–∑–æ–≤–æ–≤** `lv_obj_align()` —Å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º–∏ –ø–æ–∑–∏—Ü–∏–π
- **–ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤:** –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–æ–¥–∏—Ç–µ–ª—è + child

**–ü—Ä–∏–º–µ—Ä—ã:**

```c
// pid_detail_screen.c - –ù–ï–≠–§–§–ï–ö–¢–ò–í–ù–û!
lv_obj_t *tune_btn = lv_btn_create(screen);
lv_obj_align(tune_btn, LV_ALIGN_TOP_LEFT, 10, btn_y_start);      // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ 1

lv_obj_t *advanced_btn = lv_btn_create(screen);
lv_obj_align(advanced_btn, LV_ALIGN_TOP_RIGHT, -10, btn_y_start); // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ 2

lv_obj_t *thresh_btn = lv_btn_create(screen);
lv_obj_align(thresh_btn, LV_ALIGN_TOP_LEFT, 10, btn_y_start + btn_spacing); // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ 3

// ... –µ—â–µ 3 –∫–Ω–æ–ø–∫–∏ —Å align
```

**–†–ï–®–ï–ù–ò–ï:**
```c
// –°–¢–ê–õ–û (–±—ã—Å—Ç—Ä–æ):
lv_obj_t *button_container = lv_obj_create(screen);
lv_obj_set_flex_flow(button_container, LV_FLEX_FLOW_COLUMN);
lv_obj_set_style_pad_row(button_container, 8, 0);

// –ö–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ
lv_obj_t *tune_btn = lv_btn_create(button_container);  // –ê–≤—Ç–æ-–ø–æ–∑–∏—Ü–∏—è!
lv_obj_t *advanced_btn = lv_btn_create(button_container);  // –ê–≤—Ç–æ-–ø–æ–∑–∏—Ü–∏—è!
// –ù–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–π!
```

**–≠–§–§–ï–ö–¢:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–∞ **1-2 –º—Å** + —á–∏—â–µ –∫–æ–¥

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 3: –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- **6 –∫–Ω–æ–ø–æ–∫** –≤ pid_detail_screen (–ø–æ ~8 —Å—Ç—Ä–æ–∫ –∫–∞–∂–¥–∞—è = 48 —Å—Ç—Ä–æ–∫!)
- **–ü–∞—Ç—Ç–µ—Ä–Ω –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è** –≤–æ –º–Ω–æ–≥–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö

**–ü—Ä–∏–º–µ—Ä –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥–∞:**

```c
// pid_detail_screen.c - —Å—Ç—Ä–æ–∫–∏ 165-225 (60 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞!)
lv_obj_t *tune_btn = lv_btn_create(screen);
lv_obj_set_size(tune_btn, 100, 32);
lv_obj_align(tune_btn, LV_ALIGN_TOP_LEFT, 10, btn_y_start);
lv_obj_set_style_bg_color(tune_btn, lv_color_hex(0x2196F3), 0);
widget_add_click_handler(tune_btn, on_tune_click, NULL);
lv_obj_t *tune_label = lv_label_create(tune_btn);
lv_label_set_text(tune_label, "–ù–∞—Å—Ç—Ä.");
lv_obj_center(tune_label);

// –¢–û –ñ–ï –°–ê–ú–û–ï –¥–ª—è advanced_btn
// –¢–û –ñ–ï –°–ê–ú–û–ï –¥–ª—è thresh_btn
// –¢–û –ñ–ï –°–ê–ú–û–ï –¥–ª—è reset_btn
// –¢–û –ñ–ï –°–ê–ú–û–ï –¥–ª—è test_btn
// –¢–û –ñ–ï –°–ê–ú–û–ï –¥–ª—è graph_btn
```

**–†–ï–®–ï–ù–ò–ï:**
```c
// –°–æ–∑–¥–∞—Ç—å helper:
typedef struct {
    const char *text;
    lv_event_cb_t callback;
    lv_color_t color;
} button_config_t;

lv_obj_t* widget_create_styled_button(lv_obj_t *parent, const button_config_t *cfg) {
    lv_obj_t *btn = lv_btn_create(parent);
    lv_obj_set_size(btn, 100, 32);
    lv_obj_set_style_bg_color(btn, cfg->color, 0);
    widget_add_click_handler(btn, cfg->callback, NULL);
    
    lv_obj_t *label = lv_label_create(btn);
    lv_label_set_text(label, cfg->text);
    lv_obj_center(label);
    
    return btn;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
button_config_t buttons[] = {
    {"–ù–∞—Å—Ç—Ä.", on_tune_click, lv_color_hex(0x2196F3)},
    {"–†–∞—Å—à–∏—Ä.", on_advanced_click, lv_color_hex(0x9C27B0)},
    // ...
};
for (int i = 0; i < 6; i++) {
    widget_create_styled_button(container, &buttons[i]);
}
```

**–≠–§–§–ï–ö–¢:** 
- –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ **40 —Å—Ç—Ä–æ–∫**
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞ **0.5-1 –º—Å**
- –ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 4: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ snprintf() –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –Ω–∞—Å–æ—Å–æ–≤:** 6 –Ω–∞—Å–æ—Å–æ–≤ √ó 2 snprintf() = **12 –≤—ã–∑–æ–≤–æ–≤**
- **PID advanced:** 1 –û–ì–†–û–ú–ù–´–ô snprintf —Å 9 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (—Å—Ç—Ä–æ–∫–∞ 72-88)
- **PID detail:** 1 snprintf —Å 10 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (—Å—Ç—Ä–æ–∫–∞ 133-151)

**–ü—Ä–∏–º–µ—Ä:**

```c
// pid_advanced_screen.c - —Å—Ç—Ä–æ–∫–∏ 72-88
snprintf(info_text, sizeof(info_text),
         "–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:\n\n"
         "Output: %.1f - %.1f –º–ª\n"
         "Deadband: %.2f\n"
         "Integral max: %.1f\n"
         "Sample time: %.0f –º—Å\n"
         "Max dose: %.1f –º–ª\n"
         "Cooldown: %lu –º—Å\n"
         "Daily limit: %lu –º–ª",
         config->pump_pid[g_pump_idx].output_min,      // 9 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤!
         config->pump_pid[g_pump_idx].output_max,
         config->pump_pid[g_pump_idx].deadband,
         // ... –µ—â–µ 6 –ø–æ–ª–µ–π
);
```

**–ù–ê–ö–õ–ê–î–ù–´–ï –†–ê–°–•–û–î–´:**
- snprintf() - –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–æ—Ä–º–∞—Ç–∞ + 9 –∫–æ–Ω–≤–µ—Ä—Å–∏–π float‚Üístring
- ~**500-1000 –º–∫—Å** –Ω–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤

**–†–ï–®–ï–ù–ò–ï:**
```c
// –†–∞–∑–±–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ label'–æ–≤ (–±–µ–∑ snprintf)
// –ò–õ–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å lv_label_set_text_fmt() (–±—ã—Å—Ç—Ä–µ–µ —á–µ–º snprintf)
lv_label_set_text_fmt(info_label, 
    "Output: %.1f-%.1f –º–ª\nDeadband: %.2f",
    config->pump_pid[idx].output_min,
    config->pump_pid[idx].output_max,
    config->pump_pid[idx].deadband
);
```

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 5: –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –Ω–∞—Å–æ—Å–æ–≤ - 6 –≤–∏–¥–∂–µ—Ç–æ–≤ √ó 10 –æ–±—ä–µ–∫—Ç–æ–≤

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- **6 –Ω–∞—Å–æ—Å–æ–≤** √ó ~10 LVGL –æ–±—ä–µ–∫—Ç–æ–≤ –∫–∞–∂–¥—ã–π = **60 –æ–±—ä–µ–∫—Ç–æ–≤**
- –§—É–Ω–∫—Ü–∏—è `create_pump_widget()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è 6 —Ä–∞–∑ (—Å—Ç—Ä–æ–∫–∞ 309)
- **–ö–∞–∂–¥—ã–π widget:**
  - 1 container
  - 2 labels (name, rate)
  - 2 encoder_value –≤–∏–¥–∂–µ—Ç–∞ (time, volume)
  - 2 –∫–Ω–æ–ø–∫–∏ (calibrate, save)
  - 1 status label

**–ö–æ–¥:** `pump_calibration_screen.c` —Å—Ç—Ä–æ–∫–∏ 164-262 (98 —Å—Ç—Ä–æ–∫!)

**–ü–†–û–ë–õ–ï–ú–ê:**
```c
// –í create_pump_widget() - —Å—Ç—Ä–æ–∫–∏ 175-179
lv_obj_set_style_bg_color(widget->container, lv_color_hex(0x2a2a2a), 0);
lv_obj_set_style_border_color(widget->container, lv_color_hex(0x444444), 0);
lv_obj_set_style_border_width(widget->container, 1, 0);
lv_obj_set_style_radius(widget->container, 8, 0);
lv_obj_set_style_pad_all(widget->container, 6, 0);
// 5 –≤—ã–∑–æ–≤–æ–≤ lv_obj_set_style –¥–ª—è –ö–ê–ñ–î–û–ì–û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
// 6 –Ω–∞—Å–æ—Å–æ–≤ √ó 5 –≤—ã–∑–æ–≤–æ–≤ = 30 –≤—ã–∑–æ–≤–æ–≤!
```

**–†–ï–®–ï–ù–ò–ï:**
```c
// –°–æ–∑–¥–∞—Ç—å –°–¢–ò–õ–¨ –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ (–æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ init):
lv_style_t style_pump_widget;
lv_style_init(&style_pump_widget);
lv_style_set_bg_color(&style_pump_widget, lv_color_hex(0x2a2a2a));
lv_style_set_border_color(&style_pump_widget, lv_color_hex(0x444444));
lv_style_set_border_width(&style_pump_widget, 1);
lv_style_set_radius(&style_pump_widget, 8);
lv_style_set_pad_all(&style_pump_widget, 6);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–û–î–ò–ù –≤—ã–∑–æ–≤ –≤–º–µ—Å—Ç–æ 5!):
lv_obj_add_style(widget->container, &style_pump_widget, 0);
```

**–≠–§–§–ï–ö–¢:** 
- 30 –≤—ã–∑–æ–≤–æ–≤ ‚Üí 6 –≤—ã–∑–æ–≤–æ–≤ (—Å–Ω–∏–∂–µ–Ω–∏–µ –≤ 5 —Ä–∞–∑!)
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–∞ **1-2 –º—Å**

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 6: –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ create —Ñ—É–Ω–∫—Ü–∏—è—Ö

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- **32 –≤—ã–∑–æ–≤–∞** ESP_LOGI/ESP_LOGD –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö —Å–æ–∑–¥–∞–Ω–∏—è
- **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞:** 6 –Ω–∞—Å–æ—Å–æ–≤ √ó —Å–æ–∑–¥–∞–Ω–∏–µ = –º–∏–Ω–∏–º—É–º 6 –ª–æ–≥–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
```c
// pump_calibration_screen.c - —Å—Ç—Ä–æ–∫–∞ 271
ESP_LOGI(TAG, "–°–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏");

// screen_lifecycle.c - —Å—Ç—Ä–æ–∫–∞ 247
ESP_LOGI(TAG, "Creating screen '%s'...", screen_id);

// –ò –µ—â–µ ~30 –ª–æ–≥–æ–≤ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
```

**ESP_LOGI —á–µ—Ä–µ–∑ UART:**
- –°–∫–æ—Ä–æ—Å—Ç—å UART: 115200 baud
- 1 —Å–∏–º–≤–æ–ª = ~87 –º–∫—Å
- –õ–æ–≥ "–°–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏" (40 —Å–∏–º–≤–æ–ª–æ–≤) = **3.5 –º—Å!**

**–†–ï–®–ï–ù–ò–ï:**
```c
// –ë–´–õ–û:
ESP_LOGI(TAG, "–°–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏");

// –°–¢–ê–õ–û:
ESP_LOGD(TAG, "–°–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏");  // –¢–æ–ª—å–∫–æ –≤ DEBUG —Ä–µ–∂–∏–º–µ
```

**–≠–§–§–ï–ö–¢:** –≠–∫–æ–Ω–æ–º–∏—è **5-10 –º—Å** –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞

---

## üìä –û–ë–©–ò–ô –ê–ù–ê–õ–ò–ó –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

### PID Detail Screen (—Å–∞–º—ã–π –ø—Ä–æ–±–ª–µ–º–Ω—ã–π)

**–°–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã:** 16
- 1 screen
- 1 status_bar (–≤–Ω—É—Ç—Ä–∏ 2 –æ–±—ä–µ–∫—Ç–∞)
- 1 title label
- 1 info_container
- 1 info_label (—Å –ë–û–õ–¨–®–ò–ú —Ç–µ–∫—Å—Ç–æ–º)
- 6 –∫–Ω–æ–ø–æ–∫ √ó 2 –æ–±—ä–µ–∫—Ç–∞ –∫–∞–∂–¥–∞—è (button + label) = 12
- 1 back button (–≤–Ω—É—Ç—Ä–∏ 2 –æ–±—ä–µ–∫—Ç–∞)

**–ò—Ç–æ–≥–æ:** ~22 LVGL –æ–±—ä–µ–∫—Ç–∞

**–£–∑–∫–∏–µ –º–µ—Å—Ç–∞:**

| –û–ø–µ—Ä–∞—Ü–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –í—Ä–µ–º—è (–º—Å) | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----------|------------|-----------|
| lv_obj_create | 16 | 5-8 | –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ |
| lv_obj_set_style_text_font | 2 | 0.2 | –ò–∑–±—ã—Ç–æ—á–Ω–æ! |
| snprintf (256 –±–∞–π—Ç) | 1 | 1.0 | –ë–æ–ª—å—à–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| lv_obj_align | 8 | 1.0 | –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ |
| lv_obj_center | 6 | 0.8 | –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ |
| lv_label_set_text | 8 | 0.5 | –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞ |
| ESP_LOGI | 1 | 3.5 | UART –ª–æ–≥! |
| **–ò–¢–û–ì–û** | - | **12-15 –º—Å** | **–ß–∏—Å—Ç–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ** |

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
- widget_create_status_bar() - 2-3 –º—Å
- widget_create_back_button() - 1-2 –º—Å
- config_manager_get_cached() - 0.5 –º—Å
- **–û–ë–©–ï–ï –í–†–ï–ú–Ø:** **15-20 –º—Å**

---

### Pump Calibration Screen (–°–ê–ú–´–ô –¢–Ø–ñ–ï–õ–´–ô!)

**–°–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã:** 
- 6 –Ω–∞—Å–æ—Å–æ–≤ √ó 10 –æ–±—ä–µ–∫—Ç–æ–≤ = **60+ –æ–±—ä–µ–∫—Ç–æ–≤**
- –ö–∞–∂–¥—ã–π –Ω–∞—Å–æ—Å:
  - 1 container + 5 style calls
  - 2 labels (name, rate) + style calls
  - 2 encoder_value –≤–∏–¥–∂–µ—Ç–∞ (–∫–∞–∂–¥—ã–π —Å–æ–∑–¥–∞–µ—Ç label + malloc)
  - 2 –∫–Ω–æ–ø–∫–∏ + labels
  - 1 status label

**–£–∑–∫–∏–µ –º–µ—Å—Ç–∞:**

| –û–ø–µ—Ä–∞—Ü–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –í—Ä–µ–º—è (–º—Å) | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----------|------------|-----------|
| create_pump_widget() | 6 | 30-40 | 6 –Ω–∞—Å–æ—Å–æ–≤ |
| lv_obj_create | 60+ | 20-30 | –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ |
| lv_obj_set_style_* | 50+ | 5-8 | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∏–ª–µ–π |
| lv_obj_set_style_text_font | 8√ó6=48 | 5 | **–ò–ó–ë–´–¢–û–ß–ù–û!** |
| widget_encoder_value_create | 2√ó6=12 | 8-12 | Malloc + setup |
| snprintf | 12 | 6 | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| lv_obj_align | 40+ | 5 | –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ |
| ESP_LOGI | 1-2 | 7 | UART |
| **–ò–¢–û–ì–û** | - | **86-115 –º—Å** | **–û–ß–ï–ù–¨ –ú–ï–î–õ–ï–ù–ù–û!** |

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –£–±—Ä–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –£–¥–∞–ª–∏—Ç—å –í–°–ï `lv_obj_set_style_text_font(&montserrat_ru, 0)`
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `lv_obj_add_style(obj, &style_label, 0)` –≥–¥–µ –Ω—É–∂–Ω–æ
3. –ü–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —à—Ä–∏—Ñ—Ç –∏–∑ theme

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–∞–≤–∫–∏:**
- pid_tuning_screen.c - —É–±—Ä–∞—Ç—å 8 –≤—ã–∑–æ–≤–æ–≤
- pump_calibration_screen.c - —É–±—Ä–∞—Ç—å 8 –≤—ã–∑–æ–≤–æ–≤
- pid_thresholds_screen.c - —É–±—Ä–∞—Ç—å 7 –≤—ã–∑–æ–≤–æ–≤
- pid_detail_screen.c - —É–±—Ä–∞—Ç—å 2 –≤—ã–∑–æ–≤–∞
- pid_advanced_screen.c - —É–±—Ä–∞—Ç—å 2 –≤—ã–∑–æ–≤–∞
- pid_main_screen.c - —É–±—Ä–∞—Ç—å 2 –≤—ã–∑–æ–≤–∞
- –ò –¥—Ä—É–≥–∏–µ...

**–û–∂–∏–¥–∞–µ–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ:** **2-5 –º—Å** –Ω–∞ —ç–∫—Ä–∞–Ω

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å flex layout –≤–º–µ—Å—Ç–æ align

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å flex layout –¥–ª—è –≥—Ä—É–ø–ø—ã –∫–Ω–æ–ø–æ–∫
2. –£–±—Ä–∞—Ç—å lv_obj_align() –¥–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–æ–ø–∫–∏
3. –ö–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ/–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ

**–ü—Ä–∏–º–µ—Ä —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ pid_detail_screen:**

```c
// –°–û–ó–î–ê–¢–¨ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫
lv_obj_t *btn_grid = lv_obj_create(screen);
lv_obj_set_size(btn_grid, 220, LV_SIZE_CONTENT);
lv_obj_align(btn_grid, LV_ALIGN_BOTTOM_MID, 0, -10);

// GRID LAYOUT 2√ó3
static int32_t col_dsc[] = {100, 100, LV_GRID_TEMPLATE_LAST};
static int32_t row_dsc[] = {32, 32, 32, LV_GRID_TEMPLATE_LAST};
lv_obj_set_grid_dsc_array(btn_grid, col_dsc, row_dsc);

// –ö–Ω–æ–ø–∫–∏ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ grid (–ë–ï–ó align!)
lv_obj_t *tune_btn = lv_btn_create(btn_grid);
lv_obj_set_grid_cell(tune_btn, LV_GRID_ALIGN_CENTER, 0, 1, LV_GRID_ALIGN_CENTER, 0, 1);
// –û–¥–∏–Ω –≤—ã–∑–æ–≤ –≤–º–µ—Å—Ç–æ size + align!
```

**–û–∂–∏–¥–∞–µ–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ:** **1-3 –º—Å** –Ω–∞ —ç–∫—Ä–∞–Ω

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –°–æ–∑–¥–∞—Ç—å helper –¥–ª—è –∫–Ω–æ–ø–æ–∫

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –°–æ–∑–¥–∞—Ç—å `widgets/button_helpers.h`
2. –§—É–Ω–∫—Ü–∏—è `widget_create_styled_button()`
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö

**–û–∂–∏–¥–∞–µ–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ:** **0.5-1 –º—Å** + —á–∏—â–µ –∫–æ–¥

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å pump_calibration_screen

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –°–æ–∑–¥–∞—Ç—å –°–¢–ò–õ–¨ –¥–ª—è pump_widget –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
2. –£–±—Ä–∞—Ç—å 5 –≤—ã–∑–æ–≤–æ–≤ lv_obj_set_style_* ‚Üí 1 –≤—ã–∑–æ–≤ lv_obj_add_style()
3. –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å result config_manager_get_cached()

**–ö–æ–¥:**

```c
// –í create_pump_widget() - –ë–´–õ–û:
lv_obj_set_style_bg_color(widget->container, lv_color_hex(0x2a2a2a), 0);
lv_obj_set_style_border_color(widget->container, lv_color_hex(0x444444), 0);
lv_obj_set_style_border_width(widget->container, 1, 0);
lv_obj_set_style_radius(widget->container, 8, 0);
lv_obj_set_style_pad_all(widget->container, 6, 0);

// –°–¢–ê–õ–û:
extern lv_style_t style_pump_calib_widget;  // –°–æ–∑–¥–∞–Ω –≤ init_styles()
lv_obj_add_style(widget->container, &style_pump_calib_widget, 0);
```

**–û–∂–∏–¥–∞–µ–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ:** **20-30 –º—Å** (–û–ì–†–û–ú–ù–û–ï!)

---

## üìà –ò–¢–û–ì–û–í–´–ô –ü–û–¢–ï–ù–¶–ò–ê–õ –£–°–ö–û–†–ï–ù–ò–Ø

### PID Detail Screen
- **–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:** 15-20 –º—Å
- **–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:** 8-10 –º—Å
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** **2x**

### PID Tuning Screen
- **–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:** 20-25 –º—Å
- **–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:** 10-12 –º—Å
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** **2x**

### Pump Calibration Screen
- **–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:** 86-115 –º—Å ‚ö†Ô∏è
- **–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:** 40-50 –º—Å
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** **2-3x** (–û–ì–†–û–ú–ù–û–ï!)

---

## üõ†Ô∏è –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –ë—ã—Å—Ç—Ä—ã–µ –ø–æ–±–µ–¥—ã (1-2 —á–∞—Å–∞ —Ä–∞–±–æ—Ç—ã):

1. **–£–±—Ä–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ lv_obj_set_style_text_font()**
   - –§–∞–π–ª—ã: –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
   - –ó–∞–º–µ–Ω: ~39 –º–µ—Å—Ç
   - –£—Å–∫–æ—Ä–µ–Ω–∏–µ: 2-5 –º—Å/—ç–∫—Ä–∞–Ω

2. **–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –ª–æ–≥–∏ –Ω–∞ DEBUG —É—Ä–æ–≤–µ–Ω—å**
   - –§–∞–π–ª—ã: –≤—Å–µ create —Ñ—É–Ω–∫—Ü–∏–∏
   - –ó–∞–º–µ–Ω: ~20 –º–µ—Å—Ç
   - –£—Å–∫–æ—Ä–µ–Ω–∏–µ: 5-10 –º—Å/—ç–∫—Ä–∞–Ω

3. **–°–æ–∑–¥–∞—Ç—å —Å—Ç–∏–ª—å –¥–ª—è pump_widget**
   - –§–∞–π–ª: lvgl_ui.c (init_styles)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ pump_calibration_screen.c
   - –£—Å–∫–æ—Ä–µ–Ω–∏–µ: 20-30 –º—Å –¥–ª—è calibration

### –°—Ä–µ–¥–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (3-4 —á–∞—Å–∞):

4. **Helper –¥–ª—è –∫–Ω–æ–ø–æ–∫**
   - –ù–æ–≤—ã–π —Ñ–∞–π–ª: widgets/button_helpers.h
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ 5+ —ç–∫—Ä–∞–Ω–∞—Ö
   - –£—Å–∫–æ—Ä–µ–Ω–∏–µ: 0.5-1 –º—Å/—ç–∫—Ä–∞–Ω + —á–∏—â–µ –∫–æ–¥

5. **Flex/Grid layout –≤–º–µ—Å—Ç–æ align**
   - –§–∞–π–ª—ã: pid_detail, pid_tuning
   - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫
   - –£—Å–∫–æ—Ä–µ–Ω–∏–µ: 1-3 –º—Å/—ç–∫—Ä–∞–Ω

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

6. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å snprintf**
   - –†–∞–∑–±–∏—Ç—å –±–æ–ª—å—à–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å lv_label_set_text_fmt
   - –£—Å–∫–æ—Ä–µ–Ω–∏–µ: 1-2 –º—Å/—ç–∫—Ä–∞–Ω

---

## üéØ –ì–õ–ê–í–ù–û–ï

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:

**–ú–µ–¥–ª–µ–Ω–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã:**
- Pump Calibration: **86-115 –º—Å** ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û
- PID Detail: 15-20 –º—Å
- PID Tuning: 20-25 –º—Å
- PID Advanced: 15-20 –º—Å

**–ü–æ—á–µ–º—É –¥–æ–ª–≥–æ:**
1. ‚ùå 39 –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫ —à—Ä–∏—Ñ—Ç–∞
2. ‚ùå 30+ –≤—ã–∑–æ–≤–æ–≤ lv_obj_align()
3. ‚ùå 50+ –≤—ã–∑–æ–≤–æ–≤ lv_obj_set_style_* (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç–∏–ª–∏!)
4. ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ snprintf() —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
5. ‚ùå ESP_LOGI –≤ UART (3-7 –º—Å –∫–∞–∂–¥—ã–π!)

**–° –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π:**
- ‚úÖ Watchdog timeout –ù–ï –≤–æ–∑–Ω–∏–∫–∞–µ—Ç
- ‚úÖ Loading –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- ‚ö†Ô∏è –ù–û —ç–∫—Ä–∞–Ω—ã –≤—Å–µ —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞—é—Ç—Å—è 50-100+ –º—Å

---

## üöÄ –ß–¢–û –°–î–ï–õ–ê–¢–¨ –°–ï–ô–ß–ê–°

### –†–µ–∫–æ–º–µ–Ω–¥—É—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

**1. –£–±—Ä–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- –ü—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞: —É–¥–∞–ª–∏—Ç—å `lv_obj_set_style_text_font()`
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ: **2-5 –º—Å** –Ω–∞ —ç–∫—Ä–∞–Ω
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 30 –º–∏–Ω—É—Ç

**2. –°–æ–∑–¥–∞—Ç—å —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- `style_pump_calib_widget` –≤ init_styles()
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ pump_calibration_screen
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ: **20-30 –º—Å** –¥–ª—è calibration!
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 15 –º–∏–Ω—É—Ç

**3. –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –ª–æ–≥–∏ –Ω–∞ DEBUG** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
- ESP_LOGI ‚Üí ESP_LOGD –≤ create —Ñ—É–Ω–∫—Ü–∏—è—Ö
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ: **3-7 –º—Å** –Ω–∞ —ç–∫—Ä–∞–Ω
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 15 –º–∏–Ω—É—Ç

**–ò—Ç–æ–≥–æ:** **1 —á–∞—Å —Ä–∞–±–æ—Ç—ã** ‚Üí —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ **2-3 —Ä–∞–∑–∞**!

---

–•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª —ç—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏?

