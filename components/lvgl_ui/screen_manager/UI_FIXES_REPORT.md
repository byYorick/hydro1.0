# –û—Ç—á—ë—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö UI –ø—Ä–æ–±–ª–µ–º

**–î–∞—Ç–∞:** 2025-10-09  
**–í–µ—Ä—Å–∏—è:** Screen Manager + UI Widgets 1.2  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´

---

## üêõ –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ò –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚ùå –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
```c
// –ë–´–õ–û –≤ back_button.c:
lv_obj_t* widget_create_back_button(lv_obj_t *parent, 
                                     lv_event_cb_t callback,
                                     void *user_data) {
    // ...
    // –ï—Å–ª–∏ callback == NULL, –∫–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å –ë–ï–ó –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞!
    if (callback) {
        lv_obj_add_event_cb(btn, callback, LV_EVENT_CLICKED, user_data);
    }
    // ‚ùå –ò–Ω–∞—á–µ –∫–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞!
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –Ω–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª–∞ –Ω–∞ –∫–ª–∏–∫–∏
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å —ç–∫—Ä–∞–Ω–æ–≤ –¥–µ—Ç–∞–ª–µ–π –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –±—ã–ª–∞ —Å–ª–æ–º–∞–Ω–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```c
// –°–¢–ê–õ–û:
/**
 * @brief –î–µ—Ñ–æ–ª—Ç–Ω—ã–π callback –¥–ª—è –∫–Ω–æ–ø–∫–∏ –Ω–∞–∑–∞–¥ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Screen Manager
 */
static void default_back_callback(lv_event_t *e) {
    ESP_LOGI(TAG, "Back button pressed - navigating back");
    esp_err_t ret = screen_go_back();
    if (ret != ESP_OK) {
        ESP_LOGW(TAG, "Failed to go back: %s", esp_err_to_name(ret));
    }
}

lv_obj_t* widget_create_back_button(...) {
    // ‚úÖ –ï—Å–ª–∏ callback –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π!
    if (callback) {
        lv_obj_add_event_cb(btn, callback, LV_EVENT_CLICKED, user_data);
    } else {
        lv_obj_add_event_cb(btn, default_back_callback, LV_EVENT_CLICKED, NULL);
    }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ!

---

### 2. ‚ùå –ü–æ–ø–∞–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ –≤—ã–≤–æ–¥–∏–ª—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω / –≤—ã–≤–æ–¥–∏–ª—Å—è –∫—Ä–∏–≤–æ

**–ü—Ä–æ–±–ª–µ–º–∞ 2.1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏ –ø–æ–∑–∏—Ü–∏—è**
```c
// –ë–´–õ–û:
lv_obj_set_size(popup, 220, 70);  // –ú–∞–ª–µ–Ω—å–∫–∏–π —Ä–∞–∑–º–µ—Ä
int y_offset = 10 + (slot * 75);   // –°–≤–µ—Ä—Ö—É, –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º
lv_obj_set_pos(popup, 10, y_offset);
// ‚ùå –ü–æ–ø–∞–ø—ã –Ω–∞–µ–∑–∂–∞–ª–∏ –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ –∏ –±—ã–ª–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–º–∏
```

**–ü—Ä–æ–±–ª–µ–º–∞ 2.2: –ù–µ—Ç –∫–Ω–æ–ø–∫–∏ OK**
```c
// –ë–´–õ–û:
lv_obj_add_flag(popup, LV_OBJ_FLAG_CLICKABLE);
lv_obj_add_event_cb(popup, popup_click_cb, LV_EVENT_CLICKED, NULL);
// ‚ùå –ù—É–∂–Ω–æ –±—ã–ª–æ –∫–ª–∏–∫–∞—Ç—å –Ω–∞ –≤–µ—Å—å –ø–æ–ø–∞–ø - –Ω–µ—É–¥–æ–±–Ω–æ –∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ —Å —ç–Ω–∫–æ–¥–µ—Ä–æ–º
```

**–ü—Ä–æ–±–ª–µ–º–∞ 2.3: –ù–µ—Ç –≥—Ä—É–ø–ø—ã —ç–Ω–∫–æ–¥–µ—Ä–∞**
```c
// –ë–´–õ–û:
// ‚ùå –ü–æ–ø–∞–ø –Ω–µ –∏–º–µ–ª –≥—Ä—É–ø–ø—ã —ç–Ω–∫–æ–¥–µ—Ä–∞
// ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø–æ–ø–∞–ø —Å —ç–Ω–∫–æ–¥–µ—Ä–∞
// ‚ùå –§–æ–∫—É—Å –æ—Å—Ç–∞–≤–∞–ª—Å—è –Ω–∞ —Å—Ç–∞—Ä–æ–º —ç–∫—Ä–∞–Ω–µ
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```c
// –°–¢–ê–õ–û:
// ‚úÖ –ú–æ–¥–∞–ª—å–Ω—ã–π –ø–æ–ø–∞–ø –ø–æ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞
lv_obj_set_size(popup, 200, 140);
lv_obj_center(popup);

// ‚úÖ –ö–Ω–æ–ø–∫–∞ OK
lv_obj_t *ok_btn = lv_btn_create(popup);
lv_obj_set_size(ok_btn, 80, 35);
lv_obj_add_event_cb(ok_btn, popup_ok_click_cb, LV_EVENT_CLICKED, NULL);

// ‚úÖ –ì—Ä—É–ø–ø–∞ —ç–Ω–∫–æ–¥–µ—Ä–∞ –¥–ª—è –ø–æ–ø–∞–ø–∞
popup_groups[slot] = lv_group_create();
lv_group_add_obj(popup_groups[slot], ok_btn);
lv_indev_set_group(indev, popup_groups[slot]);

// ‚úÖ –§–æ–∫—É—Å –Ω–∞ –∫–Ω–æ–ø–∫–µ OK
lv_group_focus_obj(ok_btn);

// ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
screen_instance_t *current_screen = screen_get_current();
if (current_screen && current_screen->encoder_group) {
    lv_indev_set_group(indev, current_screen->encoder_group);
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- ‚úÖ –ü–æ–ø–∞–ø –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ
- ‚úÖ –ï—Å—Ç—å –∫–Ω–æ–ø–∫–∞ OK —Å —Ñ–æ–∫—É—Å–æ–º
- ‚úÖ –ü–æ–ø–∞–ø –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ —ç–Ω–∫–æ–¥–µ—Ä–∞
- ‚úÖ –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Ñ–æ–∫—É—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω

---

### 3. ‚ùå –≠–∫—Ä–∞–Ω—ã –¥–µ—Ç–∞–ª–µ–π –≤—ã–≤–æ–¥–∏–ª–∏—Å—å –∫—Ä–∏–≤–æ

**–ü—Ä–æ–±–ª–µ–º–∞:**
```c
// –ë–´–õ–û –≤ template_create_detail_screen:
// ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
lv_obj_align(info_panel, LV_ALIGN_TOP_MID, 0, 0);
lv_obj_align(values_panel, LV_ALIGN_TOP_MID, 0, 110);  // –ñ—ë—Å—Ç–∫–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
lv_obj_align(current_label, LV_ALIGN_TOP_LEFT, 0, 0);
lv_obj_align(target_value, LV_ALIGN_TOP_RIGHT, 0, 25);
// ‚ùå –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–∫–ª–∞–¥—ã–≤–∞–ª–∏—Å—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –≠–ª–µ–º–µ–Ω—Ç—ã "—É–ø–ª—ã–≤–∞–ª–∏" –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞
- –ù–∞–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```c
// –°–¢–ê–õ–û: Flex layout –≤–µ–∑–¥–µ
lv_obj_set_flex_flow(base.content, LV_FLEX_FLOW_COLUMN);
lv_obj_set_flex_align(base.content, LV_FLEX_ALIGN_START, ...);

// –ü–∞–Ω–µ–ª—å –∑–Ω–∞—á–µ–Ω–∏–π - flex row
lv_obj_set_flex_flow(values_panel, LV_FLEX_FLOW_ROW);
lv_obj_set_flex_align(values_panel, LV_FLEX_ALIGN_SPACE_EVENLY, ...);

// –ö–æ–ª–æ–Ω–∫–∏ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π - flex column
lv_obj_set_flex_flow(current_col, LV_FLEX_FLOW_COLUMN);
lv_obj_set_flex_flow(target_col, LV_FLEX_FLOW_COLUMN);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å—ë –≤—ã—Ä–æ–≤–Ω–µ–Ω–æ, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π layout, –Ω–µ—Ç –Ω–∞–ª–æ–∂–µ–Ω–∏–π

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –±–∞–≥–æ–≤: **3**

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å |
|---|----------|-------------|------|--------|
| 1 | –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è | `back_button.c` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ |
| 2 | –ü–æ–ø–∞–ø –±–µ–∑ –∫–Ω–æ–ø–∫–∏ OK –∏ —Ñ–æ–∫—É—Å–∞ | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è | `notification_popup.c` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω |
| 3 | –ö—Ä–∏–≤–æ –≤—ã–≤–æ–¥–∏–ª–∏—Å—å —ç–∫—Ä–∞–Ω—ã –¥–µ—Ç–∞–ª–µ–π | üü° –í—ã—Å–æ–∫–∞—è | `screen_template.c` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |

### –ó–∞—Ç—Ä–æ–Ω—É—Ç–æ —Ñ–∞–π–ª–æ–≤: **3**

1. ‚úÖ `components/lvgl_ui/widgets/back_button.c`
2. ‚úÖ `components/lvgl_ui/widgets/notification_popup.c`
3. ‚úÖ `components/lvgl_ui/screens/base/screen_template.c`

---

## ‚úÖ –ù–û–í–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è "–ù–∞–∑–∞–¥"

–¢–µ–ø–µ—Ä—å –≤—Å–µ —ç–∫—Ä–∞–Ω—ã —Å `back_callback = NULL` –ø–æ–ª—É—á–∞—é—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é** —á–µ—Ä–µ–∑ Screen Manager:

```c
// –ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π—Ç–µ —ç–∫—Ä–∞–Ω —Å back_button
screen_base_config_t cfg = {
    .has_back_button = true,
    .back_callback = NULL,  // ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑–æ–≤–µ—Ç screen_go_back()
};
```

---

### 2. –ú–æ–¥–∞–ª—å–Ω—ã–µ –ø–æ–ø–∞–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–¢–µ–ø–µ—Ä—å –ø–æ–ø–∞–ø—ã:
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è **–ø–æ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞** (–º–æ–¥–∞–ª—å–Ω–æ)
- ‚úÖ –ò–º–µ—é—Ç **–∫–Ω–æ–ø–∫—É "OK"**
- ‚úÖ **–§–æ–∫—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –Ω–∞ –∫–Ω–æ–ø–∫–µ OK
- ‚úÖ –ó–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è **–ø–æ –∫–Ω–æ–ø–∫–µ —ç–Ω–∫–æ–¥–µ—Ä–∞**
- ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —Ñ–æ–∫—É—Å** –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ **–ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –∏ —Ç–µ–Ω–∏** –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è
- ‚úÖ **–¶–≤–µ—Ç–∞ –ø–æ —Ç–∏–ø—É** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–î–∏–∑–∞–π–Ω –ø–æ–ø–∞–ø–∞:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   ‚ö† (–∏–∫–æ–Ω–∫–∞)        ‚îÇ
‚îÇ                      ‚îÇ
‚îÇ  –°–æ–æ–±—â–µ–Ω–∏–µ          ‚îÇ
‚îÇ  —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è        ‚îÇ
‚îÇ                      ‚îÇ
‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ      ‚îÇ OK ‚îÇ  ‚Üê —Ñ–æ–∫—É—Å ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### 3. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π layout —ç–∫—Ä–∞–Ω–æ–≤ –¥–µ—Ç–∞–ª–µ–π

–¢–µ–ø–µ—Ä—å —ç–∫—Ä–∞–Ω—ã –¥–µ—Ç–∞–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç flex layout:
- ‚úÖ –≠–ª–µ–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è
- ‚úÖ –ù–µ—Ç –Ω–∞–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Ä–∞–∑–º–µ—Ä—É —ç–∫—Ä–∞–Ω–∞
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ü–æ–ø–∞–ø - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏ —ç–Ω–∫–æ–¥–µ—Ä–∞

```c
// –ü—Ä–∏ –ø–æ–∫–∞–∑–µ –ø–æ–ø–∞–ø–∞:
1. –°–æ–∑–¥–∞–µ–º –≥—Ä—É–ø–ø—É —ç–Ω–∫–æ–¥–µ—Ä–∞ –¥–ª—è –ø–æ–ø–∞–ø–∞
2. –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É OK –≤ –≥—Ä—É–ø–ø—É
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä—É–ø–ø—É –Ω–∞ encoder indev
4. –§–æ–∫—É—Å –Ω–∞ –∫–Ω–æ–ø–∫—É OK

// –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞:
1. –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π —ç–∫—Ä–∞–Ω —á–µ—Ä–µ–∑ screen_get_current()
2. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º encoder_group —Ç–µ–∫—É—â–µ–≥–æ —ç–∫—Ä–∞–Ω–∞
3. –£–¥–∞–ª—è–µ–º –≥—Ä—É–ø–ø—É –ø–æ–ø–∞–ø–∞
4. –£–¥–∞–ª—è–µ–º –ø–æ–ø–∞–ø

‚Üí –§–æ–∫—É—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
```

### –°—Ç–µ–∫ –≥—Ä—É–ø–ø —ç–Ω–∫–æ–¥–µ—Ä–∞:

```
–ü–æ–ø–∞–ø –æ—Ç–∫—Ä—ã—Ç:
  encoder_indev ‚Üí popup_group ‚Üí [OK button] ‚Üê —Ñ–æ–∫—É—Å
  
–ü–æ–ø–∞–ø –∑–∞–∫—Ä—ã—Ç:
  encoder_indev ‚Üí screen_group ‚Üí [screen widgets] ‚Üê —Ñ–æ–∫—É—Å

‚Üí –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≥—Ä—É–ø–ø –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Ñ–æ–∫—É—Å–∞!
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´

### –¢–µ—Å—Ç 1: –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"

```
1. –û—Ç–∫—Ä—ã–≤–∞–µ–º detail_ph —á–µ—Ä–µ–∑ screen_show()
2. –ù–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" (—ç–Ω–∫–æ–¥–µ—Ä–æ–º –∏–ª–∏ –∫–ª–∏–∫–æ–º)
3. ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
4. ‚úÖ –§–æ–∫—É—Å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
```

### –¢–µ—Å—Ç 2: –ü–æ–ø–∞–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```
1. –ù–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
2. ‚úÖ –ü–æ–ø–∞–ø –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ —Ü–µ–Ω—Ç—Ä—É
3. ‚úÖ –§–æ–∫—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–µ OK
4. –ù–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É —ç–Ω–∫–æ–¥–µ—Ä–∞
5. ‚úÖ –ü–æ–ø–∞–ø –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
6. ‚úÖ –§–æ–∫—É—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
```

### –¢–µ—Å—Ç 3: –ü–æ–ø–∞–ø –Ω–∞ —ç–∫—Ä–∞–Ω–µ –¥–µ—Ç–∞–ª–µ–π

```
1. –û—Ç–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π
2. –ü—Ä–∏—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
3. ‚úÖ –ü–æ–ø–∞–ø –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö
4. ‚úÖ –§–æ–∫—É—Å –Ω–∞ –∫–Ω–æ–ø–∫–µ OK –ø–æ–ø–∞–ø–∞
5. –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ–ø–∞–ø
6. ‚úÖ –§–æ–∫—É—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π
```

### –¢–µ—Å—Ç 4: Layout —ç–∫—Ä–∞–Ω–æ–≤ –¥–µ—Ç–∞–ª–µ–π

```
1. –û—Ç–∫—Ä—ã–≤–∞–µ–º –ª—é–±–æ–π —ç–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π
2. ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ —Å–≤–µ—Ä—Ö—É (–Ω–µ –æ–±—Ä–µ–∑–∞–Ω–æ)
3. ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —Ü–µ–Ω—Ç—Ä—É (–¥–≤–µ –∫–æ–ª–æ–Ω–∫–∏)
4. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" –≤–Ω–∏–∑—É
5. ‚úÖ –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–∏–¥–Ω—ã, –Ω–µ—Ç –Ω–∞–ª–æ–∂–µ–Ω–∏–π
```

---

## üìù –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

### 1. `components/lvgl_ui/widgets/back_button.c`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `default_back_callback()` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- ‚úÖ –ü—Ä–∏ `callback == NULL` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π callback
- ‚úÖ –î–µ—Ñ–æ–ª—Ç–Ω—ã–π callback –≤—ã–∑—ã–≤–∞–µ—Ç `screen_go_back()`

**–°—Ç—Ä–æ–∫–∏:** ~20 –¥–æ–±–∞–≤–ª–µ–Ω–æ

---

### 2. `components/lvgl_ui/widgets/notification_popup.c`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Å—Å–∏–≤ `popup_groups[]` –¥–ª—è –≥—Ä—É–ø–ø —ç–Ω–∫–æ–¥–µ—Ä–∞
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `close_popup_by_slot()` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞
- ‚úÖ –ü–µ—Ä–µ–¥–µ–ª–∞–Ω layout –ø–æ–ø–∞–ø–∞ - –º–æ–¥–∞–ª—å–Ω—ã–π, —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "OK"
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã —ç–Ω–∫–æ–¥–µ—Ä–∞ –¥–ª—è –ø–æ–ø–∞–ø–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–æ–∫—É—Å–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É OK
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–æ –≤—Ä–µ–º—è –∞–≤—Ç–æ—Å–∫—Ä—ã—Ç–∏—è –¥–æ 10 —Å–µ–∫—É–Ω–¥

**–°—Ç—Ä–æ–∫–∏:** ~70 –∏–∑–º–µ–Ω–µ–Ω–æ/–¥–æ–±–∞–≤–ª–µ–Ω–æ

---

### 3. `components/lvgl_ui/screens/base/screen_template.c`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ü–µ—Ä–µ–¥–µ–ª–∞–Ω layout –Ω–∞ flex (–≤–º–µ—Å—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ)
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å - LV_SIZE_CONTENT
- ‚úÖ –ü–∞–Ω–µ–ª—å –∑–Ω–∞—á–µ–Ω–∏–π - flex row —Å –¥–≤—É–º—è –∫–æ–ª–æ–Ω–∫–∞–º–∏
- ‚úÖ –ö–∞–∂–¥–∞—è –∫–æ–ª–æ–Ω–∫–∞ - flex column (–ª–µ–π–±–ª + –∑–Ω–∞—á–µ–Ω–∏–µ)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ - –≤ flex –ø–æ—Ç–æ–∫–µ
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ `settings_user_data`

**–°—Ç—Ä–æ–∫–∏:** ~40 –∏–∑–º–µ–Ω–µ–Ω–æ

---

### 4. `components/lvgl_ui/screens/sensor/sensor_detail_screen.c`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `screen_go_back()`

**–°—Ç—Ä–æ–∫–∏:** 1 –∏–∑–º–µ–Ω–µ–Ω–æ (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π)

---

## üé® –í–ò–ó–£–ê–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –î–æ –∏ –ü–æ—Å–ª–µ:

#### –ü–æ–ø–∞–ø (–ë–´–õ–û):
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ö† ‚îÇ –°–æ–æ–±—â–µ–Ω–∏–µ...     ‚îÇ  ‚Üê –º–∞–ª–µ–Ω—å–∫–∏–π, —Å–≤–µ—Ä—Ö—É
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚ùå –ù–µ—Ç –∫–Ω–æ–ø–∫–∏ OK
‚ùå –ù–µ—Ç —Ñ–æ–∫—É—Å–∞ —ç–Ω–∫–æ–¥–µ—Ä–∞
```

#### –ü–æ–ø–∞–ø (–°–¢–ê–õ–û):
```
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ                ‚îÇ
      ‚îÇ      ‚ö†        ‚îÇ
      ‚îÇ                ‚îÇ
      ‚îÇ   –°–æ–æ–±—â–µ–Ω–∏–µ    ‚îÇ
      ‚îÇ  —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è   ‚îÇ
      ‚îÇ                ‚îÇ
      ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
      ‚îÇ    ‚îÇ OK ‚îÇ ‚Üê—Ñ–æ–∫—É—Å‚îÇ
      ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
      ‚îÇ                ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚úÖ –ü–æ —Ü–µ–Ω—Ç—Ä—É, –º–æ–¥–∞–ª—å–Ω—ã–π
‚úÖ –ö–Ω–æ–ø–∫–∞ OK —Å —Ñ–æ–∫—É—Å–æ–º
‚úÖ –ó–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —ç–Ω–∫–æ–¥–µ—Ä–æ–º
```

---

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ü–†–û–î–ê–ö–®–ù

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---------|--------|
| –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ü–æ–ø–∞–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ü–æ–ø–∞–ø —Å –∫–Ω–æ–ø–∫–æ–π OK | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –§–æ–∫—É—Å –Ω–∞ –∫–Ω–æ–ø–∫–µ OK | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–ø–∞–ø–∞ —ç–Ω–∫–æ–¥–µ—Ä–æ–º | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–∞ –ø–æ—Å–ª–µ –ø–æ–ø–∞–ø–∞ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| Layout —ç–∫—Ä–∞–Ω–æ–≤ –¥–µ—Ç–∞–ª–µ–π | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω |
| –ö–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫ | ‚úÖ OK |

---

## üìö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

### –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥":

```c
screen_base_config_t cfg = {
    .title = "My Screen",
    .has_status_bar = true,
    .has_back_button = true,
    .back_callback = NULL,  // ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è!
};

screen_base_t base = screen_base_create(&cfg);
// –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑–æ–≤–µ—Ç screen_go_back()
```

### –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –ø–æ–ø–∞–ø–æ–º:

```c
// –°–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
notification_t notif = {
    .type = NOTIF_TYPE_WARNING,
    .priority = NOTIF_PRIORITY_HIGH,
    .message = "–í–Ω–∏–º–∞–Ω–∏–µ: –≤—ã—Å–æ–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞!"
};

// ‚úÖ –ü–æ–ø–∞–ø –ø–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–µ—Å–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω callback)
widget_show_notification_popup(&notif);

// –ü–æ–ø–∞–ø:
// - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ü–µ–Ω—Ç—Ä—É
// - –ò–º–µ–µ—Ç –∫–Ω–æ–ø–∫—É OK —Å —Ñ–æ–∫—É—Å–æ–º
// - –ó–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ —ç–Ω–∫–æ–¥–µ—Ä—É
// - –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–æ–∫—É—Å –Ω–∞ —ç–∫—Ä–∞–Ω
```

---

## ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –°–¢–ê–¢–£–°

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ö–ù–û–ü–ö–ê "–ù–ê–ó–ê–î":         ‚úÖ –†–ê–ë–û–¢–ê–ï–¢    ‚îÇ
‚îÇ  –ü–û–ü–ê–ü –£–í–ï–î–û–ú–õ–ï–ù–ò–ô:      ‚úÖ –†–ê–ë–û–¢–ê–ï–¢    ‚îÇ
‚îÇ  –ö–ù–û–ü–ö–ê OK –ù–ê –ü–û–ü–ê–ü–ï:    ‚úÖ –†–ê–ë–û–¢–ê–ï–¢    ‚îÇ
‚îÇ  –§–û–ö–£–° –ù–ê –ö–ù–û–ü–ö–ï:        ‚úÖ –†–ê–ë–û–¢–ê–ï–¢    ‚îÇ
‚îÇ  –ó–ê–ö–†–´–¢–ò–ï –≠–ù–ö–û–î–ï–†–û–ú:     ‚úÖ –†–ê–ë–û–¢–ê–ï–¢    ‚îÇ
‚îÇ  LAYOUT –î–ï–¢–ê–õ–ï–ô:         ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù   ‚îÇ
‚îÇ  –ö–û–ú–ü–ò–õ–Ø–¶–ò–Ø:             ‚úÖ –ë–ï–ó –û–®–ò–ë–û–ö  ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  –ì–û–¢–û–í–ù–û–°–¢–¨:             ‚úÖ –ü–†–û–î–ê–ö–®–ù     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!**  
**UI –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω!**  
**–≠–Ω–∫–æ–¥–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ!**

**–î–∞—Ç–∞:** 2025-10-09  
**–í–µ—Ä—Å–∏—è:** Screen Manager + UI 1.2  
**–ê–≤—Ç–æ—Ä:** Hydroponics Monitor Team

